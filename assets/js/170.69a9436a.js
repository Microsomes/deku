/*! For license information please see 170.69a9436a.js.LICENSE.txt */
(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[170],{33890:(e,t,n)=>{e.exports=n(12499)},67613:(e,t,n)=>{"use strict";var r=n(16918),i=n(34522),s=n(85387),o=n(91928),a=n(76285),c=n(88158),l=n(57702),u=n(53992),d=n(34741),h=n(5284);e.exports=function(e){return new Promise((function(t,n){var p,f=e.data,m=e.headers,g=e.responseType;function E(){e.cancelToken&&e.cancelToken.unsubscribe(p),e.signal&&e.signal.removeEventListener("abort",p)}r.isFormData(f)&&delete m["Content-Type"];var v=new XMLHttpRequest;if(e.auth){var y=e.auth.username||"",A=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";m.Authorization="Basic "+btoa(y+":"+A)}var T=a(e.baseURL,e.url);function b(){if(v){var r="getAllResponseHeaders"in v?c(v.getAllResponseHeaders()):null,s={data:g&&"text"!==g&&"json"!==g?v.response:v.responseText,status:v.status,statusText:v.statusText,headers:r,config:e,request:v};i((function(e){t(e),E()}),(function(e){n(e),E()}),s),v=null}}if(v.open(e.method.toUpperCase(),o(T,e.params,e.paramsSerializer),!0),v.timeout=e.timeout,"onloadend"in v?v.onloadend=b:v.onreadystatechange=function(){v&&4===v.readyState&&(0!==v.status||v.responseURL&&0===v.responseURL.indexOf("file:"))&&setTimeout(b)},v.onabort=function(){v&&(n(u("Request aborted",e,"ECONNABORTED",v)),v=null)},v.onerror=function(){n(u("Network Error",e,null,v)),v=null},v.ontimeout=function(){var t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",r=e.transitional||d.transitional;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(u(t,e,r.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",v)),v=null},r.isStandardBrowserEnv()){var S=(e.withCredentials||l(T))&&e.xsrfCookieName?s.read(e.xsrfCookieName):void 0;S&&(m[e.xsrfHeaderName]=S)}"setRequestHeader"in v&&r.forEach(m,(function(e,t){void 0===f&&"content-type"===t.toLowerCase()?delete m[t]:v.setRequestHeader(t,e)})),r.isUndefined(e.withCredentials)||(v.withCredentials=!!e.withCredentials),g&&"json"!==g&&(v.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&v.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&v.upload&&v.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(p=function(e){v&&(n(!e||e&&e.type?new h("canceled"):e),v.abort(),v=null)},e.cancelToken&&e.cancelToken.subscribe(p),e.signal&&(e.signal.aborted?p():e.signal.addEventListener("abort",p))),f||(f=null),v.send(f)}))}},12499:(e,t,n)=>{"use strict";var r=n(16918),i=n(47173),s=n(86579),o=n(45668);var a=function e(t){var n=new s(t),a=i(s.prototype.request,n);return r.extend(a,s.prototype,n),r.extend(a,n),a.create=function(n){return e(o(t,n))},a}(n(34741));a.Axios=s,a.Cancel=n(5284),a.CancelToken=n(75776),a.isCancel=n(78610),a.VERSION=n(69495).version,a.all=function(e){return Promise.all(e)},a.spread=n(58126),a.isAxiosError=n(2810),e.exports=a,e.exports.default=a},5284:e=>{"use strict";function t(e){this.message=e}t.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},t.prototype.__CANCEL__=!0,e.exports=t},75776:(e,t,n)=>{"use strict";var r=n(5284);function i(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;this.promise.then((function(e){if(n._listeners){var t,r=n._listeners.length;for(t=0;t<r;t++)n._listeners[t](e);n._listeners=null}})),this.promise.then=function(e){var t,r=new Promise((function(e){n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e){n.reason||(n.reason=new r(e),t(n.reason))}))}i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.prototype.subscribe=function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]},i.prototype.unsubscribe=function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}},i.source=function(){var e;return{token:new i((function(t){e=t})),cancel:e}},e.exports=i},78610:e=>{"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},86579:(e,t,n)=>{"use strict";var r=n(16918),i=n(91928),s=n(74639),o=n(73261),a=n(45668),c=n(84217),l=c.validators;function u(e){this.defaults=e,this.interceptors={request:new s,response:new s}}u.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=a(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=e.transitional;void 0!==t&&c.assertOptions(t,{silentJSONParsing:l.transitional(l.boolean),forcedJSONParsing:l.transitional(l.boolean),clarifyTimeoutError:l.transitional(l.boolean)},!1);var n=[],r=!0;this.interceptors.request.forEach((function(t){"function"==typeof t.runWhen&&!1===t.runWhen(e)||(r=r&&t.synchronous,n.unshift(t.fulfilled,t.rejected))}));var i,s=[];if(this.interceptors.response.forEach((function(e){s.push(e.fulfilled,e.rejected)})),!r){var u=[o,void 0];for(Array.prototype.unshift.apply(u,n),u=u.concat(s),i=Promise.resolve(e);u.length;)i=i.then(u.shift(),u.shift());return i}for(var d=e;n.length;){var h=n.shift(),p=n.shift();try{d=h(d)}catch(f){p(f);break}}try{i=o(d)}catch(f){return Promise.reject(f)}for(;s.length;)i=i.then(s.shift(),s.shift());return i},u.prototype.getUri=function(e){return e=a(this.defaults,e),i(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},r.forEach(["delete","get","head","options"],(function(e){u.prototype[e]=function(t,n){return this.request(a(n||{},{method:e,url:t,data:(n||{}).data}))}})),r.forEach(["post","put","patch"],(function(e){u.prototype[e]=function(t,n,r){return this.request(a(r||{},{method:e,url:t,data:n}))}})),e.exports=u},74639:(e,t,n)=>{"use strict";var r=n(16918);function i(){this.handlers=[]}i.prototype.use=function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1},i.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},i.prototype.forEach=function(e){r.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=i},76285:(e,t,n)=>{"use strict";var r=n(19943),i=n(11621);e.exports=function(e,t){return e&&!r(t)?i(e,t):t}},53992:(e,t,n)=>{"use strict";var r=n(23105);e.exports=function(e,t,n,i,s){var o=new Error(e);return r(o,t,n,i,s)}},73261:(e,t,n)=>{"use strict";var r=n(16918),i=n(48745),s=n(78610),o=n(34741),a=n(5284);function c(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new a("canceled")}e.exports=function(e){return c(e),e.headers=e.headers||{},e.data=i.call(e,e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),r.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||o.adapter)(e).then((function(t){return c(e),t.data=i.call(e,t.data,t.headers,e.transformResponse),t}),(function(t){return s(t)||(c(e),t&&t.response&&(t.response.data=i.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},23105:e=>{"use strict";e.exports=function(e,t,n,r,i){return e.config=t,n&&(e.code=n),e.request=r,e.response=i,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e}},45668:(e,t,n)=>{"use strict";var r=n(16918);e.exports=function(e,t){t=t||{};var n={};function i(e,t){return r.isPlainObject(e)&&r.isPlainObject(t)?r.merge(e,t):r.isPlainObject(t)?r.merge({},t):r.isArray(t)?t.slice():t}function s(n){return r.isUndefined(t[n])?r.isUndefined(e[n])?void 0:i(void 0,e[n]):i(e[n],t[n])}function o(e){if(!r.isUndefined(t[e]))return i(void 0,t[e])}function a(n){return r.isUndefined(t[n])?r.isUndefined(e[n])?void 0:i(void 0,e[n]):i(void 0,t[n])}function c(n){return n in t?i(e[n],t[n]):n in e?i(void 0,e[n]):void 0}var l={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:c};return r.forEach(Object.keys(e).concat(Object.keys(t)),(function(e){var t=l[e]||s,i=t(e);r.isUndefined(i)&&t!==c||(n[e]=i)})),n}},34522:(e,t,n)=>{"use strict";var r=n(53992);e.exports=function(e,t,n){var i=n.config.validateStatus;n.status&&i&&!i(n.status)?t(r("Request failed with status code "+n.status,n.config,null,n.request,n)):e(n)}},48745:(e,t,n)=>{"use strict";var r=n(16918),i=n(34741);e.exports=function(e,t,n){var s=this||i;return r.forEach(n,(function(n){e=n.call(s,e,t)})),e}},34741:(e,t,n)=>{"use strict";var r=n(16918),i=n(98832),s=n(23105),o={"Content-Type":"application/x-www-form-urlencoded"};function a(e,t){!r.isUndefined(e)&&r.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var c,l={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:(("undefined"!=typeof XMLHttpRequest||"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(c=n(67613)),c),transformRequest:[function(e,t){return i(t,"Accept"),i(t,"Content-Type"),r.isFormData(e)||r.isArrayBuffer(e)||r.isBuffer(e)||r.isStream(e)||r.isFile(e)||r.isBlob(e)?e:r.isArrayBufferView(e)?e.buffer:r.isURLSearchParams(e)?(a(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):r.isObject(e)||t&&"application/json"===t["Content-Type"]?(a(t,"application/json"),function(e,t,n){if(r.isString(e))try{return(t||JSON.parse)(e),r.trim(e)}catch(i){if("SyntaxError"!==i.name)throw i}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional||l.transitional,n=t&&t.silentJSONParsing,i=t&&t.forcedJSONParsing,o=!n&&"json"===this.responseType;if(o||i&&r.isString(e)&&e.length)try{return JSON.parse(e)}catch(a){if(o){if("SyntaxError"===a.name)throw s(a,this,"E_JSON_PARSE");throw a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};r.forEach(["delete","get","head"],(function(e){l.headers[e]={}})),r.forEach(["post","put","patch"],(function(e){l.headers[e]=r.merge(o)})),e.exports=l},69495:e=>{e.exports={version:"0.24.0"}},47173:e=>{"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},91928:(e,t,n)=>{"use strict";var r=n(16918);function i(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var s;if(n)s=n(t);else if(r.isURLSearchParams(t))s=t.toString();else{var o=[];r.forEach(t,(function(e,t){null!=e&&(r.isArray(e)?t+="[]":e=[e],r.forEach(e,(function(e){r.isDate(e)?e=e.toISOString():r.isObject(e)&&(e=JSON.stringify(e)),o.push(i(t)+"="+i(e))})))})),s=o.join("&")}if(s){var a=e.indexOf("#");-1!==a&&(e=e.slice(0,a)),e+=(-1===e.indexOf("?")?"?":"&")+s}return e}},11621:e=>{"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},85387:(e,t,n)=>{"use strict";var r=n(16918);e.exports=r.isStandardBrowserEnv()?{write:function(e,t,n,i,s,o){var a=[];a.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),r.isString(i)&&a.push("path="+i),r.isString(s)&&a.push("domain="+s),!0===o&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},19943:e=>{"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},2810:e=>{"use strict";e.exports=function(e){return"object"==typeof e&&!0===e.isAxiosError}},57702:(e,t,n)=>{"use strict";var r=n(16918);e.exports=r.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function i(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=i(window.location.href),function(t){var n=r.isString(t)?i(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},98832:(e,t,n)=>{"use strict";var r=n(16918);e.exports=function(e,t){r.forEach(e,(function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))}},88158:(e,t,n)=>{"use strict";var r=n(16918),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,s,o={};return e?(r.forEach(e.split("\n"),(function(e){if(s=e.indexOf(":"),t=r.trim(e.substr(0,s)).toLowerCase(),n=r.trim(e.substr(s+1)),t){if(o[t]&&i.indexOf(t)>=0)return;o[t]="set-cookie"===t?(o[t]?o[t]:[]).concat([n]):o[t]?o[t]+", "+n:n}})),o):o}},58126:e=>{"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},84217:(e,t,n)=>{"use strict";var r=n(69495).version,i={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){i[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));var s={};i.transitional=function(e,t,n){function i(e,t){return"[Axios v"+r+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,r,o){if(!1===e)throw new Error(i(r," has been removed"+(t?" in "+t:"")));return t&&!s[r]&&(s[r]=!0,console.warn(i(r," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,r,o)}},e.exports={assertOptions:function(e,t,n){if("object"!=typeof e)throw new TypeError("options must be an object");for(var r=Object.keys(e),i=r.length;i-- >0;){var s=r[i],o=t[s];if(o){var a=e[s],c=void 0===a||o(a,s,e);if(!0!==c)throw new TypeError("option "+s+" must be "+c)}else if(!0!==n)throw Error("Unknown option "+s)}},validators:i}},16918:(e,t,n)=>{"use strict";var r=n(47173),i=Object.prototype.toString;function s(e){return"[object Array]"===i.call(e)}function o(e){return void 0===e}function a(e){return null!==e&&"object"==typeof e}function c(e){if("[object Object]"!==i.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function l(e){return"[object Function]"===i.call(e)}function u(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),s(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}e.exports={isArray:s,isArrayBuffer:function(e){return"[object ArrayBuffer]"===i.call(e)},isBuffer:function(e){return null!==e&&!o(e)&&null!==e.constructor&&!o(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:a,isPlainObject:c,isUndefined:o,isDate:function(e){return"[object Date]"===i.call(e)},isFile:function(e){return"[object File]"===i.call(e)},isBlob:function(e){return"[object Blob]"===i.call(e)},isFunction:l,isStream:function(e){return a(e)&&l(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:u,merge:function e(){var t={};function n(n,r){c(t[r])&&c(n)?t[r]=e(t[r],n):c(n)?t[r]=e({},n):s(n)?t[r]=n.slice():t[r]=n}for(var r=0,i=arguments.length;r<i;r++)u(arguments[r],n);return t},extend:function(e,t,n){return u(t,(function(t,i){e[i]=n&&"function"==typeof t?r(t,n):t})),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}}},83683:(e,t)=>{"use strict";t.z=function(){for(var e=0,t=0;t<arguments.length;t++)e+=arguments[t].length;var n=new Uint8Array(e),r=0;for(t=0;t<arguments.length;t++){var i=arguments[t];n.set(i,r),r+=i.length}return n}},56249:(e,t)=>{"use strict";var n="utf8: invalid string",r="utf8: invalid source encoding";function i(e){for(var t=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(i<128)t+=1;else if(i<2048)t+=2;else if(i<55296)t+=3;else{if(!(i<=57343))throw new Error(n);if(r>=e.length-1)throw new Error(n);r++,t+=4}}return t}t.cv=function(e){for(var t=new Uint8Array(i(e)),n=0,r=0;r<e.length;r++){var s=e.charCodeAt(r);s<128?t[n++]=s:s<2048?(t[n++]=192|s>>6,t[n++]=128|63&s):s<55296?(t[n++]=224|s>>12,t[n++]=128|s>>6&63,t[n++]=128|63&s):(r++,s=(1023&s)<<10,s|=1023&e.charCodeAt(r),s+=65536,t[n++]=240|s>>18,t[n++]=128|s>>12&63,t[n++]=128|s>>6&63,t[n++]=128|63&s)}return t}},96273:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.X25519Session=t.SECRET_SEED_LENGTH=t.SAVED_STATE_LENGTH=t.ACCEPT_MESSAGE_LENGTH=t.OFFER_MESSAGE_LENGTH=void 0;const r=n(31416),i=n(17309),s=n(57664),o=n(84826);t.OFFER_MESSAGE_LENGTH=s.PUBLIC_KEY_LENGTH,t.ACCEPT_MESSAGE_LENGTH=s.PUBLIC_KEY_LENGTH,t.SAVED_STATE_LENGTH=s.SECRET_KEY_LENGTH,t.SECRET_SEED_LENGTH=s.SECRET_KEY_LENGTH;t.X25519Session=class{constructor(e,n){this.offerMessageLength=t.OFFER_MESSAGE_LENGTH,this.acceptMessageLength=t.ACCEPT_MESSAGE_LENGTH,this.sharedKeyLength=s.SHARED_KEY_LENGTH,this.savedStateLength=t.SAVED_STATE_LENGTH,this._seed=e||(0,r.randomBytes)(s.SECRET_KEY_LENGTH,n)}saveState(){return new Uint8Array(this._seed)}restoreState(e){return this._seed=new Uint8Array(e),this}clean(){this._seed&&(0,i.wipe)(this._seed),this._keyPair&&((0,i.wipe)(this._keyPair.secretKey),(0,i.wipe)(this._keyPair.publicKey)),this._sharedKey&&(0,i.wipe)(this._sharedKey),this._sessionKeys&&((0,i.wipe)(this._sessionKeys.receive),(0,i.wipe)(this._sessionKeys.send))}offer(){return this._keyPair=(0,s.generateKeyPairFromSeed)(this._seed),new Uint8Array(this._keyPair.publicKey)}accept(e){if(this._keyPair)throw new Error("X25519Session: accept shouldn't be called by offering party");if(e.length!==this.offerMessageLength)throw new Error("X25519Session: incorrect offer message length");if(this._sharedKey)throw new Error("X25519Session: accept was already called");const t=(0,s.generateKeyPairFromSeed)(this._seed);return this._sharedKey=(0,s.sharedKey)(t.secretKey,e),this._sessionKeys=(0,o.clientSessionKeysFromSharedKey)(this._sharedKey,t.publicKey,e),(0,i.wipe)(t.secretKey),t.publicKey}finish(e){if(e.length!==this.acceptMessageLength)throw new Error("X25519Session: incorrect accept message length");if(!this._keyPair)throw new Error("X25519Session: no offer state");if(this._sharedKey)throw new Error("X25519Session: finish was already called");return this._sharedKey=(0,s.sharedKey)(this._keyPair.secretKey,e),this._sessionKeys=(0,o.serverSessionKeysFromSharedKey)(this._sharedKey,this._keyPair.publicKey,e),this}getSharedKey(){if(!this._sharedKey)throw new Error("X25519Session: no shared key established");return new Uint8Array(this._sharedKey)}getSessionKeys(){if(!this._sessionKeys)throw new Error("X25519Session: no shared key established");return{receive:new Uint8Array(this._sessionKeys.receive),send:new Uint8Array(this._sessionKeys.send)}}}},84826:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clientSessionKeys=t.serverSessionKeys=t.clientSessionKeysFromSharedKey=t.serverSessionKeysFromSharedKey=t.X25519Session=void 0;const r=n(41322),i=n(57664);var s=n(96273);Object.defineProperty(t,"X25519Session",{enumerable:!0,get:function(){return s.X25519Session}});const o=32;function a(e,t,n,i=r.BLAKE2b){const s=new i;if(64!==s.digestLength)throw new Error("X25519: incorrect digest length");const a=s.update(e).update(n).update(t).digest();return{send:a.subarray(0,o),receive:a.subarray(o)}}function c(e,t,n,i=r.BLAKE2b){const s=new i;if(64!==s.digestLength)throw new Error("X25519: incorrect digest length");const a=s.update(e).update(t).update(n).digest();return{receive:a.subarray(0,o),send:a.subarray(o)}}t.serverSessionKeysFromSharedKey=a,t.clientSessionKeysFromSharedKey=c,t.serverSessionKeys=function(e,t,n=r.BLAKE2b){return a((0,i.sharedKey)(e.secretKey,t),e.publicKey,t,n)},t.clientSessionKeys=function(e,t,n=r.BLAKE2b){return c((0,i.sharedKey)(e.secretKey,t),e.publicKey,t,n)}},22047:(e,t,n)=>{"use strict";function r(e){return Object.keys(e)}var i;n.d(t,{kx:()=>Vl}),function(e){e.PENDING="pending",e.RESOLVED="resolved",e.REJECTED="rejected"}(i||(i={}));const s=()=>{throw new Error("ExposedPromise not initialized yet.")};class o{constructor(){this._resolve=s,this._reject=s,this._status=i.PENDING,this._promise=new Promise(((e,t)=>{this._resolve=t=>{this.isSettled()||(this._promiseResult=t,e(t),this._status=i.RESOLVED)},this._reject=e=>{this.isSettled()||(this._promiseError=e,t(e),this._status=i.REJECTED)}}))}get promise(){return this._promise}get resolve(){return this._resolve}get reject(){return this._reject}get status(){return this._status}get promiseResult(){return this._promiseResult}get promiseError(){return this._promiseError}static resolve(e){const t=new o;return t.resolve(e),t}static reject(e){const t=new o;return t.reject(e),t}isPending(){return this.status===i.PENDING}isResolved(){return this.status===i.RESOLVED}isRejected(){return this.status===i.REJECTED}isSettled(){return this.isResolved()||this.isRejected()}}var a=n(58334),c=n(70450),l=n(31416),u=n(56249),d=n(41322),h=n(31050),p=n(83683),f=n(48764).Buffer,m=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(t){s(t)}}function a(e){try{c(r.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};function g(e){return f.from(e).toString("hex")}function E(e){return m(this,void 0,void 0,(function*(){return g("string"==typeof e?(0,d.hash)((0,u.cv)(e),32):(0,d.hash)(e,32))}))}function v(e){return m(this,void 0,void 0,(function*(){return(0,h._w)((0,d.hash)((0,u.cv)(e),32))}))}function y(e,t){return m(this,void 0,void 0,(function*(){const n=f.from((0,l.randomBytes)(24));return g(f.concat([n,f.from((0,c.secretBox)(t,n,f.from(e,"utf8")))]))}))}function A(e,t){return m(this,void 0,void 0,(function*(){const n=e.slice(0,24),r=e.slice(24),i=(0,c.openSecretBox)(t,n,r);if(!i)throw new Error("Decryption failed");return f.from(i).toString("utf8")}))}function T(e,t,n){return m(this,void 0,void 0,(function*(){const r=(0,h.zh)(f.from(n)),i=(0,h.SH)(f.from(t)),s="string"==typeof e?(0,u.cv)(e):e,o=s.slice(0,32),a=s.slice(32),l=new d.BLAKE2b(24).update(o,32).update(i,32).digest(),p=(0,c.openBox)(o,r,l,a);if(!p)throw new Error("Decryption failed");return f.from(p).toString()}))}function b(e,t){return`@${e}:${t}`}var S=n(48764).Buffer,w=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(t){s(t)}}function a(e){try{c(r.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};function R(){return w(this,void 0,void 0,(function*(){const e=(0,l.randomBytes)(16);return[e.slice(0,4),e.slice(4,6),e.slice(6,8),e.slice(8,10),e.slice(10,16)].map((function(e){return S.from(e).toString("hex")})).join("-")}))}var _,O,N,P,I,x,C,k,L,D;!function(e){e.BlockchainRequest="blockchain_request",e.PermissionRequest="permission_request",e.SignPayloadRequest="sign_payload_request",e.OperationRequest="operation_request",e.BroadcastRequest="broadcast_request",e.BlockchainResponse="blockchain_response",e.PermissionResponse="permission_response",e.SignPayloadResponse="sign_payload_response",e.OperationResponse="operation_response",e.BroadcastResponse="broadcast_response",e.Acknowledge="acknowledge",e.Disconnect="disconnect",e.Error="error"}(_||(_={})),function(e){e.SIGN="sign",e.OPERATION_REQUEST="operation_request",e.ENCRYPT="encrypt",e.THRESHOLD="threshold"}(O||(O={})),function(e){e.MAINNET="mainnet",e.GHOSTNET="ghostnet",e.MONDAYNET="mondaynet",e.DAILYNET="dailynet",e.DELPHINET="delphinet",e.EDONET="edonet",e.FLORENCENET="florencenet",e.GRANADANET="granadanet",e.HANGZHOUNET="hangzhounet",e.ITHACANET="ithacanet",e.JAKARTANET="jakartanet",e.KATHMANDUNET="kathmandunet",e.CUSTOM="custom"}(N||(N={})),function(e){e.ENDORSEMENT="endorsement",e.SEED_NONCE_REVELATION="seed_nonce_revelation",e.DOUBLE_ENDORSEMENT_EVIDENCE="double_endorsement_evidence",e.DOUBLE_BAKING_EVIDENCE="double_baking_evidence",e.ACTIVATE_ACCOUNT="activate_account",e.PROPOSALS="proposals",e.BALLOT="ballot",e.REVEAL="reveal",e.TRANSACTION="transaction",e.ORIGINATION="origination",e.DELEGATION="delegation"}(P||(P={})),function(e){e.WEBSITE="website",e.EXTENSION="extension",e.P2P="p2p"}(I||(I={})),function(e){e.BACKGROUND="toBackground",e.PAGE="toPage",e.EXTENSION="toExtension"}(x||(x={})),function(e){e.BROADCAST_ERROR="BROADCAST_ERROR",e.NETWORK_NOT_SUPPORTED="NETWORK_NOT_SUPPORTED",e.NO_ADDRESS_ERROR="NO_ADDRESS_ERROR",e.NO_PRIVATE_KEY_FOUND_ERROR="NO_PRIVATE_KEY_FOUND_ERROR",e.NOT_GRANTED_ERROR="NOT_GRANTED_ERROR",e.PARAMETERS_INVALID_ERROR="PARAMETERS_INVALID_ERROR",e.TOO_MANY_OPERATIONS="TOO_MANY_OPERATIONS",e.TRANSACTION_INVALID_ERROR="TRANSACTION_INVALID_ERROR",e.SIGNATURE_TYPE_NOT_SUPPORTED="SIGNATURE_TYPE_NOT_SUPPORTED",e.ABORTED_ERROR="ABORTED_ERROR",e.UNKNOWN_ERROR="UNKNOWN_ERROR"}(C||(C={})),function(e){e.NOT_CONNECTED="NOT_CONNECTED",e.CONNECTING="CONNECTING",e.CONNECTED="CONNECTED"}(k||(k={})),function(e){e.CHROME_MESSAGE="chrome_message",e.POST_MESSAGE="post_message",e.LEDGER="ledger",e.P2P="p2p"}(L||(L={})),function(e){e.TRANSPORT_P2P_PEERS_DAPP="beacon:communication-peers-dapp",e.TRANSPORT_P2P_PEERS_WALLET="beacon:communication-peers-wallet",e.TRANSPORT_POSTMESSAGE_PEERS_DAPP="beacon:postmessage-peers-dapp",e.TRANSPORT_POSTMESSAGE_PEERS_WALLET="beacon:postmessage-peers-wallet",e.ACCOUNTS="beacon:accounts",e.ACTIVE_ACCOUNT="beacon:active-account",e.BEACON_SDK_SECRET_SEED="beacon:sdk-secret-seed",e.APP_METADATA_LIST="beacon:app-metadata-list",e.PERMISSION_LIST="beacon:permissions",e.BEACON_SDK_VERSION="beacon:sdk_version",e.MATRIX_PRESERVED_STATE="beacon:sdk-matrix-preserved-state",e.MATRIX_PEER_ROOM_IDS="beacon:matrix-peer-rooms",e.MATRIX_SELECTED_NODE="beacon:matrix-selected-node",e.MULTI_NODE_SETUP_DONE="beacon:multi-node-setup"}(D||(D={}));const M={[D.TRANSPORT_P2P_PEERS_DAPP]:[],[D.TRANSPORT_P2P_PEERS_WALLET]:[],[D.TRANSPORT_POSTMESSAGE_PEERS_DAPP]:[],[D.TRANSPORT_POSTMESSAGE_PEERS_WALLET]:[],[D.ACCOUNTS]:[],[D.ACTIVE_ACCOUNT]:void 0,[D.BEACON_SDK_SECRET_SEED]:void 0,[D.APP_METADATA_LIST]:[],[D.PERMISSION_LIST]:[],[D.BEACON_SDK_VERSION]:void 0,[D.MATRIX_PRESERVED_STATE]:{},[D.MATRIX_PEER_ROOM_IDS]:{},[D.MATRIX_SELECTED_NODE]:void 0,[D.MULTI_NODE_SETUP_DONE]:void 0};var U,B;!function(e){e.RAW="raw",e.OPERATION="operation",e.MICHELINE="micheline"}(U||(U={})),function(e){e.LIGHT="light",e.DARK="dark"}(B||(B={}));const K=[e=>{}];let j={postMessage:(e,t)=>{console.log("GOT MOCK POST MESSAGE",e),K.forEach((t=>{t({data:e})}))},addEventListener:(e,t)=>{K.push(t)},removeEventListener:(e,t)=>{K.splice(K.indexOf((e=>e===t)),1)},location:{origin:"*"}};try{"undefined"!=typeof window&&(j=window)}catch(Fl){console.log(`not defined: ${Fl}`)}var H=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(t){s(t)}}function a(e){try{c(r.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};class G{constructor(e){if(this._beaconId=new o,this._keyPair=new o,!e.name)throw new Error("Name not set");if(!e.storage)throw new Error("Storage not set");this.name=e.name,this.iconUrl=e.iconUrl,this.appUrl=e.appUrl,this.storage=e.storage,j.beaconCreatedClientInstance?console.error("[BEACON] It looks like you created multiple Beacon SDK Client instances. This can lead to problems. Only create one instance and re-use it everywhere."):j.beaconCreatedClientInstance=!0,this.initSDK().catch(console.error)}get beaconId(){return this._beaconId.promise}get keyPair(){return this._keyPair.promise}destroy(){return H(this,void 0,void 0,(function*(){yield this.removeBeaconEntriesFromStorage(),j.beaconCreatedClientInstance=!1}))}initSDK(){return H(this,void 0,void 0,(function*(){return this.storage.set(D.BEACON_SDK_VERSION,"3.2.0").catch(console.error),this.loadOrCreateBeaconSecret().catch(console.error),this.keyPair.then((e=>{this._beaconId.resolve(g(e.publicKey))}))}))}removeBeaconEntriesFromStorage(){return H(this,void 0,void 0,(function*(){const e=Object.values(D);yield Promise.all(e.map((e=>this.storage.delete(e))))}))}loadOrCreateBeaconSecret(){return H(this,void 0,void 0,(function*(){const e=yield this.storage.get(D.BEACON_SDK_SECRET_SEED);if(e&&"string"==typeof e)this._keyPair.resolve(yield v(e));else{const e=yield R();yield this.storage.set(D.BEACON_SDK_SECRET_SEED,e),this._keyPair.resolve(yield v(e))}}))}}var V=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(t){s(t)}}function a(e){try{c(r.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};class F{constructor(e,t){this.storage=e,this.storageKey=t}getAll(){return V(this,void 0,void 0,(function*(){return this.storage.get(this.storageKey)}))}getOne(e){return V(this,void 0,void 0,(function*(){return(yield this.storage.get(this.storageKey)).find(e)}))}addOne(e,t,n=!0){return V(this,void 0,void 0,(function*(){const r=yield this.storage.get(this.storageKey);if(r.some(t)){if(n)for(let n=0;n<r.length;n++)t(r[n])&&(r[n]=e)}else r.push(e);return this.storage.set(this.storageKey,r)}))}remove(e){return V(this,void 0,void 0,(function*(){const t=(yield this.storage.get(this.storageKey)).filter((t=>!e(t)));return this.storage.set(this.storageKey,t)}))}removeAll(){return V(this,void 0,void 0,(function*(){return this.storage.delete(this.storageKey)}))}}var q=n(48764).Buffer,Q=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(t){s(t)}}function a(e){try{c(r.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};const W=(e,t)=>Q(void 0,void 0,void 0,(function*(){const n=[e,t.type];t.name&&n.push(`name:${t.name}`),t.rpcUrl&&n.push(`rpc:${t.rpcUrl}`);const r=q.from((0,d.hash)((0,u.cv)(n.join("-")),10));return a.encode(r)}));var Y=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(t){s(t)}}function a(e){try{c(r.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};class z{static hasPermission(e,t,n){return Y(this,void 0,void 0,(function*(){switch(e.type){case _.PermissionRequest:case _.BroadcastRequest:return!0;case _.OperationRequest:{const n=yield W(e.sourceAddress,e.network),r=yield t(n);return!!r&&r.scopes.includes(O.OPERATION_REQUEST)}case _.SignPayloadRequest:{const t=(yield n()).filter((t=>t.address===e.sourceAddress));return 0!==t.length&&t.some((e=>e.scopes.includes(O.SIGN)))}default:throw new Error("Message not handled")}}))}}var Z=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(t){s(t)}}function a(e){try{c(r.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};class J{constructor(e){this.storageManager=new F(e,D.ACCOUNTS)}getAccounts(){return Z(this,void 0,void 0,(function*(){return this.storageManager.getAll()}))}getAccount(e){return Z(this,void 0,void 0,(function*(){return this.storageManager.getOne((t=>t.accountIdentifier===e))}))}addAccount(e){return Z(this,void 0,void 0,(function*(){return this.storageManager.addOne(e,(t=>t.accountIdentifier===e.accountIdentifier))}))}removeAccount(e){return Z(this,void 0,void 0,(function*(){return this.storageManager.remove((t=>t.accountIdentifier===e))}))}removeAccounts(e){return Z(this,void 0,void 0,(function*(){return this.storageManager.remove((t=>e.includes(t.accountIdentifier)))}))}removeAllAccounts(){return Z(this,void 0,void 0,(function*(){return this.storageManager.removeAll()}))}hasPermission(e){return Z(this,void 0,void 0,(function*(){return z.hasPermission(e,this.getAccount.bind(this),this.getAccounts.bind(this))}))}}var X=n(48764).Buffer,$=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(t){s(t)}}function a(e){try{c(r.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};const ee=e=>$(void 0,void 0,void 0,(function*(){const t=X.from((0,d.hash)(X.from(e,"hex"),5));return a.encode(t)}));let te=!!j.beaconSdkDebugEnabled;te&&console.log("[BEACON]: Debug mode is ON (turned on either by the developer or a browser extension)");class ne{constructor(e){this.name=e}debug(e,...t){re.debug(this.name,e,t)}log(e,...t){re.log(this.name,e,t)}warn(e,...t){re.warn(this.name,e,t)}error(e,...t){re.error(this.name,e,t)}}new ne("");let re=new class{constructor(){}debug(e,t,...n){this._log("debug",e,t,n)}log(e,t,...n){this._log("log",e,t,n)}warn(e,t,...n){this._log("warn",e,t,n)}error(e,t,...n){this._log("error",e,t,n)}_log(e,t,n,r=[]){if(!te)return;let i=`[BEACON] ${(new Date).toISOString()} [${t}](${n})`,s=r;switch(r[0]&&"string"==typeof r[0]&&(i+=` ${r[0]}`,s=r.slice(1)),e){case"error":console.group(i),console.error(...s);break;case"warn":console.group(i),console.warn(...s);break;case"debug":console.groupCollapsed(i),console.debug(...s);break;default:console.group(i),console.log(...s)}console.groupEnd()}};var ie=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(t){s(t)}}function a(e){try{c(r.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};const se=new ne("Client");class oe extends G{constructor(e){var t;super(e),this.rateLimit=2,this.rateLimitWindowInSeconds=5,this.requestCounter=[],this._transport=new o,this.accountManager=new J(e.storage),this.matrixNodes=null!==(t=e.matrixNodes)&&void 0!==t?t:[],this.handleResponse=(e,t)=>{throw new Error(`not overwritten${JSON.stringify(e)} - ${JSON.stringify(t)}`)}}get transport(){return this._transport.promise}get connectionStatus(){var e,t;return null!==(t=null===(e=this._transport.promiseResult)||void 0===e?void 0:e.connectionStatus)&&void 0!==t?t:k.NOT_CONNECTED}get ready(){return this.transport.then((()=>{}))}getAccounts(){return ie(this,void 0,void 0,(function*(){return this.accountManager.getAccounts()}))}getAccount(e){return ie(this,void 0,void 0,(function*(){return this.accountManager.getAccount(e)}))}removeAccount(e){return ie(this,void 0,void 0,(function*(){return this.accountManager.removeAccount(e)}))}removeAllAccounts(){return ie(this,void 0,void 0,(function*(){return this.accountManager.removeAllAccounts()}))}addRequestAndCheckIfRateLimited(){return ie(this,void 0,void 0,(function*(){const e=(new Date).getTime();return this.requestCounter=this.requestCounter.filter((t=>t+1e3*this.rateLimitWindowInSeconds>e)),this.requestCounter.push(e),this.requestCounter.length>this.rateLimit}))}init(e){return ie(this,void 0,void 0,(function*(){return this._transport.status===i.RESOLVED?(yield this.transport).type:(yield this.setTransport(e),e.type)}))}getOwnAppMetadata(){return ie(this,void 0,void 0,(function*(){return{senderId:yield ee(yield this.beaconId),name:this.name,icon:this.iconUrl}}))}getPeers(){return ie(this,void 0,void 0,(function*(){return(yield this.transport).getPeers()}))}addPeer(e){return ie(this,void 0,void 0,(function*(){return(yield this.transport).addPeer(e)}))}destroy(){const e=Object.create(null,{destroy:{get:()=>super.destroy}});return ie(this,void 0,void 0,(function*(){this._transport.status===i.RESOLVED&&(yield(yield this.transport).disconnect()),yield e.destroy.call(this)}))}setTransport(e){return ie(this,void 0,void 0,(function*(){e?this._transport.isSettled()?this._transport=o.resolve(e):this._transport.resolve(e):this._transport.isSettled()&&(this._transport=new o)}))}addListener(e){return ie(this,void 0,void 0,(function*(){e.addListener(((e,t)=>ie(this,void 0,void 0,(function*(){if("string"==typeof e){const n=yield(new we).deserialize(e);this.handleResponse(n,t)}})))).catch((e=>se.error("addListener",e)))}))}sendDisconnectToPeer(e,t){return ie(this,void 0,void 0,(function*(){const n={id:yield R(),version:e.version,senderId:yield ee(yield this.beaconId),type:_.Disconnect},r=yield(new we).serialize(n),i=null!=t?t:yield this.transport;yield i.send(r,e)}))}}class ae{constructor(e,t){this.name="BeaconError",this.title="Error",this.message=`[${e}]:${t}`,this.description=t}get fullDescription(){return{description:this.description}}static getError(e,t){switch(e){case C.BROADCAST_ERROR:return new ce;case C.NETWORK_NOT_SUPPORTED:return new le;case C.NO_ADDRESS_ERROR:return new ue;case C.NO_PRIVATE_KEY_FOUND_ERROR:return new de;case C.NOT_GRANTED_ERROR:return new he;case C.PARAMETERS_INVALID_ERROR:return new pe;case C.TOO_MANY_OPERATIONS:return new fe;case C.TRANSACTION_INVALID_ERROR:return new me(t);case C.SIGNATURE_TYPE_NOT_SUPPORTED:return new Ue;case C.ABORTED_ERROR:return new Oe;case C.UNKNOWN_ERROR:return new ge}}}class ce extends ae{constructor(){super(C.BROADCAST_ERROR,"The transaction could not be broadcast to the network. Please try again."),this.name="BroadcastBeaconError",this.title="Broadcast Error"}}class le extends ae{constructor(){super(C.NETWORK_NOT_SUPPORTED,"The wallet does not support this network. Please select another one."),this.name="NetworkNotSupportedBeaconError",this.title="Network Error"}}class ue extends ae{constructor(){super(C.NO_ADDRESS_ERROR,"The wallet does not have an account set up. Please make sure to set up your wallet and try again."),this.name="NoAddressBeaconError",this.title="No Address"}}class de extends ae{constructor(){super(C.NO_PRIVATE_KEY_FOUND_ERROR,"The account you are trying to interact with is not available. Please make sure to add the account to your wallet and try again."),this.name="NoPrivateKeyBeaconError",this.title="Account Not Found"}}class he extends ae{constructor(){super(C.NOT_GRANTED_ERROR,"You do not have the necessary permissions to perform this action. Please initiate another permission request and give the necessary permissions."),this.name="NotGrantedBeaconError",this.title="Permission Not Granted"}}class pe extends ae{constructor(){super(C.PARAMETERS_INVALID_ERROR,"Some of the parameters you provided are invalid and the request could not be completed. Please check your inputs and try again."),this.name="ParametersInvalidBeaconError",this.title="Parameters Invalid"}}class fe extends ae{constructor(){super(C.TOO_MANY_OPERATIONS,"The request contains too many transactions. Please include fewer operations and try again."),this.name="TooManyOperationsBeaconError",this.title="Too Many Operations"}}class me extends ae{constructor(e){super(C.TRANSACTION_INVALID_ERROR,"The transaction is invalid and the node did not accept it."),this.data=e,this.name="TransactionInvalidBeaconError",this.title="Transaction Invalid",this.data=e}get fullDescription(){return{description:this.description,data:JSON.stringify(this.data,void 0,2)}}}class ge extends ae{constructor(){super(C.UNKNOWN_ERROR,"An unknown error occured. Please try again or report it to a developer."),this.name="UnknownBeaconError",this.title="Error"}}var Ee=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(t){s(t)}}function a(e){try{c(r.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};const ve=new ne("Transport");class ye{constructor(e,t,n){this.type=L.POST_MESSAGE,this._isConnected=k.NOT_CONNECTED,this.listeners=[],this.name=e,this.client=t,this.peerManager=n}get connectionStatus(){return this._isConnected}static isAvailable(){return Ee(this,void 0,void 0,(function*(){return Promise.resolve(!1)}))}connect(){return Ee(this,void 0,void 0,(function*(){ve.log("connect"),this._isConnected=k.CONNECTED}))}disconnect(){return Ee(this,void 0,void 0,(function*(){ve.log("disconnect"),this._isConnected=k.NOT_CONNECTED}))}send(e,t){return Ee(this,void 0,void 0,(function*(){if(t)return this.client.sendMessage(e,t);{const t=(yield this.getPeers()).map((t=>this.client.sendMessage(e,t)));return(yield Promise.all(t))[0]}}))}addListener(e){return Ee(this,void 0,void 0,(function*(){ve.debug("addListener"),this.listeners.push(e)}))}removeListener(e){return Ee(this,void 0,void 0,(function*(){ve.log("removeListener"),this.listeners=this.listeners.filter((t=>t!==e))}))}getPeers(){return Ee(this,void 0,void 0,(function*(){return this.peerManager.getPeers()}))}addPeer(e,t=!0){return Ee(this,void 0,void 0,(function*(){ve.log("addPeer","adding peer",e),yield this.peerManager.addPeer(e),yield this.listen(e.publicKey)}))}removePeer(e){return Ee(this,void 0,void 0,(function*(){ve.log("removePeer","removing peer",e),yield this.peerManager.removePeer(e.publicKey),this.client&&(yield this.client.unsubscribeFromEncryptedMessage(e.publicKey))}))}removeAllPeers(){return Ee(this,void 0,void 0,(function*(){ve.log("removeAllPeers"),yield this.peerManager.removeAllPeers(),this.client&&(yield this.client.unsubscribeFromEncryptedMessages())}))}notifyListeners(e,t){return Ee(this,void 0,void 0,(function*(){0===this.listeners.length?ve.warn("notifyListeners","0 listeners notified!",this):ve.log("notifyListeners",`Notifying ${this.listeners.length} listeners`,this),this.listeners.forEach((n=>{n(e,t)}))}))}}var Ae=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(t){s(t)}}function a(e){try{c(r.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};class Te{constructor(e){this.prefix=e}static isSupported(){return Ae(this,void 0,void 0,(function*(){return Promise.resolve(Boolean("undefined"!=typeof window)&&Boolean(window.localStorage))}))}get(e){return Ae(this,void 0,void 0,(function*(){const t=localStorage.getItem(this.getPrefixedKey(e));if(!t)return"object"==typeof M[e]?JSON.parse(JSON.stringify(M[e])):M[e];try{return JSON.parse(t)}catch(n){return t}}))}set(e,t){return Ae(this,void 0,void 0,(function*(){return"string"==typeof t?localStorage.setItem(this.getPrefixedKey(e),t):localStorage.setItem(this.getPrefixedKey(e),JSON.stringify(t))}))}delete(e){return Ae(this,void 0,void 0,(function*(){return Promise.resolve(localStorage.removeItem(this.getPrefixedKey(e)))}))}getPrefixedKey(e){return this.prefix?`${this.prefix}-${e}`:e}}new ne("STORAGE");var be=n(48764).Buffer,Se=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(t){s(t)}}function a(e){try{c(r.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};class we{serialize(e){return Se(this,void 0,void 0,(function*(){const t=JSON.stringify(e);return a.encode(be.from(t))}))}deserialize(e){return Se(this,void 0,void 0,(function*(){if("string"!=typeof e)throw new Error("Encoded payload needs to be a string");return JSON.parse(a.decode(e).toString())}))}}var Re=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(t){s(t)}}function a(e){try{c(r.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};class _e{constructor(e){this.storageManager=new F(e,D.APP_METADATA_LIST)}getAppMetadataList(){return Re(this,void 0,void 0,(function*(){return this.storageManager.getAll()}))}getAppMetadata(e){return Re(this,void 0,void 0,(function*(){return this.storageManager.getOne((t=>t.senderId===e))}))}addAppMetadata(e){return Re(this,void 0,void 0,(function*(){return this.storageManager.addOne(e,(t=>t.senderId===e.senderId))}))}removeAppMetadata(e){return Re(this,void 0,void 0,(function*(){return this.storageManager.remove((t=>t.senderId===e))}))}removeAppMetadatas(e){return Re(this,void 0,void 0,(function*(){return this.storageManager.remove((t=>e.includes(t.senderId)))}))}removeAllAppMetadata(){return Re(this,void 0,void 0,(function*(){return this.storageManager.removeAll()}))}}class Oe extends ae{constructor(){super(C.ABORTED_ERROR,"The action was aborted by the user."),this.name="UnknownBeaconError",this.title="Aborted"}}var Ne=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(t){s(t)}}function a(e){try{c(r.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};class Pe{constructor(e,t){this.storageManager=new F(e,t)}hasPeer(e){return Ne(this,void 0,void 0,(function*(){return!!(yield this.getPeer(e))}))}getPeers(){return Ne(this,void 0,void 0,(function*(){return this.storageManager.getAll()}))}getPeer(e){return Ne(this,void 0,void 0,(function*(){return this.storageManager.getOne((t=>t.publicKey===e))}))}addPeer(e){return Ne(this,void 0,void 0,(function*(){return this.storageManager.addOne(e,(t=>t.publicKey===e.publicKey))}))}removePeer(e){return Ne(this,void 0,void 0,(function*(){return this.storageManager.remove((t=>t.publicKey===e))}))}removePeers(e){return Ne(this,void 0,void 0,(function*(){return this.storageManager.remove((t=>e.includes(t.publicKey)))}))}removeAllPeers(){return Ne(this,void 0,void 0,(function*(){return this.storageManager.removeAll()}))}}var Ie=n(84826),xe=n(48764).Buffer,Ce=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(t){s(t)}}function a(e){try{c(r.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};class ke{constructor(e){this.keyPair=e}getPublicKey(){return Ce(this,void 0,void 0,(function*(){return g(this.keyPair.publicKey)}))}getPublicKeyHash(){return Ce(this,void 0,void 0,(function*(){return E(this.keyPair.publicKey)}))}createCryptoBoxServer(e,t){return Ce(this,void 0,void 0,(function*(){return(0,Ie.serverSessionKeys)({publicKey:(0,h.SH)(t.publicKey),secretKey:(0,h.zh)(t.secretKey)},(0,h.SH)(xe.from(e,"hex")))}))}createCryptoBoxClient(e,t){return Ce(this,void 0,void 0,(function*(){return(0,Ie.clientSessionKeys)({publicKey:(0,h.SH)(t.publicKey),secretKey:(0,h.zh)(t.secretKey)},(0,h.SH)(xe.from(e,"hex")))}))}encryptMessageAsymmetric(e,t){return Ce(this,void 0,void 0,(function*(){return function(e,t){return m(this,void 0,void 0,(function*(){const n=(0,h.SH)(f.from(t)),r=(0,c.generateKeyPair)(),i=new d.BLAKE2b(24).update(r.publicKey,32).update(n,32).digest(),s="string"==typeof e?(0,u.cv)(e):e,o=(0,c.box)(n,r.secretKey,i,s);return g((0,p.z)(r.publicKey,o))}))}(t,xe.from(e,"hex"))}))}}var Le=n(48764).Buffer,De=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(t){s(t)}}function a(e){try{c(r.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};class Me extends ke{constructor(e,t){super(t),this.name=e,this.init().catch(console.error)}start(){return De(this,void 0,void 0,(function*(){yield Promise.resolve()}))}getPairingRequestInfo(){return De(this,void 0,void 0,(function*(){return{id:yield R(),type:"postmessage-pairing-request",name:this.name,version:"3",publicKey:yield this.getPublicKey()}}))}getPairingResponseInfo(e){return De(this,void 0,void 0,(function*(){return{id:e.id,type:"postmessage-pairing-response",name:this.name,version:e.version,publicKey:yield this.getPublicKey()}}))}unsubscribeFromEncryptedMessage(e){return De(this,void 0,void 0,(function*(){this.activeListeners.get(e)&&this.activeListeners.delete(e)}))}unsubscribeFromEncryptedMessages(){return De(this,void 0,void 0,(function*(){this.activeListeners.clear()}))}decryptMessage(e,t){return De(this,void 0,void 0,(function*(){const n=yield this.createCryptoBoxServer(e,this.keyPair),r=Le.from(t,"hex");if(r.length>=40)try{return yield A(r,n.receive)}catch(i){}throw new Error("Could not decrypt message")}))}encryptMessage(e,t){return De(this,void 0,void 0,(function*(){const n=yield this.createCryptoBoxClient(e,this.keyPair);return y(t,n.send)}))}}class Ue extends ae{constructor(){super(C.SIGNATURE_TYPE_NOT_SUPPORTED,"The wallet is not able to sign payloads of this type."),this.name="SignatureTypeNotSupportedBeaconError",this.title="Signature Type Not Supported"}}var Be,Ke=n(33890),je=n.n(Ke);!function(e){e.TEXT="m.text"}(Be||(Be={}));class He{constructor(e,t,n,r){this.type=e,this.sender=t,this.content=n,this.timestamp=r}static from(e){if(Ve(e))return new He(e.content.msgtype,e.sender,e.content.body,e.origin_server_ts)}}const Ge=e=>"m.room.message"===e.type,Ve=e=>Ge(e)&&e.content instanceof Object&&"msgtype"in e.content&&e.content.msgtype===Be.TEXT;var Fe;!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.JOINED=1]="JOINED",e[e.INVITED=2]="INVITED",e[e.LEFT=3]="LEFT"}(Fe||(Fe={}));class qe{constructor(e,t=Fe.UNKNOWN,n=[],r=[]){this.id=e,this.status=t,this.members=n,this.messages=r}static fromSync(e){var t,n,r;if(!e)return[];function i(e,t){return Object.entries(e).map((([e,n])=>t(e,n)))}return[...i(null!==(t=e.join)&&void 0!==t?t:{},qe.fromJoined),...i(null!==(n=e.invite)&&void 0!==n?n:{},qe.fromInvited),...i(null!==(r=e.leave)&&void 0!==r?r:{},qe.fromLeft)]}static from(e,t){return"string"==typeof e?new qe(e,t||Fe.UNKNOWN):void 0!==t?new qe(e.id,t,e.members,e.messages):e}static merge(e,t){return t&&t.id===e.id?new qe(e.id,e.status,[...t.members,...e.members].filter(((e,t,n)=>n.indexOf(e)===t)),[...t.messages,...e.messages]):qe.from(e)}static fromJoined(e,t){const n=[...t.state.events,...t.timeline.events],r=qe.getMembersFromEvents(n),i=qe.getMessagesFromEvents(n);return new qe(e,Fe.JOINED,r,i)}static fromInvited(e,t){const n=qe.getMembersFromEvents(t.invite_state.events);return new qe(e,Fe.INVITED,n)}static fromLeft(e,t){const n=[...t.state.events,...t.timeline.events],r=qe.getMembersFromEvents(n),i=qe.getMessagesFromEvents(n);return new qe(e,Fe.LEFT,r,i)}static getMembersFromEvents(e){return qe.getUniqueEvents(e.filter((e=>(e=>"m.room.create"===e.type&&e.content instanceof Object&&"creator"in e.content)(e)||(e=>"m.room.member"===e.type&&e.content instanceof Object&&"membership"in e.content&&"join"===e.content.membership)(e)))).map((e=>e.sender)).filter(((e,t,n)=>n.indexOf(e)===t))}static getMessagesFromEvents(e){return qe.getUniqueEvents(e.filter(Ge)).map((e=>He.from(e))).filter(Boolean)}static getUniqueEvents(e){const t={},n=[];return e.forEach(((e,r)=>{const i=e.event_id;void 0!==i&&i in t||(void 0!==i&&(t[i]=r),n.push(e))})),n}}var Qe=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(t){s(t)}}function a(e){try{c(r.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};const We=["syncToken","rooms"];class Ye{constructor(e){this.storage=e,this.state={isRunning:!1,userId:void 0,deviceId:void 0,txnNo:0,accessToken:void 0,syncToken:void 0,pollingTimeout:void 0,pollingRetries:0,rooms:{}},this.onStateChangedListeners=new Map,this.waitReadyPromise=new Promise(((e,t)=>Qe(this,void 0,void 0,(function*(){try{yield this.initFromStorage(),e()}catch(n){t(n)}}))))}get(e){return this.state[e]}getRoom(e){const t=qe.from(e,Fe.UNKNOWN);return this.state.rooms[t.id]||t}update(e){return Qe(this,void 0,void 0,(function*(){yield this.waitReady();const t=Object.assign({},this.state);this.setState(e),this.updateStorage(e),this.notifyListeners(t,this.state,e)}))}onStateChanged(e,...t){t.length>0?t.forEach((t=>{this.onStateChangedListeners.set(t,e)})):this.onStateChangedListeners.set("all",e)}waitReady(){return Qe(this,void 0,void 0,(function*(){return this.waitReadyPromise}))}initFromStorage(){return Qe(this,void 0,void 0,(function*(){const e=yield this.storage.get(D.MATRIX_PRESERVED_STATE);this.setState(e)}))}prepareData(e){const t=["rooms"].some((t=>void 0!==e[t]))?JSON.parse(JSON.stringify(e)):e;return Object.values(t.rooms||{}).forEach((e=>{e.messages=[]})),t}updateStorage(e){if(Object.entries(e).filter((([e,t])=>We.includes(e)&&Boolean(t))).length>0){const e={};We.forEach((t=>{e[t]=this.state[t]})),this.storage.set(D.MATRIX_PRESERVED_STATE,this.prepareData(e))}}setState(e){this.state={isRunning:e.isRunning||this.state.isRunning,userId:e.userId||this.state.userId,deviceId:e.deviceId||this.state.deviceId,txnNo:e.txnNo||this.state.txnNo,accessToken:e.accessToken||this.state.accessToken,syncToken:e.syncToken||this.state.syncToken,pollingTimeout:e.pollingTimeout||this.state.pollingTimeout,pollingRetries:e.pollingRetries||this.state.pollingRetries,rooms:this.mergeRooms(this.state.rooms,e.rooms)}}mergeRooms(e,t){if(!t)return e;const n=Array.isArray(t)?t:Object.values(t),r=Object.assign({},e);return n.forEach((t=>{r[t.id]=qe.merge(t,e[t.id])})),r}notifyListeners(e,t,n){const i=this.onStateChangedListeners.get("all");i&&i(e,t,n),r(n).filter((e=>void 0!==n[e])).forEach((r=>{const i=this.onStateChangedListeners.get(r);i&&i(e,t,n)}))}}var ze=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(t){s(t)}}function a(e){try{c(r.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};const Ze=new ne("MatrixHttpClient");class Je{constructor(e){this.baseUrl=e,this.cancelTokenSource=je().CancelToken.source()}get(e,t,n){return ze(this,void 0,void 0,(function*(){return this.send("GET",e,n,t)}))}post(e,t,n,r){return ze(this,void 0,void 0,(function*(){return this.send("POST",e,n,r,t)}))}put(e,t,n,r){return ze(this,void 0,void 0,(function*(){return this.send("PUT",e,n,r,t)}))}cancelAllRequests(){return ze(this,void 0,void 0,(function*(){return this.cancelTokenSource.cancel("Manually cancelled")}))}send(e,t,n,r,i){return ze(this,void 0,void 0,(function*(){const s=n?this.getHeaders(n):void 0,o=r?this.getParams(r):void 0;let a;try{a=yield je().request({method:e,url:t,baseURL:this.apiUrl("/_matrix/client/r0"),headers:s,data:i,params:o,cancelToken:this.cancelTokenSource.token})}catch(c){const e=c;throw Ze.error("send",e.code,e.message,e.response.data),c.response.data}return a.data}))}getHeaders(e){const t={},n=[];if(e.accessToken&&n.push(["Authorization",`Bearer ${e.accessToken}`]),0!==n.length){for(const[e,r]of n)t[e]=r;return t}}getParams(e){if(!e)return;const t=Object.assign(e,{});return r(t).forEach((e=>void 0===t[e]&&delete t[e])),t}apiUrl(...e){return[this.baseUrl.endsWith("/")?this.baseUrl.substr(0,this.baseUrl.length-1):this.baseUrl,...e.map((e=>e.startsWith("/")?e.substr(1):e))].join("/")}}var Xe=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(t){s(t)}}function a(e){try{c(r.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};class $e{constructor(e){this.httpClient=e}createRoom(e,t={}){return Xe(this,void 0,void 0,(function*(){return this.httpClient.post("/createRoom",t,{accessToken:e})}))}inviteToRoom(e,t,n){return Xe(this,void 0,void 0,(function*(){return n.status!==Fe.JOINED&&n.status!==Fe.UNKNOWN?Promise.reject(`User is not a member of room ${n.id}.`):this.httpClient.post(`/rooms/${encodeURIComponent(n.id)}/invite`,{user_id:t},{accessToken:e})}))}joinRoom(e,t){return Xe(this,void 0,void 0,(function*(){return t.status===Fe.JOINED?Promise.resolve({room_id:t.id}):this.httpClient.post(`/rooms/${encodeURIComponent(t.id)}/join`,{},{accessToken:e})}))}getJoinedRooms(e){return Xe(this,void 0,void 0,(function*(){return this.httpClient.get("/joined_rooms",void 0,{accessToken:e})}))}}var et=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(t){s(t)}}function a(e){try{c(r.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};class tt{constructor(e){this.httpClient=e}login(e,t,n){return et(this,void 0,void 0,(function*(){return this.httpClient.post("/login",{type:"m.login.password",identifier:{type:"m.id.user",user:e},password:t,device_id:n})}))}}var nt,rt=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(t){s(t)}}function a(e){try{c(r.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};class it{constructor(e){this.httpClient=e,this.cachedPromises=new Map}sync(e,t){return rt(this,void 0,void 0,(function*(){return this.withCache("sync",(()=>this.httpClient.get("/sync",{timeout:t?t.pollingTimeout:void 0,since:t?t.syncToken:void 0},{accessToken:e})))}))}sendMessage(e,t,n,r){return rt(this,void 0,void 0,(function*(){return new Promise(((i,s)=>this.scheduleEvent({accessToken:e,roomId:t,type:"m.room.message",content:n,txnId:r,onSuccess:i,onError:s})))}))}scheduleEvent(e){this.sendEvent(e)}sendEvent(e){return rt(this,void 0,void 0,(function*(){const{roomId:t,type:n,txnId:r,content:i,accessToken:s}=e;try{const o=yield this.httpClient.put(`/rooms/${encodeURIComponent(t)}/send/${n}/${encodeURIComponent(r)}`,i,{accessToken:s});e.onSuccess(o)}catch(o){e.onError(o)}}))}withCache(e,t){let n=this.cachedPromises.get(e);return n||(n=t().finally((()=>{this.cachedPromises.delete(e)})),this.cachedPromises.set(e,n)),n}}class st{constructor(){this.events={}}on(e,t){return"object"!=typeof this.events[e]&&(this.events[e]=[]),this.events[e].push(t),()=>this.removeListener(e,t)}removeListener(e,t){if("object"!=typeof this.events[e])return;if(!t)return void(this.events[e]=[]);const n=this.events[e].indexOf(t);n>-1&&this.events[e].splice(n,1)}removeAllListeners(){Object.keys(this.events).forEach((e=>this.events[e].splice(0,this.events[e].length)))}emit(e,...t){"object"==typeof this.events[e]&&[...this.events[e]].forEach((e=>e.apply(this,t)))}once(e,t){const n=this.on(e,((...e)=>{n(),t.apply(this,e)}));return n}}!function(e){e.INVITE="invite",e.MESSAGE="message"}(nt||(nt={}));class ot extends st{constructor(){super(...arguments),this.eventEmitProviders=new Map([[nt.INVITE,()=>[this.isInvite,this.emitInvite.bind(this)]],[nt.MESSAGE,()=>[this.isMessage,this.emitMessage.bind(this)]]])}onStateChanged(e,t,n){for(const i of r(nt))this.emitIfEvent(nt[i],n)}emitIfEvent(e,t){const n=this.eventEmitProviders.get(e);if(n){const[r,i]=n();r(t)&&i(e,t)}}emitClientEvent(e,t,n){this.emit(e,{type:e,content:t,timestamp:n})}isInvite(e){return!!e.rooms&&e.rooms.some((e=>e.status===Fe.INVITED))}emitInvite(e,t){t.rooms.filter((e=>e.status===Fe.INVITED)).map((e=>[e.id,e.members])).forEach((([t,n])=>{this.emitClientEvent(e,{roomId:t,members:n})}))}isMessage(e){return!!e.rooms&&e.rooms.some((e=>e.messages.length>0))}emitMessage(e,t){t.rooms.filter((e=>e.messages.length>0)).map((e=>e.messages.map((t=>[e.id,t,t.timestamp])))).reduce(((e,t)=>e.concat(t)),[]).forEach((([t,n,r])=>{this.emitClientEvent(e,{roomId:t,message:n},r)}))}}var at=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(t){s(t)}}function a(e){try{c(r.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};const ct=new ne("MatrixClient");class lt{constructor(e,t,n,r,i,s){this.store=e,this.eventEmitter=t,this.userService=n,this.roomService=r,this.eventService=i,this.httpClient=s,this.isActive=!0,this._isReady=new o,this.store.onStateChanged(((e,t,n)=>{this.eventEmitter.onStateChanged(e,t,n)}),"rooms")}static create(e){const t=new Ye(e.storage),n=new ot,r=new Je(e.baseUrl),i=new tt(r),s=new $e(r),o=new it(r);return new lt(t,n,i,s,o,r)}get joinedRooms(){return new Promise((e=>at(this,void 0,void 0,(function*(){yield this.isConnected(),e(Object.values(this.store.get("rooms")).filter((e=>e.status===Fe.JOINED)))}))))}get invitedRooms(){return new Promise((e=>at(this,void 0,void 0,(function*(){yield this.isConnected(),e(Object.values(this.store.get("rooms")).filter((e=>e.status===Fe.INVITED)))}))))}get leftRooms(){return new Promise((e=>at(this,void 0,void 0,(function*(){yield this.isConnected(),e(Object.values(this.store.get("rooms")).filter((e=>e.status===Fe.LEFT)))}))))}start(e){return at(this,void 0,void 0,(function*(){const t=yield this.userService.login(e.id,e.password,e.deviceId);yield this.store.update({accessToken:t.access_token});const n=new Promise(((e,t)=>at(this,void 0,void 0,(function*(){yield this.poll(0,(t=>at(this,void 0,void 0,(function*(){this.store.get("isRunning")||e(),yield this.store.update({isRunning:!0,syncToken:t.next_batch,pollingTimeout:3e4,pollingRetries:0,rooms:qe.fromSync(t.rooms)})}))),(e=>at(this,void 0,void 0,(function*(){this.store.get("isRunning")||t(e),yield this.store.update({isRunning:!1,pollingRetries:this.store.get("pollingRetries")+1})}))))}))));return n.then((()=>{this._isReady.resolve()})).catch(console.error),n}))}isConnected(){return at(this,void 0,void 0,(function*(){return this._isReady.promise}))}stop(){return at(this,void 0,void 0,(function*(){return ct.log("MATRIX CLIENT STOPPED"),this.isActive=!1,this._isReady=new o,this.httpClient.cancelAllRequests()}))}subscribe(e,t){this.eventEmitter.on(e,t)}unsubscribe(e,t){t&&this.eventEmitter.removeListener(e,t)}unsubscribeAll(e){this.eventEmitter.removeListener(e)}getRoomById(e){return at(this,void 0,void 0,(function*(){return yield this.isConnected(),this.store.getRoom(e)}))}createTrustedPrivateRoom(...e){return at(this,void 0,void 0,(function*(){return yield this.isConnected(),this.requiresAuthorization("createRoom",(t=>at(this,void 0,void 0,(function*(){return(yield this.roomService.createRoom(t,{room_version:"5",invite:e,preset:"public_chat",is_direct:!0})).room_id}))))}))}inviteToRooms(e,...t){return at(this,void 0,void 0,(function*(){yield this.isConnected(),yield this.requiresAuthorization("invite",(n=>Promise.all(t.map((t=>{const r=this.store.getRoom(t);this.roomService.inviteToRoom(n,e,r).catch((e=>ct.warn("inviteToRooms",e)))})))))}))}joinRooms(...e){return at(this,void 0,void 0,(function*(){yield this.isConnected(),yield this.requiresAuthorization("join",(t=>Promise.all(e.map((e=>{const n=this.store.getRoom(e);return this.roomService.joinRoom(t,n)})))))}))}sendTextMessage(e,t){return at(this,void 0,void 0,(function*(){yield this.isConnected(),yield this.requiresAuthorization("send",(n=>at(this,void 0,void 0,(function*(){const r=yield this.createTxnId();return this.eventService.sendMessage(n,e,{msgtype:"m.text",body:t},r)}))))}))}poll(e,t,n){return at(this,void 0,void 0,(function*(){const r=this.store,i=this.sync.bind(this),s=(o,a)=>at(this,void 0,void 0,(function*(){let c=0;try{const n=yield i();t(n)}catch(l){n(l),c=r.get("pollingRetries"),this.isActive&&ct.log(`Retry syncing... ${c} retries so far`)}finally{this.isActive?setTimeout((()=>at(this,void 0,void 0,(function*(){yield s(o,a)}))),c>3?5e3+e:e):a(new Error("Syncing stopped manually."))}}));return new Promise(s)}))}sync(){return at(this,void 0,void 0,(function*(){return this.requiresAuthorization("sync",(e=>at(this,void 0,void 0,(function*(){return this.eventService.sync(e,{pollingTimeout:this.store.get("pollingTimeout"),syncToken:this.store.get("syncToken")})}))))}))}requiresAuthorization(e,t){return at(this,void 0,void 0,(function*(){const n=this.store.get("accessToken");return n?t(n):Promise.reject(`${e} requires authorization but no access token has been provided.`)}))}createTxnId(){return at(this,void 0,void 0,(function*(){const e=(new Date).getTime(),t=this.store.get("txnNo");return yield this.store.update({txnNo:t+1}),`m${e}.${t}`}))}}var ut=n(48764).Buffer,dt=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(t){s(t)}}function a(e){try{c(r.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};const ht=new ne("P2PCommunicationClient"),pt=["beacon-node-1.diamond.papers.tech","beacon-node-1.sky.papers.tech","beacon-node-2.sky.papers.tech","beacon-node-1.hope.papers.tech","beacon-node-1.hope-2.papers.tech","beacon-node-1.hope-3.papers.tech","beacon-node-1.hope-4.papers.tech","beacon-node-1.hope-5.papers.tech"];class ft extends ke{constructor(e,t,n,r,i,s,a){super(t),this.name=e,this.replicationCount=n,this.storage=r,this.iconUrl=s,this.appUrl=a,this.client=new o,this.activeListeners=new Map,this.ignoredRooms=[],this.loginCounter=0,ht.log("constructor","P2PCommunicationClient created");const c=i.length>0?i:pt;this.ENABLED_RELAY_SERVERS=c}getPairingRequestInfo(){return dt(this,void 0,void 0,(function*(){const e={id:yield R(),type:"p2p-pairing-request",name:this.name,version:"3",publicKey:yield this.getPublicKey(),relayServer:yield this.getRelayServer()};return this.iconUrl&&(e.icon=this.iconUrl),this.appUrl&&(e.appUrl=this.appUrl),e}))}getPairingResponseInfo(e){return dt(this,void 0,void 0,(function*(){const t={id:e.id,type:"p2p-pairing-response",name:this.name,version:e.version,publicKey:yield this.getPublicKey(),relayServer:yield this.getRelayServer()};return this.iconUrl&&(t.icon=this.iconUrl),this.appUrl&&(t.appUrl=this.appUrl),t}))}getRelayServer(){return dt(this,void 0,void 0,(function*(){if(this.relayServer)return this.relayServer.promise;this.relayServer=new o;const e=yield this.storage.get(D.MATRIX_SELECTED_NODE);if(e&&e.length>0)return this.relayServer.resolve(e),e;const t=[...this.ENABLED_RELAY_SERVERS];for(;t.length>0;){const e=Math.floor(Math.random()*t.length),r=t[e];try{return yield je().get(`https://${r}/_matrix/client/versions`),this.storage.set(D.MATRIX_SELECTED_NODE,r).catch((e=>ht.log(e))),this.relayServer.resolve(r),r}catch(n){ht.log(`Ignoring server "${r}", trying another one...`),t.splice(e,1)}}throw this.relayServer.reject("No matrix server reachable!"),new Error("No matrix server reachable!")}))}tryJoinRooms(e,t=1){return dt(this,void 0,void 0,(function*(){try{yield(yield this.client.promise).joinRooms(e)}catch(n){t<=10&&"M_FORBIDDEN"===n.errcode?(ht.log("Retrying to join...",n),setTimeout((()=>dt(this,void 0,void 0,(function*(){yield this.tryJoinRooms(e,t+1)}))),200)):ht.log(`Failed to join after ${t} tries.`,n)}}))}start(){var e;return dt(this,void 0,void 0,(function*(){ht.log("start","starting client"),ht.log("start","connecting to server");const t=yield this.getRelayServer(),n=lt.create({baseUrl:`https://${t}`,storage:this.storage});this.initialListener=e=>dt(this,void 0,void 0,(function*(){this.initialEvent&&this.initialEvent.timestamp&&e&&e.timestamp?this.initialEvent.timestamp<e.timestamp&&(this.initialEvent=e):this.initialEvent=e})),n.subscribe(nt.MESSAGE,this.initialListener),n.subscribe(nt.INVITE,(e=>dt(this,void 0,void 0,(function*(){let t;1===e.content.members.length&&(t=e.content.members[0]),yield this.tryJoinRooms(e.content.roomId),t&&(yield this.updateRelayServer(t),yield this.updatePeerRoom(t,e.content.roomId))}))));const r=`login:${Math.floor(Date.now()/1e3/300)}`;ht.log("start",`login ${r}, ${yield this.getPublicKeyHash()} on ${t}`);const i=(0,d.hash)((0,u.cv)(r),32),s=null!==(e=this.keyPair.secretKey)&&void 0!==e?e:this.keyPair.privateKey,o=(0,h.Xx)(s,i);try{yield n.start({id:yield this.getPublicKeyHash(),password:`ed:${g(o)}:${yield this.getPublicKey()}`,deviceId:g(this.keyPair.publicKey)})}catch(a){if(ht.error("start","Could not log in, retrying"),yield this.reset(),this.loginCounter<=this.ENABLED_RELAY_SERVERS.length)return this.loginCounter++,void this.start();throw ht.error("start","Tried to log in to every known beacon node, but no login was successful."),new Error("Could not connect to any beacon nodes. Try again later.")}ht.log("start","login successful, client is ready"),this.client.resolve(n)}))}stop(){return dt(this,void 0,void 0,(function*(){ht.log("stop","stopping client"),this.client.isResolved()&&(yield(yield this.client.promise).stop().catch((e=>ht.error(e)))),yield this.reset()}))}reset(){return dt(this,void 0,void 0,(function*(){ht.log("reset","resetting connection"),yield this.storage.delete(D.MATRIX_PEER_ROOM_IDS).catch((e=>ht.log(e))),yield this.storage.delete(D.MATRIX_PRESERVED_STATE).catch((e=>ht.log(e))),yield this.storage.delete(D.MATRIX_SELECTED_NODE).catch((e=>ht.log(e))),this.relayServer=void 0,this.client=new o,this.initialEvent=void 0,this.initialListener=void 0}))}listenForEncryptedMessage(e,t){return dt(this,void 0,void 0,(function*(){if(this.activeListeners.has(e))return;ht.log("listenForEncryptedMessage",`start listening for encrypted messages from publicKey ${e}`);const n=yield this.createCryptoBoxServer(e,this.keyPair),r=r=>dt(this,void 0,void 0,(function*(){if(this.isTextMessage(r.content)&&(yield this.isSender(r,e))){let s;yield this.updateRelayServer(r.content.message.sender),yield this.updatePeerRoom(r.content.message.sender,r.content.roomId);try{s=ut.from(r.content.message.content,"hex")}catch(ys){}if(s&&s.length>=40)try{const r=yield A(s,n.receive);ht.log("listenForEncryptedMessage",`received a message from ${e}`,r),t(r)}catch(i){}}}));this.activeListeners.set(e,r),(yield this.client.promise).subscribe(nt.MESSAGE,r);const i=this.initialEvent;i&&i.timestamp&&(new Date).getTime()-i.timestamp<3e5?(ht.log("listenForEncryptedMessage","Handling previous event"),yield r(i)):ht.log("listenForEncryptedMessage","No previous event found");const s=this.initialListener;s&&(yield this.client.promise).unsubscribe(nt.MESSAGE,s),this.initialListener=void 0,this.initialEvent=void 0}))}unsubscribeFromEncryptedMessage(e){return dt(this,void 0,void 0,(function*(){const t=this.activeListeners.get(e);t&&((yield this.client.promise).unsubscribe(nt.MESSAGE,t),this.activeListeners.delete(e))}))}unsubscribeFromEncryptedMessages(){return dt(this,void 0,void 0,(function*(){(yield this.client.promise).unsubscribeAll(nt.MESSAGE),this.activeListeners.clear()}))}sendMessage(e,t){return dt(this,void 0,void 0,(function*(){const n=yield this.createCryptoBoxClient(t.publicKey,this.keyPair),r=b(yield E(ut.from(t.publicKey,"hex")),t.relayServer),i=yield this.getRelevantRoom(r);yield this.waitForJoin(i);const s=yield y(e,n.send);ht.log("sendMessage","sending encrypted message",t.publicKey,i,e),(yield this.client.promise).sendTextMessage(i,s).catch((e=>dt(this,void 0,void 0,(function*(){if("M_FORBIDDEN"===e.errcode){ht.log("sendMessage","M_FORBIDDEN",i,e),yield this.deleteRoomIdFromRooms(i);const t=yield this.getRelevantRoom(r);ht.log("sendMessage","Old room deleted, new room created",t),(yield this.client.promise).sendTextMessage(t,s).catch((e=>dt(this,void 0,void 0,(function*(){ht.log("sendMessage","inner error",t,e)}))))}else ht.log("sendMessage","unexpected error",e)}))))}))}updatePeerRoom(e,t){return dt(this,void 0,void 0,(function*(){ht.log("updatePeerRoom",e,t);const n=e.split(":");if(n.length<2||!n[0].startsWith("@"))throw new Error("Invalid sender");const r=yield this.storage.get(D.MATRIX_PEER_ROOM_IDS),i=r[e];i===t&&ht.debug("updatePeerRoom","rooms are the same, not updating"),ht.debug("updatePeerRoom","current room",i,"new room",t),i&&i[1]&&(ht.log("updatePeerRoom",`adding room "${i[1]}" to ignored array`),this.ignoredRooms.push(i[1])),r[e]=t,yield this.storage.set(D.MATRIX_PEER_ROOM_IDS,r)}))}deleteRoomIdFromRooms(e){return dt(this,void 0,void 0,(function*(){const t=yield this.storage.get(D.MATRIX_PEER_ROOM_IDS),n=Object.entries(t).filter((t=>t[1]!==e)).reduce(((e,t)=>Object.assign(Object.assign({},e),{[t[0]]:t[1]})),{});yield this.storage.set(D.MATRIX_PEER_ROOM_IDS,n),this.ignoredRooms.push(e)}))}listenForChannelOpening(e){return dt(this,void 0,void 0,(function*(){ht.debug("listenForChannelOpening"),(yield this.client.promise).subscribe(nt.MESSAGE,(t=>dt(this,void 0,void 0,(function*(){if(this.isTextMessage(t.content)&&(yield this.isChannelOpenMessage(t.content))){ht.log("listenForChannelOpening","channel opening received, trying to decrypt",JSON.stringify(t)),yield this.updateRelayServer(t.content.message.sender),yield this.updatePeerRoom(t.content.message.sender,t.content.roomId);const r=t.content.message.content.split(":"),i=ut.from(r[r.length-1],"hex");if(i.length>=40)try{const t=JSON.parse(yield T(i,this.keyPair.publicKey,this.keyPair.secretKey));ht.log("listenForChannelOpening","channel opening received and decrypted",JSON.stringify(t)),e(Object.assign(Object.assign({},t),{senderId:yield ee(t.publicKey)}))}catch(n){}}}))))}))}waitForJoin(e,t=0){return dt(this,void 0,void 0,(function*(){const n=yield(yield this.client.promise).getRoomById(e);if(ht.log("waitForJoin",`Currently ${n.members.length} members, we need at least 2`),!(n.members.length>=2||0===n.members.length)){if(t<=200)return ht.log(`Waiting for join... Try: ${t}`),new Promise((n=>{setTimeout((()=>dt(this,void 0,void 0,(function*(){n(this.waitForJoin(e,t+1))}))),100*(t>50?10:1))}));throw new Error(`No one joined after ${t} tries.`)}}))}sendPairingResponse(e){return dt(this,void 0,void 0,(function*(){ht.log("sendPairingResponse");const t=b(yield E(ut.from(e.publicKey,"hex")),e.relayServer),n=yield(yield this.client.promise).createTrustedPrivateRoom(t);ht.debug("sendPairingResponse",`Connecting to room "${n}"`),yield this.updatePeerRoom(t,n),yield this.waitForJoin(n),ht.debug("sendPairingResponse","Successfully joined room.");const r=void 0===e.version?yield this.getPublicKey():JSON.stringify(yield this.getPairingResponseInfo(e));ht.debug("sendPairingResponse","Sending pairing response",r);const i=yield this.encryptMessageAsymmetric(e.publicKey,r),s=["@channel-open",t,i].join(":");(yield this.client.promise).sendTextMessage(n,s).catch((e=>dt(this,void 0,void 0,(function*(){if("M_FORBIDDEN"===e.errcode){ht.log("sendPairingResponse","M_FORBIDDEN",n,e),yield this.deleteRoomIdFromRooms(n);const r=yield this.getRelevantRoom(t);ht.log("sendPairingResponse","Old room deleted, new room created",r),(yield this.client.promise).sendTextMessage(r,s).catch((e=>dt(this,void 0,void 0,(function*(){ht.log("sendPairingResponse","inner error",r,e)}))))}else ht.log("sendPairingResponse","unexpected error",e)}))))}))}isTextMessage(e){return e.message.type===Be.TEXT}updateRelayServer(e){return dt(this,void 0,void 0,(function*(){ht.log("updateRelayServer",e);const t=e.split(":");if(t.length<2||!t[0].startsWith("@"))throw new Error("Invalid sender");const n=t.shift(),r=t.join(":"),i=localStorage.getItem("beacon:communication-peers-dapp")?new Pe(this.storage,D.TRANSPORT_P2P_PEERS_DAPP):new Pe(this.storage,D.TRANSPORT_P2P_PEERS_WALLET),s=(yield i.getPeers()).map((e=>dt(this,void 0,void 0,(function*(){`@${yield E(ut.from(e.publicKey,"hex"))}`===n&&e.relayServer!==r&&(e.relayServer=r,yield i.addPeer(e))}))));yield Promise.all(s)}))}isChannelOpenMessage(e){return dt(this,void 0,void 0,(function*(){return e.message.content.startsWith(`@channel-open:@${yield E(ut.from(yield this.getPublicKey(),"hex"))}`)}))}isSender(e,t){return dt(this,void 0,void 0,(function*(){return e.content.message.sender.startsWith(`@${yield E(ut.from(t,"hex"))}`)}))}getRelevantRoom(e){return dt(this,void 0,void 0,(function*(){const t=yield this.storage.get(D.MATRIX_PEER_ROOM_IDS);let n=t[e];if(!n){ht.log("getRelevantRoom",`No room found for peer ${e}, checking joined ones.`);const r=yield this.getRelevantJoinedRoom(e);n=r.id,t[e]=r.id,yield this.storage.set(D.MATRIX_PEER_ROOM_IDS,t)}return ht.log("getRelevantRoom",`Using room ${n}`),n}))}getRelevantJoinedRoom(e){return dt(this,void 0,void 0,(function*(){const t=yield(yield this.client.promise).joinedRooms;ht.log("checking joined rooms",t,e);const n=t.filter((e=>!this.ignoredRooms.some((t=>e.id===t)))).filter((t=>t.members.some((t=>t===e))));let r;if(0===n.length||this.ignoredRooms.length>0){ht.log("getRelevantJoinedRoom","no relevant rooms found, creating new one");const t=yield(yield this.client.promise).createTrustedPrivateRoom(e);r=yield(yield this.client.promise).getRoomById(t),ht.log("getRelevantJoinedRoom",`waiting for other party to join room: ${r.id}`),yield this.waitForJoin(t),ht.log("getRelevantJoinedRoom",`new room created and peer invited: ${r.id}`)}else r=n[0],ht.log("getRelevantJoinedRoom",`channel already open, reusing room ${r.id}`);return r}))}}var mt=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(t){s(t)}}function a(e){try{c(r.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};const gt=new ne("P2PTransport");class Et extends ye{constructor(e,t,n,r,i,s,o){super(e,new ft(e,t,1,n,r,s,o),new Pe(n,i)),this.type=L.P2P}static isAvailable(){return mt(this,void 0,void 0,(function*(){return Promise.resolve(!0)}))}connect(){const e=Object.create(null,{connect:{get:()=>super.connect}});return mt(this,void 0,void 0,(function*(){if(this._isConnected!==k.NOT_CONNECTED)return;gt.log("connect"),this._isConnected=k.CONNECTING,yield this.client.start();const t=yield this.getPeers();if(t.length>0){gt.log("connect",`connecting to ${t.length} peers`);const e=t.map((e=>mt(this,void 0,void 0,(function*(){return this.listen(e.publicKey)}))));Promise.all(e).catch((e=>gt.error("connect",e)))}return yield this.startOpenChannelListener(),e.connect.call(this)}))}disconnect(){const e=Object.create(null,{disconnect:{get:()=>super.disconnect}});return mt(this,void 0,void 0,(function*(){return yield this.client.stop(),e.disconnect.call(this)}))}startOpenChannelListener(){return mt(this,void 0,void 0,(function*(){}))}getPairingRequestInfo(){return mt(this,void 0,void 0,(function*(){return this.client.getPairingRequestInfo()}))}listen(e){return mt(this,void 0,void 0,(function*(){yield this.client.listenForEncryptedMessage(e,(t=>{const n={origin:I.P2P,id:e};this.notifyListeners(t,n).catch((e=>{throw e}))})).catch((e=>{throw e}))}))}}var vt=n(48764).Buffer,yt=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(t){s(t)}}function a(e){try{c(r.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};class At extends Me{constructor(){super(...arguments),this.activeListeners=new Map}init(){return yt(this,void 0,void 0,(function*(){this.subscribeToMessages().catch(console.error)}))}listenForEncryptedMessage(e,t){return yt(this,void 0,void 0,(function*(){if(this.activeListeners.has(e))return;this.activeListeners.set(e,((n,r)=>yt(this,void 0,void 0,(function*(){try{const i=yield this.decryptMessage(e,n.encryptedPayload);t(i,r)}catch(i){}}))))}))}sendMessage(e,t){var n;return yt(this,void 0,void 0,(function*(){const r=yield this.encryptMessage(t.publicKey,e),i=null===(n=t)||void 0===n?void 0:n.extensionId,s={target:x.EXTENSION,encryptedPayload:r,targetId:i};j.postMessage(s,j.location.origin)}))}listenForChannelOpening(e){return yt(this,void 0,void 0,(function*(){j.addEventListener("message",(t=>yt(this,void 0,void 0,(function*(){var n,r;if(t.source!==j||t.origin!==j.location.origin)return;const i=null===(n=null==t?void 0:t.data)||void 0===n?void 0:n.message;if(i&&i.target===x.PAGE&&(yield this.isChannelOpenMessage(i))){const n=vt.from(i.payload,"hex");if(n.length>=40)try{const i=JSON.parse(yield T(n,this.keyPair.publicKey,this.keyPair.secretKey));e(Object.assign(Object.assign({},i),{senderId:yield ee(i.publicKey),extensionId:null===(r=null==t?void 0:t.data)||void 0===r?void 0:r.sender.id}))}catch(s){}}}))))}))}sendPairingRequest(e){return yt(this,void 0,void 0,(function*(){const t={target:x.EXTENSION,payload:yield(new we).serialize(yield this.getPairingRequestInfo()),targetId:e};j.postMessage(t,j.location.origin)}))}isChannelOpenMessage(e){return yt(this,void 0,void 0,(function*(){return"object"==typeof e&&e.hasOwnProperty("payload")}))}subscribeToMessages(){return yt(this,void 0,void 0,(function*(){j.addEventListener("message",(e=>{if(e.source===j&&e.origin===j.location.origin&&"object"==typeof e&&e){const t=e.data;t.message&&t.message.target===x.PAGE&&this.activeListeners.forEach((e=>{e(t.message,{origin:I.EXTENSION,id:t.sender.id||""})}))}}))}))}}var Tt=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(t){s(t)}}function a(e){try{c(r.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};const bt=new ne("PostMessageTransport");let St,wt,Rt=!1;class _t extends ye{constructor(e,t,n,r){super(e,new At(e,t),new Pe(n,r)),this.type=L.POST_MESSAGE}static isAvailable(){return Tt(this,void 0,void 0,(function*(){return new Promise((e=>{const t=n=>{const r=n.data;r&&"pong"===r.payload&&(e(!0),j.removeEventListener("message",t))};j.addEventListener("message",t);const n={target:x.EXTENSION,payload:"ping"};j.postMessage(n,j.location.origin)}))}))}static getAvailableExtensions(){return Tt(this,void 0,void 0,(function*(){return St||(wt||(wt=[],St=new Promise((e=>{_t.listenForExtensions(),setTimeout((()=>{e(null!=wt?wt:[])}),1e3)})).finally((()=>{St=void 0})),St))}))}static listenForExtensions(){if(Rt)return;j.addEventListener("message",(e=>{if(e.source!==j||e.origin!==j.location.origin)return;const t=e.data,n=t.sender;var r;t&&"pong"===t.payload&&n&&(bt.log("getAvailableExtensions",`extension "${n.name}" is available`,n),r=n,wt||(wt=[]),wt.some((e=>e.id===r.id))||(wt.push(r),j.postMessage("extensionsUpdated",j.location.origin)))}));const e={target:x.EXTENSION,payload:"ping"};j.postMessage(e,j.location.origin),Rt=!0}connect(){const e=Object.create(null,{connect:{get:()=>super.connect}});return Tt(this,void 0,void 0,(function*(){if(bt.log("connect"),this._isConnected!==k.NOT_CONNECTED)return;this._isConnected=k.CONNECTING;const t=yield this.getPeers();if(t.length>0){bt.log("connect",`connecting to ${t.length} peers`);const e=t.map((e=>Tt(this,void 0,void 0,(function*(){return this.listen(e.publicKey)}))));Promise.all(e).catch((e=>bt.error("connect",e)))}yield this.startOpenChannelListener(),yield e.connect.call(this)}))}startOpenChannelListener(){return Tt(this,void 0,void 0,(function*(){}))}getPairingRequestInfo(){return Tt(this,void 0,void 0,(function*(){return this.client.getPairingRequestInfo()}))}listen(e){return Tt(this,void 0,void 0,(function*(){bt.log("listen",e),yield this.client.listenForEncryptedMessage(e,((e,t)=>{const n={origin:I.EXTENSION,id:t.id};this.notifyListeners(e,n).catch((e=>{throw e}))})).catch((e=>{throw e}))}))}}const Ot={css:":host {\n  --animation-duration: 300ms;\n  all: initial;\n}\n\n@keyframes fadeIn {\n  from {\n    opacity: 0;\n  }\n  to {\n    opacity: 1;\n  }\n}\n\n@keyframes fadeOut {\n  from {\n    opacity: 1;\n  }\n  to {\n    opacity: 0;\n  }\n}\n\n.animated {\n  animation-duration: var(--animation-duration);\n  animation-fill-mode: both;\n}\n\n.fadeIn {\n  animation-name: fadeIn;\n}\n\n.fadeOut {\n  animation-name: fadeOut;\n}\n\n.beacon-modal__wrapper {\n  position: relative;\n  top: 0;\n  display: inline-block;\n  z-index: 2147483000;\n  max-width: 500px;\n  width: 80%;\n  padding: 24px;\n}\n\n@media (min-height: 700px) {\n  .beacon-modal__wrapper {\n    top: 50%;\n    transform: translateY(-50%);\n  }\n}\n\n.theme__light .beacon-modal__base,\n.theme__light .beacon-modal__close__wrapper {\n  background: #fff;\n}\n\n.theme__dark .beacon-modal__base,\n.theme__dark .beacon-modal__close__wrapper {\n  background: #27334c;\n}\n\n.beacon-modal__base,\n.beacon-modal__close__wrapper {\n  box-shadow: 0 12px 24px 0 rgba(0, 0, 0, 0.1);\n}\n\n.beacon-modal__base {\n  margin: 0 auto;\n  border-radius: 32px;\n  overflow: hidden;\n}\n\n.beacon-modal__header {\n  padding: 16px 0;\n  width: 100%;\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.beacon-modal__headerLogo {\n  width: 100%;\n  max-width: 320px;\n  margin: 20px auto;\n  height: 100%;\n}\n\na,\nbutton {\n  cursor: pointer;\n}\n\n.beacon-modal__close__wrapper {\n  position: absolute;\n  top: 44px;\n  right: 24px;\n  z-index: 10000;\n  cursor: pointer;\n  border-radius: 100%;\n}\n\n.beacon-modal__close__icon {\n  width: 16px;\n  height: 16px;\n  position: relative;\n  top: 0;\n  right: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transform: rotate(45deg);\n  margin: 8px;\n}\n\n.beacon-modal__close__line1 {\n  position: absolute;\n  width: 90%;\n}\n\n.beacon-modal__close__line2 {\n  position: absolute;\n  width: 90%;\n  transform: rotate(90deg);\n}\n\n.theme__light .beacon-modal__close__line2,\n.theme__light .beacon-modal__close__line1 {\n  border: 1px solid #000;\n}\n\n.theme__dark .beacon-modal__close__line2,\n.theme__dark .beacon-modal__close__line1 {\n  border: 1px solid #fff;\n}\n\n.beacon-alert__base {\n  position: fixed;\n  overflow-y: scroll;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  z-index: 2147482999;\n  background-color: rgb(17 17 17 / 0.84);\n  text-align: center;\n  -ms-overflow-style: none;\n  scrollbar-width: none;\n  font-family: Roboto, Helvetica, sans-serif;\n}\n\n.beacon-alert__base::-webkit-scrollbar {\n  display: none;\n}\n\n.beacon-alert__title {\n  text-align: center;\n}\n\n.beacon-alert__text,\n.beacon-alert__title {\n  margin: 0 auto;\n  padding: 0 0 24px;\n}\n\n.margin__bottom {\n  margin-bottom: 16px;\n}\n\n.beacon-alert__title {\n  font-size: 18px;\n}\n\n.theme__light .beacon-alert__title {\n  color: #3b3d40;\n}\n\n.theme__dark .beacon-alert__title,\n.theme__dark .beacon-alert__text {\n  color: #7c99d6;\n}\n\n.beacon-alert__text {\n  color: #000;\n  font-size: 14px;\n}\n\n.beacon-modal__button,\n.beacon-modal__button--outline {\n  height: 36px;\n  font-size: 14px;\n  letter-spacing: 0.84px;\n  margin-bottom: 4px;\n  margin-inline-end: 2px;\n  margin-inline-start: 2px;\n  margin-left: 2px;\n  margin-right: 2px;\n  margin-top: 4px;\n  padding-inline-end: 15.4px;\n  padding-inline-start: 15.4px;\n  padding-left: 15.4px;\n  padding-right: 15.4px;\n  overflow-wrap: break-word;\n  pointer-events: auto;\n  text-align: center;\n  border-radius: 4px;\n  border: 2px solid #3880ff;\n}\n\n.beacon-modal__button {\n  background: #3880ff;\n  color: #fff;\n}\n\n.beacon-modal__button--outline {\n  background: #fff;\n  color: #444444;\n  border: 1px solid #444444;\n}\n\n.beacon-alert__image {\n  width: 200px;\n  height: 200px;\n  box-sizing: border-box;\n  box-shadow: 0 10px 20px 0 rgba(17, 17, 17, 0.12);\n  border: 1px solid rgba(17, 17, 17, 0.04);\n  border-radius: 16px;\n}\n.connect__btn {\n  margin: 24px 0;\n  width: 100%;\n}\n\n#beacon-modal__content {\n  padding: 24px;\n}\n\n#beacon-switch {\n  margin-top: 24px;\n}\n\n#beacon-title {\n  margin: 0 0 24px;\n}\n\na {\n  text-decoration: none;\n}\n\npre {\n  white-space: pre-wrap; /* css-3 */\n  white-space: -moz-pre-wrap; /* Mozilla, since 1999 */\n  white-space: -pre-wrap; /* Opera 4-6 */\n  white-space: -o-pre-wrap; /* Opera 7 */\n  word-wrap: break-word; /* Internet Explorer 5.5+ */\n  padding: 16px;\n  background: #ececec;\n  line-height: 1.25rem;\n}\n"},Nt={css:"#beacon-main-text {\n  display: initial;\n}\n.beacon-selection__container {\n  padding: 16px 16px 0;\n}\n.beacon-selection__list {\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  text-decoration: none;\n  padding-bottom: 12px;\n  align-items: center;\n}\n.beacon-list__title {\n  text-align: left;\n  font-size: 12px;\n}\n.beacon-list__wrapper:nth-child(-n + 3) {\n  padding: 0 0 1rem;\n}\n.theme__light .beacon-list__title {\n  color: #7c828b;\n}\n.theme__dark .beacon-list__title,\n.theme__dark #beacon--disclaimer {\n  color: #7c99d6;\n}\n\n.beacon-selection__name {\n  font-size: 1rem;\n  font-weight: 600;\n  text-align: left;\n}\n.theme__light .beacon-selection__name,\n.theme__light .beacon--selection__name__lg {\n  color: #3b3d40;\n}\n.theme__dark .beacon-selection__name,\n.theme__dark .beacon--selection__name__lg {\n  color: #6183ff;\n}\n.beacon-selection__img {\n  width: 48px;\n  height: 48px;\n  box-shadow: 0 4px 12px 0 rgba(17, 17, 17, 0.24);\n  border-radius: 16px;\n  background-color: #fff;\n}\n.beacon--selection__name__lg {\n  font-size: 1.5rem;\n  font-weight: 600;\n  text-align: center;\n  padding: 1rem 0;\n}\n.beacon--selected__container {\n  padding: 2rem 0 0;\n}\n#beacon--qr__copy__container {\n  height: 0;\n}\n#beacon--qr__copy {\n  display: none;\n  position: relative;\n  margin-top: auto;\n  margin-left: auto;\n  margin-right: auto;\n}\n#beacon--qr__container {\n  margin-left: auto;\n  margin-right: auto;\n}\n#beacon--qr__container:hover #beacon--qr__copy {\n  display: block;\n}\n\n.disabled p {\n  text-align: left;\n  margin: 0;\n  font-size: 10px;\n  font-weight: 300;\n  opacity: 0.48;\n}\n\n#beacon--disclaimer {\n  text-align: left;\n  padding-top: 24px;\n  font-size: 0.875rem;\n}\n.progress-line,\n.progress-line:before {\n  height: 3px;\n  width: -webkit-fill-available;\n  margin-left: -24px;\n  margin-right: -24px;\n}\n.progress-line {\n  background-color: #a7c4f7;\n  display: -webkit-flex;\n  display: flex;\n}\n.progress-line:before {\n  background-color: #3880ff;\n  content: '';\n  -webkit-animation: running-progress 2s cubic-bezier(0.4, 0, 0.2, 1) infinite;\n  animation: running-progress 2s cubic-bezier(0.4, 0, 0.2, 1) infinite;\n}\n@-webkit-keyframes running-progress {\n  0% {\n    margin-left: 0px;\n    margin-right: 100%;\n  }\n  50% {\n    margin-left: 25%;\n    margin-right: 0%;\n  }\n  100% {\n    margin-left: 100%;\n    margin-right: 0;\n  }\n}\n@keyframes running-progress {\n  0% {\n    margin-left: 0px;\n    margin-right: 100%;\n  }\n  50% {\n    margin-left: 25%;\n    margin-right: 0%;\n  }\n  100% {\n    margin-left: 100%;\n    margin-right: 0;\n  }\n}\n"},Pt=(e,t)=>t.test(e.navigator.userAgent),It=e=>((e,t)=>e.matchMedia(t).matches)(e,"(any-pointer:coarse)"),xt=e=>Pt(e,/iPhone|iPod/i)||(e=>!!Pt(e,/iPad/i)||!(!Pt(e,/Macintosh/i)||!It(e)))(e),Ct=e=>Pt(e,/android|sink/i);var kt=n(96192);const Lt=new ne("QR"),Dt=(e,t)=>`${e}?type=tzip10&data=${t}`;var Mt=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(t){s(t)}}function a(e){try{c(r.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};let Ut=[{key:"galleon_desktop",name:"Galleon",shortName:"Galleon",color:"",logo:"data:image/;base64,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",deepLink:"galleon://"},{key:"umami_desktop",name:"Umami",shortName:"Umami",color:"",logo:"data:image/;base64,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",deepLink:"umami://"}],Bt=[{key:"spire_chrome",id:"gpfndedineagiepkpinficbcbbgjoenn",name:"Spire",shortName:"Spire",color:"",logo:"data:image/;base64,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",link:"https://spirewallet.com/"},{key:"temple_chrome",id:"ookjlbkiijinhpmnjffcofjonbfbgaoc",name:"Temple Wallet",shortName:"Temple",color:"",logo:"data:image/;base64,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",link:"https://templewallet.com/"}],Kt=[{key:"kukai_web",name:"Kukai Wallet",shortName:"Kukai",color:"",logo:"data:image/;base64,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",links:{mainnet:"https://wallet.kukai.app",ghostnet:"https://ghostnet.kukai.app",mondaynet:"https://dailynet.kukai.app",delphinet:"https://testnet.kukai.app",edonet:"https://edonet.kukai.app",florencenet:"https://florencenet.kukai.app",granadanet:"https://granadanet.kukai.app",hangzhounet:"https://hangzhounet.kukai.app",ithacanet:"https://ithacanet.kukai.app",jakartanet:"https://jakartanet.kukai.app",kathmandunet:"https://kathmandunet.kukai.app"}}],jt=[{key:"airgap_ios",name:"AirGap Wallet",shortName:"AirGap",color:"rgb(4, 235, 204)",logo:"data:image/;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAALT0lEQVR4AeXBCXiU9Z3A8e/vfd+5kskBARYIkAsCSIRyRe5AKbhQ8CqWemGpVnF1qVKPrdoSrSiW6qq0lhZXu7UrskVQSq0VpAIGwxGgHAE5RBMIgUAyk8xkMjOZ+e/zZh9cauXNTMjx7MPnI0qpRkC4PCkDEEDj8hTVuMxpXOY02om3xsfix1/jlumP4qmu48saAiHumv1TFj/2Kp7qOtqLQRsLhxp549U/8x8vvY2vth7TkUNljBwziAsdO3KCnUWl7Cwq5U+rP+KO+ddx8x3TsNtttCWDNhKNRPnjW5tZ9twqTp88xxcUIMKXiQZKKUQEf12AlxatYOVr73PPgzcyY9Z4NE2jLeiFhYULAaGVNDZGWLdqM4/8y0usXbkJf12A84J9u1Je+M/MnjSCPrqdC3Xt1okrhmRz5FA5NWdrMfnrAnz4l538Ze3HJKUkkNOvF5qm0YqUQSs5frSCdX/YxDsrN1F91ssXFARzu1L5/dFUT87FyoRvDGP85KGsX1fM8hfXcPRgGSLC58dO8eP5L/PiohVc952JzLxxAr0zu9MaDFpIKcXBfcfZvH4XG9/bzpHSMkSELyjwj8rgzK0j8YzNBEVMRISpM0czZcYoPtq4h9d/vY4dRQcQEc6eruGVF9ew/IXVDLwyi0nTRjLhG8Ppf0UGCC1iEKNoNMqxwyfYs/0TSj4uZXvRAWrO1SIimEQEUyTZSc2MQZyd9TUCmZ1AAYq4iQjjJw9l/OShfHr4BKt+/wHvrt5CrcePiHBo/2cc2v8ZL//sv+nSLZWR4/IYPmogw/IHkNm3JyJCLAya8Unp57z09Bvs3naIQH0QEeE8EcEUdTuondiXmin98Y7JQmlCE8VXqo1GiEd2bi8efvJ2Fvz4Vor+uof164rZtL4Ef10AEeFclZf31hTx3poilFIkJrkYmj+Aex+ezYC8TKwYWAjUB5k3+ym8NT5MIkITpQjmdKVubBbe8dnUDeuNEmK2xF9JgT2JBNGIh2HTKZg6nIKpw4k0RigpPsiWD3ax9cO/8enhk4gIIkK9r4GijXv4W8lh3i1eijspgYsxsFBSXIq3xocp3D0ZX34GvhG9qR2VQaiLG5SiJf4a9pF5di/9dCeCYBLAEP5BZzGY60pjhiOVC+mGTv64PPLH5fHDhXCmsprizfvYufUAO7aWcrriHD5vPTu3ljLx6hFcjIGFqsoazit7Yhq1I3rzBaW4FFXRCFVRP7FYHfSwPLkPd7q6cjHdunfmmm8XcM23C9j5cSl33fhTTGcqa7CiYcHr8XFeJMVJRyr0nSJWKalulKJJrdeHFQ0Lfl8DTaKKcKcEOtKpaJhGFLHo3CWZaDSKyVdbjxUNC746PyZRikiKk46Ub0vAQIhFUkoiIjTx+xuwomGhIRDCpOwGEYdBR+mmGSxLyiBWdrsNh9OOKRgIYcXAQsAfxKQS7CACKOI1yeZmiiOZJNFpic6aznR7KqmaTjwS3S481XUE6huwYmAhEGjA1JhoB6WIR4JovJmSxUxHKh0h0e3CU11HQ0MIKxoWQsFGTMppgFLE49dJfZjpSKWj2OwGpnAwjBUNC4H6BkzKaQNFzHJ0O7e40uhIDocdUyAQxIqGBb+/AVPEZSMeo2xuhI6V6HZiqvc3YEXDQjAQwhR12vj/xuGyYwo2hLGiYaEhEMQUddmIR3HYh6JjOZ0OTIH6IFY0LAQCQUxRp0E8jkVC/FfgHB0pIdGJKRBowIqGhXCoEZOyG8Tr7roy3gnW0FHsdgNTONSIFQMLkcYoJmVoxKteRbnO8ykFNjdTHckki855OvBdVxdcotFWdEPHFI1EsWJgQSmFKaoLLbUp7GNT2MeFbnd25p6EbrQlTdcwKYUlDQsiNNGiitY00HDR1qLRKCYRLGlY0G06JglFaE1/CnqI0rYawxFMuk3HioEFl8tBqCGMVh+iNW0J+7nec5Q7XF1wi8bFuEVnmC0BAyFefl8AU0KCEysGFpJT3XhrfOjeBlrb2qCXtUEvzemr23krNYfBRgLx8Hp8mJJTErGiYaFzWjIme5UPhA5xNBLiW55jNKKIR1VlDaa0rilY0bDQPb0LJvsJD4LQUY5GQuwO1xMrpRQV5VWYuqd3wYqGhcycHjQJNeIo99CRFLE7WX6GQH0DpozsHljRsNA/L5MmIiTuq6CjZOt2htkSiNW+kqNomoYpd1AGVjQsfG1Ef5RSmJJ2lNERsjQ7q1NyMBBitWPrAUxKKYaMyMWKgYXUzknkXpHBkYNlJG8+iqirUUJcrrYnMceZRrKmc56GIPwfAYR/lCQ6I+2J2BBiFY0qNm/YhanfwD506pyMFYNmFEwdzpGDZeg1AZI/Po53TBaxusOVxvLkTIT2U7xlL+fOeBGBgqnDaY5GM6bfMA6lFKZuK3aBEBMBFrnTEdrXG6/8GRFQSjH9hnE0R6MZmTk9GTF2ECZ30XHce08RC7do/JNmoz3tLTlM0cY9mEaMHURW33SaoxGDO+dfj1IKBHr9fCOxqFNRDjU20G4UPPfE64gISinu+sENxEIjBleNy2NUwWBMrv2n6LLuALG4p/Zz/CpKe/jjqs3s23UU0+iJgxk5dhCxMIjRQ0/MYfaUR4g0Run5/Id4x+cQTnFi5cOwj4Fn9/MtZydSRScWugiDDRffdKSgI8TCU13H80++jkk3NB4snEOsDGKU3a8Xc+6ZyWtL30H3Buiz6H2OLbkWlMJKeTTMC/VniFe+4eLdTrmkaQbNWfSjV/DW+DDddvcMsvv1IlYacZj3wCyy+/fClLzhMF3X7KWtbG8McG9tGc1Zs2IjG9Ztw5TVL515P5xFPDTiYLMbLH55PnaHDQTSn91A4qEztJXVwRrqVZSLKd37Kc8+/ltEBJvD4JmX/xW73UY8NOLUt39vHnv2TpRSSChC9v1vYT/toy2EUdSpCF+lsuIc989dQigYRinFj57+HrkDM4iXRgvMnDWB2+bNwGRU+ek3byW26npaW2/NTjfNxpdVn/Uy76anOHvag+mmO6dx3exJtIRGCz3w+C1MuXYUJntZDbnfW4HjVB2tRYBnk9IR/l5FeRVzry+k7Fglpq9PH8mDC+fQUhotJCI8/eJ9TJgyDJO9vIb+t/2O5F0niJ0CFKAAhQAacKXhZFVKNjc507jQjq0HuHXGY5Qfr8Q0umAwz/xyPpomtJTBJdANneeWL+DR+b9g/dpi9JoAOXe9SdXtV1ExbyxRm8ZXydBsrEjNZoiRgPC/BLCJAILO3wuFwvzq53/gd8vWoaIKU8HVw/nZsvux2QwuhcEl0g2dxb+cT1bfdJb/+2qUUnT97TZSNnzCyYe+jmd8DijFhZ5ypzPa5iYWWz7YzZKF/8mJz07TRGDuvddw78PfQdOES2XQCkSEeQtmkT92ED954FdUlFVhP+Eha/5q/CN6c+q+8dQN6QmKJr10O83Zt/sIv1i8ku0f7UdEMHVPT6Pw+Xnkj82jteiFhYULAaEV9OjVlRtunkxjJMKB3ceIKoX9VC2d395L8p4Kwj2SCaan8l1nGpm6g69SUnyQpx55haVPr6CivAoRQdc1bvn+NJb8ZgGZOT1pRcqglTlddn7w6M1cf9Mknn/y92x6vwQRIXH75+Rs+4zAlT2xLVsAmUlc6PSpczx89wvsLTmCiCAiKKUYN3koC35yK1l902kLBm2kT1YPXnjtIXZvP8TSZ95k9/ZDiAiu/adwVHghsxcXqjx5jn27jiIiKKUYPDyX+/5tNiPHDKItGbSxofkDeHVNIds+2s+rS9/G6/HRf1AmX9ZvQG/652XidruYe9+1jJk4hPZg0E6uGpfHVePyuJgEt4sV7z1De9O4zGlc5gxAAVEuT+p/ABopEAN9AKm/AAAAAElFTkSuQmCC",universalLink:"https://wallet.airgap.it",deepLink:"airgap-wallet://"},{key:"naan_ios",name:"Naan Wallet",shortName:"Naan",color:"rgb(129, 100, 100)",logo:"data:image/;base64,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",universalLink:"https://naanwallet.com",deepLink:"naan://"},{key:"autonomy-app",name:"Autonomy: Digital Art Wallet",shortName:"Autonomy",color:"",logo:"data:image/;base64,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",universalLink:"https://autonomy.io/apps/tezos",deepLink:"autonomy-tezos://"},{key:"temple_ios",name:"Temple Wallet",shortName:"Temple",color:"",logo:"data:image/png;base64,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",universalLink:"https://templewallet.com",deepLink:"temple://"}];const Ht=()=>Ut,Gt=()=>Bt,Vt=()=>Kt,Ft=()=>jt,qt=new we,Qt=["ookjlbkiijinhpmnjffcofjonbfbgaoc","gpfndedineagiepkpinficbcbbgjoenn"];var Wt,Yt;!function(e){e[e.DESKTOP=0]="DESKTOP",e[e.IOS=1]="IOS",e[e.ANDROID=2]="ANDROID"}(Wt||(Wt={})),function(e){e.IOS="ios",e.ANDROID="android",e.EXTENSION="extension",e.DESKTOP="desktop",e.WEB="web"}(Yt||(Yt={}));class zt{static getPlatfrom(){return Mt(this,void 0,void 0,(function*(){return Ct(window)?Wt.ANDROID:xt(window)?Wt.IOS:Wt.DESKTOP}))}static getPairingInfo(e,t,n,r){return Mt(this,void 0,void 0,(function*(){const i=null!=r?r:yield zt.getPlatfrom(),s=e.p2pSyncCode,o=e.postmessageSyncCode,a=e.preferredNetwork;switch(i){case Wt.DESKTOP:return zt.getDesktopPairingAlert(s,t,o,n,a);case Wt.IOS:return zt.getIOSPairingAlert(s,t,a);case Wt.ANDROID:return zt.getAndroidPairingAlert(s,t,a);default:throw new Error("platform unknown")}}))}static getDesktopPairingAlert(e,t,n,r,i){return Mt(this,void 0,void 0,(function*(){const s=yield _t.getAvailableExtensions();s.forEach((e=>{const t=Qt.indexOf(e.id);t>=0&&Qt.splice(t,1)}));const o=[];return Gt().length>0&&o.push({title:"Browser Extensions",type:Yt.EXTENSION,wallets:[...s.map((e=>{var r,i,s,o,a;const c=Gt().find((t=>t.id===e.id));return{key:null!==(r=null==c?void 0:c.key)&&void 0!==r?r:e.id,name:null!==(i=e.name)&&void 0!==i?i:null==c?void 0:c.name,logo:null!==(s=e.iconUrl)&&void 0!==s?s:null==c?void 0:c.logo,shortName:null!==(o=e.shortName)&&void 0!==o?o:null==c?void 0:c.shortName,color:null!==(a=e.color)&&void 0!==a?a:null==c?void 0:c.color,enabled:!0,clicked:!1,clickHandler(){return Mt(this,void 0,void 0,(function*(){if(!this.clicked){if(this.clicked=!0,n){const t=yield qt.serialize(yield n()),r={target:x.EXTENSION,payload:t,targetId:e.id};j.postMessage(r,j.location.origin)}t(Yt.EXTENSION,this)}}))}}})),...Gt().filter((e=>Qt.some((t=>t===e.id)))).map((e=>({key:e.key,name:e.name,shortName:e.shortName,color:e.color,logo:e.logo,enabled:!1,clickHandler:()=>{window.open(e.link,"_blank")}})))].sort(((e,t)=>e.key.localeCompare(t.key)))}),Ht().length>0&&o.push({title:"Desktop & Web Wallets",type:Yt.DESKTOP,wallets:[...Ht().map((n=>({key:n.key,name:n.name,shortName:n.shortName,color:n.color,logo:n.logo,enabled:!0,clicked:!1,clickHandler(){return Mt(this,void 0,void 0,(function*(){if(this.clicked)return;this.clicked=!0;const r=yield qt.serialize(yield e()),i=Dt(n.deepLink,r);window.open(i,"_blank"),t(Yt.DESKTOP,this,!0)}))}}))),...yield zt.getWebList(e,t,i)].sort(((e,t)=>e.key.localeCompare(t.key)))}),Ft().length>0&&o.push({title:"Mobile Wallets",type:Yt.IOS,wallets:[...Ft().map((n=>({key:n.key,name:n.name,shortName:n.shortName,color:n.color,logo:n.logo,enabled:!0,clicked:!1,clickHandler(){return Mt(this,void 0,void 0,(function*(){if(this.clicked)return;this.clicked=!0;const n=yield qt.serialize(yield e());r(n),t(Yt.IOS,this,!0)}))}})))].sort(((e,t)=>e.key.localeCompare(t.key)))}),{walletLists:o,buttons:[]}}))}static getIOSPairingAlert(e,t,n){return Mt(this,void 0,void 0,(function*(){return{walletLists:[{title:"Mobile Wallets",type:Yt.IOS,wallets:Ft().map((n=>({key:n.key,name:n.name,shortName:n.shortName,color:n.color,logo:n.logo,enabled:!0,clicked:!1,clickHandler(){var r;return Mt(this,void 0,void 0,(function*(){if(this.clicked)return;this.clicked=!0;const i=yield qt.serialize(yield e()),s=Dt(null!==(r=n.deepLink)&&void 0!==r?r:n.universalLink,i),o=document.createElement("a");o.setAttribute("href",s),o.dispatchEvent(new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0})),t(Yt.IOS,this,!0)}))}}))).sort(((e,t)=>e.key.localeCompare(t.key)))},{title:"Web Wallets",type:Yt.WEB,wallets:[...yield zt.getWebList(e,t,n)].sort(((e,t)=>e.key.localeCompare(t.key)))}],buttons:[]}}))}static getAndroidPairingAlert(e,t,n){return Mt(this,void 0,void 0,(function*(){return{walletLists:[{title:"Web Wallets",type:Yt.WEB,wallets:[...yield zt.getWebList(e,t,n)].sort(((e,t)=>e.key.localeCompare(t.key)))}],buttons:[{title:"Mobile Wallets",text:"Connect Wallet",clickHandler:()=>Mt(this,void 0,void 0,(function*(){const n=yield qt.serialize(yield e()),r=Dt("tezos://",n);window.open(r,"_blank"),t(Yt.ANDROID)}))}]}}))}static getWebList(e,t,n){return Mt(this,void 0,void 0,(function*(){return Vt().map((r=>({key:r.key,name:r.name,shortName:r.shortName,color:r.color,logo:r.logo,enabled:!0,clicked:!1,clickHandler(){if(this.clicked)return;this.clicked=!0;const i=window.open("","_blank");e().then((e=>qt.serialize(e))).then((e=>{var s;const o=Dt(null!==(s=r.links[n])&&void 0!==s?s:r.links[N.MAINNET],e);i?i.location.href=o:window.open(o,"_blank"),t(Yt.WEB,this,!0)})).catch((e=>{console.error(e)}))}}))).sort(((e,t)=>e.key.localeCompare(t.key)))}))}}const Zt=(e,t,n,r)=>{const i=document.createElement(e);return t.length>0&&i.classList.add(...t.filter((e=>!!e)).map((e=>en(e)))),n.forEach((e=>{i.setAttribute(en(e[0]),en(e[1]))})),"object"==typeof r&&Array.isArray(r)?r.filter((e=>!!e)).forEach((e=>{i.appendChild(e)})):"string"==typeof r&&(i.innerText=r),i},Jt=(e,t,n)=>{const r=document.createElementNS("http://www.w3.org/2000/svg","svg");return e.length>0&&r.classList.add(...e.filter((e=>!!e))),t.forEach((e=>{r.setAttribute(en(e[0]),en(e[1]))})),"object"==typeof n&&Array.isArray(n)&&n.filter((e=>!!e)).forEach((e=>{r.appendChild(e)})),r},Xt=e=>{const t=document.createElementNS("http://www.w3.org/2000/svg","path");return e.forEach((e=>{t.setAttribute(en(e[0]),en(e[1]))})),t},$t=e=>{const t=document.createElementNS("http://www.w3.org/2000/svg","g");return e.filter((e=>!!e)).forEach((e=>{t.appendChild(e)})),t},en=e=>{const t=document.createElement("div");return t.innerText=e,t.innerHTML},tn=e=>{e.innerHTML=""};var nn=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(t){s(t)}}function a(e){try{c(r.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};const rn=new ne("Alert"),sn=new we,on=(e,t,n)=>nn(void 0,void 0,void 0,(function*(){const r=()=>nn(void 0,void 0,void 0,(function*(){return zt.getPairingInfo(n,((e,t,n)=>nn(void 0,void 0,void 0,(function*(){n||(yield En())}))),(()=>nn(void 0,void 0,void 0,(function*(){b()}))))})),i=yield r(),s=t.getElementById("pairing-container");if(!s)throw new Error("container not found");const o=document.createElement("span");s.appendChild(o),i.buttons.forEach((e=>nn(void 0,void 0,void 0,(function*(){const n=yield R(),r=Zt("div",["beacon-list__title"],[],e.title),i=Zt("button",["beacon-modal__button","connect__btn"],[],e.text),s=document.createElement("a");s.id=`button_${n}`,s.appendChild(r),s.appendChild(i),o.appendChild(s);const a=t.getElementById(s.id);a&&a.addEventListener("click",(()=>nn(void 0,void 0,void 0,(function*(){e.clickHandler()}))))}))));const a=document.createElement("span");s.appendChild(a);const c=e=>{tn(a),e.forEach((e=>{const n=document.createElement("div");n.classList.add("beacon-list__wrapper"),a.appendChild(n),n.appendChild(Zt("div",["beacon-list__title"],[],e.title));const r=document.createElement("span");n.appendChild(r),e.wallets.forEach((n=>nn(void 0,void 0,void 0,(function*(){((e,n,r)=>{const i=`Open in ${r.name}`,s=r.key,o=r.logo?Zt("div",[],[],[Zt("img",["beacon-selection__img"],[["src",r.logo]],"")]):Jt(["beacon-selection__img","svg-inline--fa","fa-wallet","fa-w-16"],[["aria-hidden","true"],["focusable","false"],["data-prefix","fas"],["data-icon","wallet"],["role","img"],["xmlns","http://www.w3.org/2000/svg"],["viewBox","0 0 512 512"],["style","enable-background:new 0 0 512 512;"],["xml:space","preserve"]],[Xt([["d","M376.2,181H152.9c-5.2,0-9.4-4.2-9.4-9.4s4.2-9.4,9.4-9.4h225c5.2,0,9.4-4.2,9.4-9.4c0-15.5-12.6-28.1-28.1-28.1H143.5c-20.7,0-37.5,16.8-37.5,37.5v187.5c0,20.7,16.8,37.5,37.5,37.5h232.7c16.4,0,29.8-12.6,29.8-28.1v-150C406,193.6,392.7,181,376.2,181z M349.8,302.9c-10.4,0-18.8-8.4-18.8-18.8s8.4-18.8,18.8-18.8s18.8,8.4,18.8,18.8S360.1,302.9,349.8,302.9z"]])]),a=Zt("div",["beacon-selection__name"],[],[Zt("span",[],[],r.name),r.enabled?void 0:Zt("p",[],[],"Not installed")]),c=Zt("a",["beacon-selection__list",r.enabled?"":"disabled"],[["tabindex","0"],["id",`wallet_${s}`],["alt",i],["target","_blank"]],[a,o]),l=document.createElement("span");l.appendChild(c),e.appendChild(l);const u=t.getElementById(`wallet_${s}`),d=e=>nn(void 0,void 0,void 0,(function*(){if(e&&"Enter"!==e.key)return;r.clickHandler();const i=t.getElementById("beacon-modal__content");i&&n!==Yt.EXTENSION&&n!==Yt.IOS&&(tn(i),i.appendChild(Zt("p",["beacon-alert__title"],[],"Establishing Connection..")),i.appendChild(Zt("div",["progress-line"],[["id","beacon-toast-loader"]],"")),i.appendChild(Zt("div",["beacon--selected__container"],[],[...r.logo?[Zt("img",["beacon-selection__img"],[["src",r.logo]],""),Zt("img",["beacon--selection__name__lg"],[],r.name)]:[]])))}));u&&(u.addEventListener("click",(()=>d())),u.addEventListener("keydown",d))})(r,e.type,n)}))))}))};c(i.walletLists);const l=e=>nn(void 0,void 0,void 0,(function*(){if("extensionsUpdated"===e.data){const e=yield r();c(e.walletLists)}}));let u;u=t=>{t.data===`closeAlert-${e}`&&(j.removeEventListener("message",l),j.removeEventListener("message",u))},j.addEventListener("message",l),j.addEventListener("message",u);const d=t.getElementById("beacon--qr__container"),h=t.getElementById("beacon--qr__copy"),p=t.getElementById("beacon-title"),f=Ct(window)?"android":xt(window)?"ios":"desktop",m=t.getElementById("beacon-main-text"),g=t.getElementById("pairing-container"),E=t.getElementById("beacon--switch__container"),v=()=>nn(void 0,void 0,void 0,(function*(){const e=n?yield sn.serialize(yield n.p2pSyncCode()):"";navigator.clipboard.writeText(e).then((()=>{h&&(h.innerText="Copied"),rn.log("Copying to clipboard was successful!")}),(e=>{rn.error("Could not copy text to clipboard: ",e)}))}));let y=!1;const A=e=>nn(void 0,void 0,void 0,(function*(){const r=t.getElementById("beacon-switch");if(r&&(r.innerText="none"===e?"Pair wallet on same device":"Pair wallet on another device"),m&&g&&E&&h&&d&&p)switch(m.style.display="none",p.style.textAlign="center",g.style.display="none",E.style.display="initial",e){case"ios":case"android":g.style.display="initial";break;case"desktop":g.style.display="initial",p.style.textAlign="left",m.style.display="none",E.style.display="initial";break;default:if(!y){y=!0;const e=yield sn.serialize(yield n.p2pSyncCode()),t=((e,t)=>{const n=kt(0,"L");e.length>500&&Lt.warn("getQrData",'The size of the payload in the QR code is quite long and some devices might not be able to scan it anymore. To reduce the QR size, try using a shorter "name", "appUrl" and "iconUrl"');try{if(n.addData(e),n.make(),"svg"===t)return n.createSvgTag();if("ascii"===t){const e=n.getModuleCount(),t="\x1b[40m  \x1b[0m",r="\x1b[47m  \x1b[0m",i=new Array(e+3).join(r),s=new Array(e+3).join(t);let o="";o+=`${s}\n`,o+=`${i}\n`;for(let a=0;a<e;a++){o+=r;for(let i=0;i<e;i++)o+=n.isDark(a,i)?t:r;o+=`${r}\n`}return o+=i,o+=s,o}return n.createDataURL()}catch(r){throw console.error("error",r),r}})(Dt("tezos://",e),"svg"),r=t.replace("<svg",'<svg class="beacon-alert__image"');d.insertAdjacentHTML("afterbegin",r),h&&h.addEventListener("click",v),d&&d.addEventListener("click",v)}m.style.display="initial"}}));let T=!1;const b=()=>{A(T?"none":f),T=!T};b();{const e=t.getElementById("beacon-switch");e&&e.addEventListener("click",b)}}));let an=B.LIGHT;const cn=e=>{an=e},ln=()=>an,un=(e,t,n,r)=>Zt("div",["beacon-alert__base","animated","fadeIn"],[["id",`beacon-alert-modal-${e}`]],[Zt("div",["beacon-modal__wrapper"],[],[Zt("div",["beacon-modal__header"],[],[Jt([],[["xmlns","http://www.w3.org/2000/svg"],["id","Guides"],["x","0"],["y","0"],["version","1.1"],["viewBox","0 0 179.2 43"],["xml:space","preserve"],["width","140"],["height","40"]],[Zt("style",[],[],".st0 {\n                    fill: #3880ff;\n                  }\n                  .st1 {\n                    fill: #fff;\n                  }"),Xt([["d","M45 19v.9c0 .3-.2 7.5-3.4 13.2-3.3 5.6-9.4 9.3-9.7 9.5l-.8.4-1.3-.8-7.6-4.4c-.5-.3-.9-.6-1.4-.9-.4-.3-.7-.5-1.1-.8-.8-.7-1.5-1.4-2.1-2.2-.9-1.1-1.6-2.4-2.1-3.7-.9-2.3-1.3-4.8-1.2-7.5.8-.4 1.6-.6 2.4-.6h.6c-.2 2.4.1 4.6.8 6.6 1 2.8 2.9 5.1 5.5 6.6l7.4 4.3c.2-.1.4-.2.6-.4 1.9-1.3 5.3-4.1 7.3-7.6 2.2-3.9 2.8-8.9 3-10.8L38.8 19c.3-1 .4-2.1.5-3.2L45 19z"],["class","st0"]]),Xt([["d","M36.3 4.1v10.3c0 .5 0 1.1-.1 1.6s-.1.9-.2 1.3c-.2 1-.5 2-.9 3-.5 1.3-1.3 2.6-2.2 3.7-1.5 1.9-3.5 3.6-5.9 4.8-.9-.6-1.6-1.3-2-2.4 2.1-1 3.9-2.3 5.2-4 1.9-2.3 3-5.1 3-8.1V5.9l-.6-.3c-2-1-6.1-2.6-10.1-2.6-4.5 0-9.1 2-10.9 2.9v3.6c-1 .3-2 .7-3 1.1V4.1l.8-.4C9.7 3.5 16 0 22.5 0s12.8 3.5 13.1 3.6l.7.5z"],["class","st0"]]),Xt([["d","M10.5 16.5l-7.4 4.3v.7c.2 2.1.9 6.5 2.9 10 2.2 3.9 6.2 6.9 7.9 8l3.1-1.8c.8.7 1.6 1.4 2.5 2L13.8 43l-.8-.5c-.3-.2-6.4-3.9-9.7-9.5C.1 27.4 0 20.2 0 19.9V19l1.3-.8L9 13.9c.5-.3.9-.5 1.4-.7.4-.2.8-.4 1.3-.5 1-.4 2-.6 3-.7 1.4-.2 2.9-.2 4.3 0 2.4.3 4.8 1.2 7.1 2.7 0 1-.4 2-1 2.9-1.9-1.3-4-2.2-6-2.5-3.1-.6-6-.1-8.6 1.4z"],["class","st0"]]),$t([Xt([["d","M73.9 23c.9 1 1.3 2.3 1.3 3.7 0 1.9-.6 3.4-1.9 4.5-1.3 1.1-3.1 1.7-5.5 1.7h-8.6v-23h8.4c2.3 0 4.1.5 5.3 1.5 1.2 1 1.8 2.4 1.8 4.2 0 1.5-.4 2.7-1.2 3.6-.8.9-1.8 1.5-3.1 1.8 1.5.3 2.6 1 3.5 2zm-11.7-3h5c1.5 0 2.6-.3 3.4-1 .8-.7 1.2-1.6 1.2-2.8 0-1.2-.4-2.1-1.1-2.8-.8-.7-1.9-1-3.5-1h-4.8V20zm8.7 9.4c.9-.7 1.3-1.7 1.3-3s-.4-2.3-1.3-3c-.9-.7-2.1-1.1-3.7-1.1h-5v8.2h5c1.6-.1 2.8-.4 3.7-1.1zM95.3 24.6H81c.1 2.1.6 3.6 1.7 4.6s2.4 1.5 4 1.5c1.4 0 2.6-.4 3.6-1.1 1-.7 1.6-1.7 1.8-2.9h3.2c-.2 1.2-.7 2.4-1.5 3.3-.8 1-1.7 1.7-2.9 2.3-1.2.5-2.6.8-4.1.8-1.7 0-3.2-.4-4.6-1.1-1.3-.7-2.4-1.8-3.1-3.2-.8-1.4-1.1-3-1.1-4.9 0-1.9.4-3.5 1.1-4.9.8-1.4 1.8-2.5 3.1-3.2 1.3-.7 2.9-1.1 4.6-1.1 1.7 0 3.3.4 4.6 1.1 1.3.7 2.3 1.7 3 3 .7 1.2 1 2.6 1 4.1.1.7 0 1.2-.1 1.7zm-3.5-4.8c-.5-.9-1.2-1.6-2.1-2-.9-.4-1.8-.7-2.8-.7-1.6 0-3 .5-4.1 1.5-1.1 1-1.7 2.5-1.8 4.5h11.5c0-1.3-.2-2.4-.7-3.3zM111.2 16c1.2.9 2.1 2 2.5 3.5V15h3v18h-3v-4.6c-.5 1.5-1.3 2.6-2.5 3.5-1.2.9-2.7 1.3-4.4 1.3-1.6 0-3-.4-4.3-1.1-1.2-.7-2.2-1.8-2.9-3.2-.7-1.4-1.1-3-1.1-4.9 0-1.9.4-3.5 1.1-4.9.7-1.4 1.7-2.5 2.9-3.2 1.2-.7 2.7-1.1 4.3-1.1 1.7-.1 3.1.4 4.4 1.2zm-8 3.1c-1.1 1.2-1.7 2.8-1.7 4.8 0 2.1.5 3.7 1.7 4.8 1.1 1.2 2.6 1.8 4.4 1.8 1.2 0 2.2-.3 3.2-.8.9-.5 1.7-1.3 2.2-2.3.5-1 .8-2.1.8-3.5 0-1.3-.3-2.5-.8-3.5s-1.2-1.8-2.2-2.3c-.9-.5-2-.8-3.2-.8-1.9.1-3.3.7-4.4 1.8zM135 16.6c1.5 1.2 2.4 2.9 2.8 4.9h-3.1c-.2-1.3-.8-2.3-1.8-3-1-.7-2.2-1.1-3.6-1.1-1 0-2 .2-2.9.7-.9.5-1.6 1.2-2.1 2.2-.5 1-.8 2.2-.8 3.7s.3 2.7.8 3.7 1.2 1.7 2.1 2.2c.9.5 1.8.7 2.9.7 1.4 0 2.6-.4 3.6-1.1 1-.7 1.6-1.8 1.8-3h3.1c-.3 2.1-1.3 3.7-2.8 4.9-1.5 1.2-3.4 1.8-5.7 1.8-1.7 0-3.2-.4-4.6-1.1-1.3-.7-2.4-1.8-3.1-3.2-.8-1.4-1.1-3-1.1-4.9 0-1.9.4-3.5 1.1-4.9.8-1.4 1.8-2.5 3.1-3.2 1.3-.7 2.9-1.1 4.6-1.1 2.3-.1 4.2.6 5.7 1.8zM154.5 15.9c1.4.7 2.4 1.8 3.2 3.2.8 1.4 1.2 3 1.2 4.9 0 1.9-.4 3.5-1.2 4.9-.8 1.4-1.8 2.4-3.2 3.2-1.4.7-2.9 1.1-4.6 1.1-1.7 0-3.3-.4-4.6-1.1-1.4-.7-2.4-1.8-3.2-3.2-.8-1.4-1.2-3-1.2-4.9 0-1.9.4-3.5 1.2-4.9.8-1.4 1.9-2.5 3.2-3.2 1.4-.7 2.9-1.1 4.6-1.1 1.7-.1 3.2.3 4.6 1.1zm-7.6 2.2c-.9.5-1.6 1.2-2.2 2.2-.6 1-.8 2.2-.8 3.7 0 1.4.3 2.7.8 3.6.6 1 1.3 1.7 2.2 2.2.9.5 1.9.7 3 .7s2.1-.2 3-.7c.9-.5 1.6-1.2 2.2-2.2.6-1 .8-2.2.8-3.6 0-1.5-.3-2.7-.8-3.7-.6-1-1.3-1.7-2.2-2.2-.9-.5-1.9-.7-3-.7s-2.1.2-3 .7zM177.3 16.7c1.3 1.3 1.9 3.3 1.9 5.8v10.4h-3V22.8c0-1.8-.5-3.2-1.4-4.1-.9-1-2.2-1.4-3.7-1.4-1.6 0-2.9.5-3.9 1.6s-1.5 2.6-1.5 4.6V33h-3V15h3v4.3c.5-1.5 1.3-2.6 2.4-3.4 1.2-.8 2.5-1.2 4-1.2 2.2 0 3.9.6 5.2 2z"],["class","st1"]])])]),Zt("div",["beacon-modal__close__wrapper"],[["id",`beacon-alert-${e}-close`]],[Zt("div",["beacon-modal__close__icon"],[],[Zt("div",["beacon-modal__close__line1"],[],[]),Zt("div",["beacon-modal__close__line2"],[],[])])])]),Zt("div",["beacon-modal__base"],[],[Zt("div",[],[["id","beacon-modal__content"]],[Zt("div",[],[],[Zt("p",["beacon-alert__title"],[],t),...r,Zt("div",["beacon-action__container"],[],n)])])])])]);var dn=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(t){s(t)}}function a(e){try{c(r.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};let hn,pn;"undefined"!=typeof window&&void 0!==window.document&&(pn=window.document);const fn={},mn=(e,t,n,r,i)=>{const s=n,o=r.map(((t,n)=>Zt("button",["beacon-modal__button"+("outline"===t.style?"--outline":"")],[["id",`beacon-alert-${e}-${n}`]],t.text)));let a=Ot.css;i&&(a+=Nt.css);const c=Zt("span",[],[],s),l=i?((e,t,n,r)=>un(e,t,n,[Zt("span",[],[["id","pairing-container"]],""),Zt("div",["beacon-alert__text"],[["id","beacon-main-text"]],[Zt("p",["beacon-list__title"],[["id","beacon-title"]],[document.createTextNode("Scan QR code with a Beacon-compatible wallet.\xa0"),Zt("a",[],[["href","https://docs.walletbeacon.io/supported-wallets"],["target","_blank"]],"Learn more"),...r])]),Zt("div",[],[["id","beacon--switch__container"]],[Zt("button",["beacon-modal__button--outline"],[["id","beacon-switch"]],"")]),Zt("div",[],[["id","beacon--disclaimer"]],"")]))(e,[c],o,[t]):((e,t,n,r)=>un(e,t,n,[Zt("div",["beacon-alert__text"],[["id","beacon-main-text"]],r)]))(e,[c],o,[t]);return{style:a,html:l}},gn=e=>(j.postMessage(`closeAlert-${e}`),new Promise((t=>{var n;const r=pn.getElementById(`beacon-alert-wrapper-${e}`);if(!r)return t();const i=null===(n=r.shadowRoot)||void 0===n?void 0:n.getElementById(`beacon-alert-modal-${e}`);if(i){const n=300,s=fn[e];s&&(clearTimeout(s),fn[e]=void 0),i.className=i.className.replace("fadeIn","fadeOut"),window.setTimeout((()=>{const e=r.parentNode;e&&e.removeChild(r),hn&&hn.focus(),t()}),n)}else t()}))),En=()=>dn(void 0,void 0,void 0,(function*(){return new Promise((e=>dn(void 0,void 0,void 0,(function*(){const t=pn.querySelectorAll('[id^="beacon-alert-wrapper-"]');if(t.length>0){const n=[];t.forEach((e=>dn(void 0,void 0,void 0,(function*(){n.push(e.id.split("-")[3])})))),yield Promise.all(n.map(gn)),e()}else e()}))))})),vn=e=>dn(void 0,void 0,void 0,(function*(){var t,n;const r=e.body,i=e.data,s=e.title,o=e.timer,a=e.pairingPayload,c=e.disclaimerText,l=e.closeButtonCallback;yield En();const u=(yield R()).split("-").join(""),d=pn.createElement("div");d.setAttribute("id",`beacon-alert-wrapper-${u}`);const h=d.attachShadow({mode:"open"}),p=pn.createElement("div");p.setAttribute("tabindex","0"),h.appendChild(p);const f=[...null!==(n=null===(t=e.buttons)||void 0===t?void 0:t.map((e=>{var t,n;return{text:e.text,actionCallback:null!==(t=e.actionCallback)&&void 0!==t?t:()=>Promise.resolve(),style:null!==(n=e.style)&&void 0!==n?n:"outline"}})))&&void 0!==n?n:[]];let m=a?"string"==typeof r?Zt("div",[],[["id","beacon--qr__container"]],[Zt("div",[],[["id","beacon--qr__copy__container"]],[Zt("button",["beacon-modal__button--outline"],[["id","beacon--qr__copy"]],"Copy")])]):Zt("span",[],[],""):Zt("span",[],[],null!=r?r:"");i&&(m=Zt("span",[],[],[m,Zt("pre",[],[["style","text-align: left"]],i)]));const{style:g,html:E}=mn(u,m,s,f,!!(null==a?void 0:a.p2pSyncCode));p.appendChild(E);const v=pn.createElement("style");v.textContent=g,h.appendChild(v),o&&(fn[u]=window.setTimeout((()=>dn(void 0,void 0,void 0,(function*(){yield gn(u)}))),o)),pn.body.prepend(d);const y=h.getElementById(`beacon-alert-${u}-close`),A=()=>dn(void 0,void 0,void 0,(function*(){l&&l(),yield gn(u)}));if(c){const e=h.getElementById("beacon--disclaimer");e&&(e.innerText=c)}const T=ln(),b=h.getElementById(`beacon-alert-modal-${u}`);b&&(b.classList.add(`theme__${T}`),b.addEventListener("click",A));const S=h.querySelectorAll(".beacon-modal__wrapper");return S.length>0&&S[0].addEventListener("click",(e=>{e.stopPropagation()})),hn=pn.activeElement,p.focus(),f.forEach(((e,t)=>{const n=h.getElementById(`beacon-alert-${u}-${t}`);n&&n.addEventListener("click",(()=>dn(void 0,void 0,void 0,(function*(){yield gn(u),e.actionCallback&&(yield e.actionCallback())}))))})),y&&y.addEventListener("click",(()=>dn(void 0,void 0,void 0,(function*(){yield A()})))),window.addEventListener("keydown",(e=>dn(void 0,void 0,void 0,(function*(){"Escape"===e.key&&(yield A())})))),a&&(yield on(u,h,a)),u})),yn={css:":host {\n  --animation-duration: 300ms;\n  all: initial;\n}\n\n@keyframes fadeIn {\n  from {\n    opacity: 0;\n  }\n  to {\n    opacity: 1;\n  }\n}\n\n@keyframes fadeOut {\n  from {\n    opacity: 1;\n  }\n  to {\n    opacity: 0;\n  }\n}\n\n.animated {\n  animation-duration: var(--animation-duration);\n  animation-fill-mode: both;\n}\n\n.fadeIn {\n  animation-name: fadeIn;\n}\n\n.fadeOut {\n  animation-name: fadeOut;\n}\n\n.beacon-toast__base {\n  position: fixed;\n  top: 16px;\n  right: 16px;\n  z-index: 2147483000;\n  margin: 0 auto;\n  border-radius: 8px;\n  overflow: hidden;\n  box-shadow: 0 12px 24px 0 rgba(0, 0, 0, 0.1);\n  flex-direction: column;\n}\n@media (max-width: 576px) {\n  .beacon-toast__base {\n    top: 8px;\n    right: 8px;\n    left: 8px;\n  }\n  .beacon-toast__wallet__outer {\n    flex-wrap: wrap;\n  }\n  .beacon-toast__wallet__link {\n    display: flex;\n    margin-left: 12px !important;\n  }\n}\n\n.theme__light.beacon-toast__base {\n  background: #fff;\n}\n\n.theme__dark.beacon-toast__base {\n  background: #27334c;\n}\n\n.theme__dark p {\n  color: #6183ff;\n}\n\na {\n  text-decoration: none;\n  color: #3880ff;\n}\n\na svg {\n  width: 12px;\n  margin-left: 2px;\n}\n\na:visited {\n  color: #3880ff;\n}\n\nhr {\n  height: 1px;\n  color: rgba(0, 0, 0, 0.12);\n  background-color: rgba(0, 0, 0, 0.12);\n  border: none;\n  width: 100%;\n  margin: 0;\n  display: none;\n}\n\n.show {\n  display: block !important;\n}\n\n.hide {\n  display: none !important;\n}\n\n#beacon-toast-list {\n  display: none;\n}\n\n.beacon-toast__upside_down {\n  transform: rotate(180deg);\n}\n\n.beacon-toast__content {\n  justify-content: space-between;\n  min-height: 56px;\n  height: 0;\n}\n\n.beacon-toast__action__item,\n.beacon-toast__powered a,\n.beacon-toast__wallet__container,\n#beacon-text,\n.beacon-toast__action__item p,\n.beacon-toast__wallet__outer {\n  align-items: center;\n}\n\n.beacon-toast__content,\n.beacon-toast__base,\n.beacon-toast__action__item,\n.beacon-toast__powered a,\n#beacon-text,\n.beacon-toast__wallet__container,\n.beacon-toast__wallet__outer {\n  display: flex;\n}\n\n.beacon-toast__content,\n.beacon-toast__action__item,\n.beacon-toast__powered a {\n  padding: 0 16px;\n  font-family: Roboto, Helvetica, sans-serif;\n}\n\n#beacon-text strong {\n  display: contents;\n}\n.beacon-toast__wallet__link {\n  margin-left: 8px;\n}\n.beacon-toast__wallet__link svg {\n  margin-left: 4px;\n}\n.beacon-toast__powered a {\n  margin: 4px 0 12px;\n  font-size: 12px;\n  opacity: 0.64;\n}\n\n.beacon-toast__powered svg {\n  width: 20px;\n  height: 20px;\n  margin: 0 2px 0 4px;\n}\n\n.beacon-toast__action__item {\n  font-size: 14px;\n  max-width: 40ch;\n}\n\n.beacon-toast__action__item p {\n  margin-right: 8px;\n}\n\n.beacon-toast__action__item__subtitle,\n.beacon-toast__powered a {\n  min-width: 88px;\n  color: rgba(0, 0, 0, 0.54);\n}\n\n.theme__dark .beacon-toast__powered a {\n  color: #7c99d6;\n}\n\n.beacon-toast__content__img {\n  width: 24px;\n  height: 24px;\n  margin-right: 4px;\n  image-rendering: -moz-crisp-edges; /* Firefox */\n  image-rendering: -o-crisp-edges; /* Opera */\n  image-rendering: -webkit-optimize-contrast; /* Webkit (non-standard naming) */\n  image-rendering: crisp-edges;\n  -ms-interpolation-mode: nearest-neighbor; /* IE (non-standard property) */\n}\n\n.beacon-toast__more {\n  width: 14px;\n  transition: transform 0.5s;\n}\n\na,\n.beacon-toast__more {\n  cursor: pointer;\n}\n\na:hover {\n  opacity: 0.64;\n}\n\n.theme__dark .beacon-toast__more {\n  color: #7c99d6;\n}\n\n.beacon-toast__more--action {\n  margin: 8px 0;\n}\n\n#beacon-text {\n  padding-right: 24px;\n}\n\n#beacon-text-content {\n  display: flex;\n  align-items: center;\n}\n\n.progress-line,\n.progress-line:before {\n  height: 3px;\n  width: 100%;\n  margin: 0;\n}\n.progress-line {\n  background-color: #a7c4f7;\n  display: -webkit-flex;\n  display: flex;\n}\n.progress-line:before {\n  background-color: #3880ff;\n  content: '';\n  -webkit-animation: running-progress 2s cubic-bezier(0.4, 0, 0.2, 1) infinite;\n  animation: running-progress 2s cubic-bezier(0.4, 0, 0.2, 1) infinite;\n}\n@-webkit-keyframes running-progress {\n  0% {\n    margin-left: 0px;\n    margin-right: 100%;\n  }\n  50% {\n    margin-left: 25%;\n    margin-right: 0%;\n  }\n  100% {\n    margin-left: 100%;\n    margin-right: 0;\n  }\n}\n@keyframes running-progress {\n  0% {\n    margin-left: 0px;\n    margin-right: 100%;\n  }\n  50% {\n    margin-left: 25%;\n    margin-right: 0%;\n  }\n  100% {\n    margin-left: 100%;\n    margin-right: 0;\n  }\n}\n"};var An=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(t){s(t)}}function a(e){try{c(r.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};let Tn;"undefined"!=typeof window&&void 0!==window.document&&(Tn=window.document);let bn,Sn,wn;const Rn=e=>{for(;e.firstChild;)e.removeChild(e.firstChild)},_n=e=>{var t,n;const r=null===(t=null==wn?void 0:wn.walletInfo)||void 0===t?void 0:t.icon,i=null===(n=null==wn?void 0:wn.walletInfo)||void 0===n?void 0:n.name;let s;const o=Zt("strong",[],[],null!=i?i:"Wallet");s=r?Zt("span",["beacon-toast__wallet__container"],[],[Zt("img",["beacon-toast__content__img"],[["src",r]],""),o]):o;const a=e.split("{{wallet}}");if(1===a.length)return[Zt("span",[],[],e)];{const e=[];for(let t=0;t<a.length;t++)e.push(Zt("span",[],[],a[t])),t<a.length-1&&e.push(s);return e}},On=e=>{const t=e.body,n=_n(t),r=(e=>Zt("div",["beacon-toast__base","animated","fadeIn"],[["id","beacon-toast"]],[Zt("div",["beacon-toast__content"],[],[Zt("span",[],[["id","beacon-text"]],[Zt("p",[],[["id","beacon-text-content"]],e),Zt("a",["beacon-toast__wallet__link"],[["id","beacon-open-wallet"]],[Zt("span",[],[],"Open"),Jt(["svg-inline--fa","fa-external-link-alt","fa-w-16"],[["aria-hidden","true"],["focusable","false"],["data-prefix","fas"],["data-icon","external-link-alt"],["role","img"],["xmlns","http://www.w3.org/2000/svg"],["viewBox","0 0 512 512"]],[Xt([["fill","currentColor"],["d","M432,320H400a16,16,0,0,0-16,16V448H64V128H208a16,16,0,0,0,16-16V80a16,16,0,0,0-16-16H48A48,48,0,0,0,0,112V464a48,48,0,0,0,48,48H400a48,48,0,0,0,48-48V336A16,16,0,0,0,432,320ZM488,0h-128c-21.37,0-32.05,25.91-17,41l35.73,35.73L135,320.37a24,24,0,0,0,0,34L157.67,377a24,24,0,0,0,34,0L435.28,133.32,471,169c15,15,41,4.5,41-17V24A24,24,0,0,0,488,0Z"]])])])]),Jt(["beacon-toast__more","svg-inline--fa","fa-angle-down","fa-w-10"],[["id","beacon-toast-button-expand"],["aria-hidden","true"],["focusable","false"],["data-prefix","fas"],["data-icon","angle-down"],["role","img"],["xmlns","http://www.w3.org/2000/svg"],["viewBox","0 0 320 512"]],[Xt([["fill","currentColor"],["d","M143 352.3L7 216.3c-9.4-9.4-9.4-24.6 0-33.9l22.6-22.6c9.4-9.4 24.6-9.4 33.9 0l96.4 96.4 96.4-96.4c9.4-9.4 24.6-9.4 33.9 0l22.6 22.6c9.4 9.4 9.4 24.6 0 33.9l-136 136c-9.2 9.4-24.4 9.4-33.8 0z"]])]),Jt(["beacon-toast__more","svg-inline--fa","fa-times","fa-w-10"],[["id","beacon-toast-button-close"],["aria-hidden","true"],["focusable","false"],["data-prefix","fal"],["data-icon","times"],["role","img"],["xmlns","http://www.w3.org/2000/svg"],["viewBox","0 0 320 512"]],[Xt([["fill","currentColor"],["d","M193.94 256L296.5 153.44l21.15-21.15c3.12-3.12 3.12-8.19 0-11.31l-22.63-22.63c-3.12-3.12-8.19-3.12-11.31 0L160 222.06 36.29 98.34c-3.12-3.12-8.19-3.12-11.31 0L2.34 120.97c-3.12 3.12-3.12 8.19 0 11.31L126.06 256 2.34 379.71c-3.12 3.12-3.12 8.19 0 11.31l22.63 22.63c3.12 3.12 8.19 3.12 11.31 0L160 289.94 262.56 392.5l21.15 21.15c3.12 3.12 8.19 3.12 11.31 0l22.63-22.63c3.12-3.12 3.12-8.19 0-11.31L193.94 256z"]])])]),Zt("div",["progress-line"],[["id","beacon-toast-loader"]],""),Zt("hr",["hide"],[["id","beacon-toast-loader-placeholder"]],""),Zt("div",["beacon-toast__more--action"],[["id","beacon-toast-list"]],"")]))([Zt("span",["beacon-toast__wallet__outer"],[],n)]);return{style:yn.css,html:r}},Nn=()=>new Promise((e=>{var t;wn=void 0;const n=Tn.getElementById("beacon-toast-wrapper");if(!n)return e();const r=null===(t=n.shadowRoot)||void 0===t?void 0:t.getElementById("beacon-toast");if(r){const t=300;bn&&(clearTimeout(bn),bn=void 0),r.className=r.className.replace("fadeIn","fadeOut"),window.setTimeout((()=>{const t=n.parentNode;t&&t.removeChild(n),e()}),t)}else e()})),Pn=(e,t,n)=>{const r=e.getElementById(t);return r&&r.addEventListener("click",(()=>An(void 0,void 0,void 0,(function*(){yield n(r)})))),r},In=(e,t)=>{const n=e.getElementById(t);n&&(n.classList.remove("hide"),n.classList.add("show"))},xn=(e,t)=>{const n=e.getElementById(t);n&&(n.classList.add("hide"),n.classList.remove("show"))},Cn=e=>{In(e,"beacon-toast-button-close"),xn(e,"beacon-toast-button-expand")},kn=e=>{const t=e.getElementById("beacon-toast-button-expand"),n=e.getElementById("beacon-toast-list");t&&n&&(t.classList.remove("beacon-toast__upside_down"),n.classList.add("hide"),n.classList.remove("show"))},Ln=e=>{const t=e.getElementById("beacon-toast-button-expand"),n=e.getElementById("beacon-toast-list");t&&n&&(t.classList.add("beacon-toast__upside_down"),n.classList.remove("hide"),n.classList.add("show"))},Dn=e=>{const t=e.getElementById("beacon-toast-button-expand"),n=e.getElementById("beacon-toast-list");t&&n&&(t.classList.contains("beacon-toast__upside_down")?kn(e):Ln(e))},Mn=(e,t,n)=>An(void 0,void 0,void 0,(function*(){const r=t.actions;if(r&&r.length>0){const t=r.map((e=>An(void 0,void 0,void 0,(function*(){return t=e,An(void 0,void 0,void 0,(function*(){const{text:e,isBold:n,actionText:r,actionLogo:i,actionCallback:s}=t,o=yield R(),a=Tn.createElement("div");a.classList.add("beacon-toast__action__item"),Rn(a);const c=e=>Zt("strong",[],[],e);if(s){e.length>0&&a.appendChild(Zt("p",[],[],e));const t=Zt("span",[],[],[Zt("span",[],[],r),i&&"external"===i?Jt(["svg-inline--fa","fa-external-link-alt","fa-w-16"],[["aria-hidden","true"],["focusable","false"],["data-prefix","fas"],["data-icon","external-link-alt"],["role","img"],["xmlns","http://www.w3.org/2000/svg"],["viewBox","0 0 512 512"]],[Xt([["fill","currentColor"],["d","M432,320H400a16,16,0,0,0-16,16V448H64V128H208a16,16,0,0,0,16-16V80a16,16,0,0,0-16-16H48A48,48,0,0,0,0,112V464a48,48,0,0,0,48,48H400a48,48,0,0,0,48-48V336A16,16,0,0,0,432,320ZM488,0h-128c-21.37,0-32.05,25.91-17,41l35.73,35.73L135,320.37a24,24,0,0,0,0,34L157.67,377a24,24,0,0,0,34,0L435.28,133.32,471,169c15,15,41,4.5,41-17V24A24,24,0,0,0,488,0Z"]])]):void 0]);a.appendChild(Zt("p",[],[],[Zt("a",[],[["id",o]],[n?c([t]):t])]))}else if(r){e.length>0&&a.appendChild(Zt("p",["beacon-toast__action__item__subtitle"],[],e));const t=Zt("span",[],[],r);a.appendChild(Zt("p",[],[],[n?c([t]):t]))}else{const t=Zt("p",[],[],e);a.appendChild(n?c([t]):t)}return s&&a.addEventListener("click",s),a}));var t}))));(yield Promise.all(t)).forEach((e=>n.appendChild(e)));const i=Tn.createElement("small");i.classList.add("beacon-toast__powered"),i.appendChild(Zt("a",[],[["href","https://walletbeacon.io"],["target","_blank"]],[document.createTextNode("powered by"),Jt([],[["id","f63e95a9-fd19-4487-bc1a-09eb2f066704"],["data-name","Guides"],["xmlns","http://www.w3.org/2000/svg"],["width","65"],["height","65"],["viewBox","0 0 65 65"]],[Zt("title",[],[],"beacon_logo"),Xt([["fill","currentColor"],["d","M59.66,29.52v1.06c0,.37-.18,9.07-4.11,15.88S44.16,57.75,43.84,57.93l-.91.54-1.61-.93-9.19-5.3a14.68,14.68,0,0,1-1.63-1.06h0a14.09,14.09,0,0,1-1.29-1,17.63,17.63,0,0,1-2.56-2.7,18.58,18.58,0,0,1-2.56-4.51,21.53,21.53,0,0,1-1.5-9,6.21,6.21,0,0,1,2.93-.73c.25,0,.49,0,.74,0a18.29,18.29,0,0,0,1,7.93,15.06,15.06,0,0,0,6.67,8l8.93,5.16c.2-.13.43-.3.68-.48,2.26-1.6,6.42-4.92,8.86-9.13C55.12,39.94,55.8,34,56,31.57l-3.79-2.19a23,23,0,0,0,.6-3.83Z"]]),Xt([["fill","currentColor"],["d","M49.22,11.43V23.89c0,.65,0,1.3-.1,1.94v0c-.06.55-.13,1.1-.24,1.63A18,18,0,0,1,47.82,31a19.11,19.11,0,0,1-2.62,4.49,21.37,21.37,0,0,1-7.07,5.8,6.08,6.08,0,0,1-2.42-2.84A18.1,18.1,0,0,0,42,33.7h0a15.12,15.12,0,0,0,3.58-9.81V13.6c-.21-.11-.47-.21-.74-.35-2.52-1.16-7.47-3.1-12.36-3.1-5.42,0-11,2.4-13.08,3.45V18a22.54,22.54,0,0,0-3.63,1.38V11.43l.92-.52c.33-.18,8-4.38,15.79-4.38s15.48,4.2,15.8,4.38Z"]]),Xt([["fill","currentColor"],["d","M18,26.4,9,31.55q0,.35.06.78a31.63,31.63,0,0,0,3.49,12.28c2.71,4.71,7.55,8.3,9.53,9.64l3.79-2.19a23.33,23.33,0,0,0,3,2.44l-6.88,4-.92-.54c-.31-.18-7.75-4.69-11.68-11.5S5.36,30.92,5.35,30.56V29.49L7,28.55l9.17-5.29c.57-.32,1.14-.61,1.72-.87a13.46,13.46,0,0,1,1.55-.61A17.52,17.52,0,0,1,23,20.91a19.2,19.2,0,0,1,5.19,0,21.49,21.49,0,0,1,8.55,3.24,6.29,6.29,0,0,1-1.25,3.51,17.9,17.9,0,0,0-7.3-3.06A15.14,15.14,0,0,0,18,26.4Z"]])]),document.createTextNode("Beacon")])),n.appendChild(i),(e=>{In(e,"beacon-toast-button-expand"),xn(e,"beacon-toast-button-close")})(e)}else Cn(e),kn(e)})),Un=e=>An(void 0,void 0,void 0,(function*(){wn=e;const t=e.timer,n=Tn.createElement("div");n.setAttribute("id","beacon-toast-wrapper");const r=n.attachShadow({mode:"open"}),i=Tn.createElement("div"),{style:s,html:o}=On(e);i.appendChild(o);const a=Tn.createElement("style");a.textContent=s,r.appendChild(i),r.appendChild(a),t&&(bn=window.setTimeout((()=>An(void 0,void 0,void 0,(function*(){yield Nn()}))),t)),Tn.body.prepend(n);const c=ln(),l=r.getElementById("beacon-toast");l&&l.classList.add(`theme__${c}`);const u=r.getElementById("beacon-toast-list");u&&(yield Mn(r,e,u));const d=r.getElementById("beacon-open-wallet");d&&(e.openWalletAction?d.addEventListener("click",(()=>{e.openWalletAction&&e.openWalletAction()})):d.classList.add("hide")),"loading"===wn.state&&(Sn=window.setTimeout((()=>An(void 0,void 0,void 0,(function*(){const e=r.getElementById("beacon-toast-button-expand");e&&!e.classList.contains("beacon-toast__upside_down")&&Dn(r)}))),5e3)),Pn(r,"beacon-toast-button-done",(()=>An(void 0,void 0,void 0,(function*(){yield Nn()}))));const h=Pn(r,"beacon-toast-button-close",(()=>An(void 0,void 0,void 0,(function*(){yield Nn()}))));h&&"loading"===wn.state&&h.classList.add("hide"),Pn(r,"beacon-toast-button-expand",(()=>An(void 0,void 0,void 0,(function*(){Dn(r)}))))})),Bn=e=>An(void 0,void 0,void 0,(function*(){var t;Sn&&clearTimeout(Sn);if(Tn.getElementById("beacon-toast-wrapper")?e.forceNew?(yield Nn(),yield Un(e)):yield(e=>An(void 0,void 0,void 0,(function*(){wn=Object.assign(Object.assign({},wn),e);const t=e.timer,n=Tn.getElementById("beacon-toast-wrapper");if(!n)return;const r=n.shadowRoot;if(!r)return;const i=r.getElementById("beacon-toast-list");i&&(Rn(i),yield Mn(r,e,i)),"loading"===wn.state&&(Sn=window.setTimeout((()=>An(void 0,void 0,void 0,(function*(){const e=r.getElementById("beacon-toast-button-expand");e&&!e.classList.contains("beacon-toast__upside_down")&&Dn(r)}))),5e3));const s=r.getElementById("beacon-text-content");s&&(Rn(s),s.appendChild(Zt("span",["beacon-toast__wallet__outer"],[],_n(e.body))));const o=r.getElementById("beacon-open-wallet");o&&(e.openWalletAction?(o.classList.remove("hide"),o.addEventListener("click",(()=>{e.openWalletAction&&e.openWalletAction()}))):o.classList.add("hide")),t&&(bn=window.setTimeout((()=>An(void 0,void 0,void 0,(function*(){yield Nn()}))),t));const a=r.getElementById("beacon-toast-button-done");a&&a.addEventListener("click",(()=>An(void 0,void 0,void 0,(function*(){yield Nn()}))))})))(e):yield Un(e),wn&&"finished"===wn.state){const e=null===(t=Tn.getElementById("beacon-toast-wrapper"))||void 0===t?void 0:t.shadowRoot;e&&((e=>{xn(e,"beacon-toast-loader"),In(e,"beacon-toast-loader-placeholder")})(e),Cn(e),Ln(e))}})),Kn=e=>e.length>=12?`${e.substr(0,5)}...${e.substr(-5)}`:e;var jn=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(t){s(t)}}function a(e){try{c(r.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};const Hn=new ne("BeaconEvents"),Gn=5e3;var Vn;!function(e){e.PERMISSION_REQUEST_SENT="PERMISSION_REQUEST_SENT",e.PERMISSION_REQUEST_SUCCESS="PERMISSION_REQUEST_SUCCESS",e.PERMISSION_REQUEST_ERROR="PERMISSION_REQUEST_ERROR",e.OPERATION_REQUEST_SENT="OPERATION_REQUEST_SENT",e.OPERATION_REQUEST_SUCCESS="OPERATION_REQUEST_SUCCESS",e.OPERATION_REQUEST_ERROR="OPERATION_REQUEST_ERROR",e.SIGN_REQUEST_SENT="SIGN_REQUEST_SENT",e.SIGN_REQUEST_SUCCESS="SIGN_REQUEST_SUCCESS",e.SIGN_REQUEST_ERROR="SIGN_REQUEST_ERROR",e.BROADCAST_REQUEST_SENT="BROADCAST_REQUEST_SENT",e.BROADCAST_REQUEST_SUCCESS="BROADCAST_REQUEST_SUCCESS",e.BROADCAST_REQUEST_ERROR="BROADCAST_REQUEST_ERROR",e.ACKNOWLEDGE_RECEIVED="ACKNOWLEDGE_RECEIVED",e.LOCAL_RATE_LIMIT_REACHED="LOCAL_RATE_LIMIT_REACHED",e.NO_PERMISSIONS="NO_PERMISSIONS",e.ACTIVE_ACCOUNT_SET="ACTIVE_ACCOUNT_SET",e.ACTIVE_TRANSPORT_SET="ACTIVE_TRANSPORT_SET",e.SHOW_PREPARE="SHOW_PREPARE",e.HIDE_UI="HIDE_UI",e.PAIR_INIT="PAIR_INIT",e.PAIR_SUCCESS="PAIR_SUCCESS",e.CHANNEL_CLOSED="CHANNEL_CLOSED",e.INTERNAL_ERROR="INTERNAL_ERROR",e.UNKNOWN="UNKNOWN"}(Vn||(Vn={}));const Fn=e=>jn(void 0,void 0,void 0,(function*(){let t;const n=[];if(e.walletInfo.deeplink&&("web"===e.walletInfo.type||"mobile"===e.walletInfo.type&&It(window)||"desktop"===e.walletInfo.type&&!It(window))){const n=e.walletInfo.deeplink;t=()=>jn(void 0,void 0,void 0,(function*(){const e=document.createElement("a");e.setAttribute("href",n),e.setAttribute("target","_blank"),e.dispatchEvent(new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0}))}))}n.push({text:"No answer from your wallet received yet. Please make sure the wallet is open.",isBold:!0}),n.push({text:"Did you make a mistake?",actionText:"Cancel Request",actionCallback:()=>jn(void 0,void 0,void 0,(function*(){yield Nn()}))}),n.push({text:"Wallet not receiving request?",actionText:"Reset Connection",actionCallback:()=>jn(void 0,void 0,void 0,(function*(){yield Nn();const t=e.extraInfo.resetCallback;t&&(Hn.log("showSentToast","resetCallback invoked"),yield t())}))}),Bn({body:"Request sent to\xa0 {{wallet}}",walletInfo:e.walletInfo,state:"loading",actions:n,openWalletAction:t}).catch((e=>console.error(e)))})),qn=(e,t)=>jn(void 0,void 0,void 0,(function*(){const n=e.errorResponse.errorType?ae.getError(e.errorResponse.errorType,e.errorResponse.errorData):new ge,r=[{text:n.title,isBold:!0},{text:n.description}];e.errorResponse.errorType===C.TRANSACTION_INVALID_ERROR&&e.errorResponse.errorData&&r.push({text:"",actionText:"Show Details",actionCallback:()=>jn(void 0,void 0,void 0,(function*(){yield Nn(),yield vn({title:n.title,body:n.fullDescription.description,data:n.fullDescription.data,buttons:t})}))}),yield Bn({body:"{{wallet}}\xa0 has returned an error",timer:e.errorResponse.errorType===C.ABORTED_ERROR?Gn:void 0,state:"finished",walletInfo:e.walletInfo,actions:r})})),Qn=()=>()=>jn(void 0,void 0,void 0,(function*(){})),Wn={[Vn.PERMISSION_REQUEST_SENT]:Fn,[Vn.PERMISSION_REQUEST_SUCCESS]:e=>jn(void 0,void 0,void 0,(function*(){const{output:t}=e;yield Bn({body:"{{wallet}}\xa0 has granted permission",timer:Gn,walletInfo:e.walletInfo,state:"finished",actions:[{text:"Address",actionText:Kn(t.address),isBold:!0},{text:"Network",actionText:`${t.network.type}`},{text:"Permissions",actionText:t.scopes.join(", ")}]})})),[Vn.PERMISSION_REQUEST_ERROR]:qn,[Vn.OPERATION_REQUEST_SENT]:Fn,[Vn.OPERATION_REQUEST_SUCCESS]:e=>jn(void 0,void 0,void 0,(function*(){const{account:t,output:n,blockExplorer:r}=e;yield Bn({body:"{{wallet}}\xa0 successfully submitted operation",timer:Gn,state:"finished",walletInfo:e.walletInfo,actions:[{text:Kn(n.transactionHash),isBold:!0,actionText:"Open Blockexplorer",actionLogo:"external",actionCallback:()=>jn(void 0,void 0,void 0,(function*(){const e=yield r.getTransactionLink(n.transactionHash,t.network);window.open(e,"_blank"),yield Nn()}))}]})})),[Vn.OPERATION_REQUEST_ERROR]:qn,[Vn.SIGN_REQUEST_SENT]:Fn,[Vn.SIGN_REQUEST_SUCCESS]:e=>jn(void 0,void 0,void 0,(function*(){const t=e.output;yield Bn({body:"{{wallet}}\xa0 successfully signed payload",timer:Gn,state:"finished",walletInfo:e.walletInfo,actions:[{text:`Signature: ${Kn(t.signature)}`,actionText:"Copy to clipboard",actionCallback:()=>jn(void 0,void 0,void 0,(function*(){navigator.clipboard.writeText(t.signature).then((()=>{Hn.log("showSignSuccessAlert","Copying to clipboard was successful!")}),(e=>{Hn.error("showSignSuccessAlert","Could not copy text to clipboard: ",e)})),yield Nn()}))}]})})),[Vn.SIGN_REQUEST_ERROR]:qn,[Vn.BROADCAST_REQUEST_SENT]:Fn,[Vn.BROADCAST_REQUEST_SUCCESS]:e=>jn(void 0,void 0,void 0,(function*(){const{network:t,output:n,blockExplorer:r}=e;yield Bn({body:"{{wallet}}\xa0 successfully injected operation",timer:Gn,state:"finished",walletInfo:e.walletInfo,actions:[{text:Kn(n.transactionHash),isBold:!0,actionText:"Open Blockexplorer",actionLogo:"external",actionCallback:()=>jn(void 0,void 0,void 0,(function*(){const e=yield r.getTransactionLink(n.transactionHash,t);window.open(e,"_blank"),yield Nn()}))}]})})),[Vn.BROADCAST_REQUEST_ERROR]:qn,[Vn.ACKNOWLEDGE_RECEIVED]:e=>jn(void 0,void 0,void 0,(function*(){Bn({body:"Awaiting confirmation in\xa0 {{wallet}}",state:"acknowledge",walletInfo:e.walletInfo}).catch((e=>console.error(e)))})),[Vn.LOCAL_RATE_LIMIT_REACHED]:()=>jn(void 0,void 0,void 0,(function*(){vn({title:"Error",body:"Rate limit reached. Please slow down",buttons:[{text:"Done",style:"outline"}],timer:3e3}).catch((e=>console.error(e)))})),[Vn.NO_PERMISSIONS]:()=>jn(void 0,void 0,void 0,(function*(){yield vn({title:"No Permission",body:"Please allow the wallet to handle this type of request."})})),[Vn.ACTIVE_ACCOUNT_SET]:Qn(),[Vn.ACTIVE_TRANSPORT_SET]:Qn(),[Vn.SHOW_PREPARE]:e=>jn(void 0,void 0,void 0,(function*(){const t=e.walletInfo?"Preparing Request for\xa0 {{wallet}}...":"Preparing Request...";Bn({body:t,state:"prepare",walletInfo:e.walletInfo}).catch((e=>console.error(e)))})),[Vn.HIDE_UI]:e=>jn(void 0,void 0,void 0,(function*(){e?(e.includes("alert")&&En(),e.includes("toast")&&Nn()):Nn()})),[Vn.PAIR_INIT]:e=>jn(void 0,void 0,void 0,(function*(){const t={title:"Choose your preferred wallet",body:"<p></p>",pairingPayload:{p2pSyncCode:e.p2pPeerInfo,postmessageSyncCode:e.postmessagePeerInfo,preferredNetwork:e.preferredNetwork},closeButtonCallback:e.abortedHandler,disclaimerText:e.disclaimerText};yield vn(t)})),[Vn.PAIR_SUCCESS]:()=>jn(void 0,void 0,void 0,(function*(){yield En()})),[Vn.CHANNEL_CLOSED]:()=>jn(void 0,void 0,void 0,(function*(){yield vn({title:"Channel closed",body:"Your peer has closed the connection.",buttons:[{text:"Done",style:"outline"}],timer:1500})})),[Vn.INTERNAL_ERROR]:e=>jn(void 0,void 0,void 0,(function*(){var t;const n=[...null!==(t=e.buttons)&&void 0!==t?t:[]];n.push({text:"Done",style:"outline"});const r={title:"Internal Error",body:e.text,buttons:n};yield vn(r)})),[Vn.UNKNOWN]:Qn()};class Yn{constructor(e={},t){this.callbackMap={[Vn.PERMISSION_REQUEST_SENT]:[Wn.PERMISSION_REQUEST_SENT],[Vn.PERMISSION_REQUEST_SUCCESS]:[Wn.PERMISSION_REQUEST_SUCCESS],[Vn.PERMISSION_REQUEST_ERROR]:[Wn.PERMISSION_REQUEST_ERROR],[Vn.OPERATION_REQUEST_SENT]:[Wn.OPERATION_REQUEST_SENT],[Vn.OPERATION_REQUEST_SUCCESS]:[Wn.OPERATION_REQUEST_SUCCESS],[Vn.OPERATION_REQUEST_ERROR]:[Wn.OPERATION_REQUEST_ERROR],[Vn.SIGN_REQUEST_SENT]:[Wn.SIGN_REQUEST_SENT],[Vn.SIGN_REQUEST_SUCCESS]:[Wn.SIGN_REQUEST_SUCCESS],[Vn.SIGN_REQUEST_ERROR]:[Wn.SIGN_REQUEST_ERROR],[Vn.BROADCAST_REQUEST_SENT]:[Wn.BROADCAST_REQUEST_SENT],[Vn.BROADCAST_REQUEST_SUCCESS]:[Wn.BROADCAST_REQUEST_SUCCESS],[Vn.BROADCAST_REQUEST_ERROR]:[Wn.BROADCAST_REQUEST_ERROR],[Vn.ACKNOWLEDGE_RECEIVED]:[Wn.ACKNOWLEDGE_RECEIVED],[Vn.LOCAL_RATE_LIMIT_REACHED]:[Wn.LOCAL_RATE_LIMIT_REACHED],[Vn.NO_PERMISSIONS]:[Wn.NO_PERMISSIONS],[Vn.ACTIVE_ACCOUNT_SET]:[Wn.ACTIVE_ACCOUNT_SET],[Vn.ACTIVE_TRANSPORT_SET]:[Wn.ACTIVE_TRANSPORT_SET],[Vn.SHOW_PREPARE]:[Wn.SHOW_PREPARE],[Vn.HIDE_UI]:[Wn.HIDE_UI],[Vn.PAIR_INIT]:[Wn.PAIR_INIT],[Vn.PAIR_SUCCESS]:[Wn.PAIR_SUCCESS],[Vn.CHANNEL_CLOSED]:[Wn.CHANNEL_CLOSED],[Vn.INTERNAL_ERROR]:[Wn.INTERNAL_ERROR],[Vn.UNKNOWN]:[Wn.UNKNOWN]},t&&this.setAllHandlers(),this.overrideDefaults(e)}on(e,t){return jn(this,void 0,void 0,(function*(){const n=this.callbackMap[e]||[];n.push(t),this.callbackMap[e]=n}))}emit(e,t,n){return jn(this,void 0,void 0,(function*(){const r=this.callbackMap[e];r&&r.length>0&&r.forEach((r=>jn(this,void 0,void 0,(function*(){try{yield r(t,n)}catch(i){Hn.error(`error handling event ${e}`,i)}}))))}))}overrideDefaults(e){Object.keys(e).forEach((t=>{const n=t,r=e[n];r&&(this.callbackMap[n]=[r.handler])}))}setAllHandlers(e){Object.keys(this.callbackMap).forEach((t=>{const n=t;this.callbackMap[n]=[],e?this.callbackMap[n].push(e):this.callbackMap[n].push(((...e)=>{Hn.log(t,...e)}))}))}}const zn={[_.BlockchainRequest]:{sent:Vn.UNKNOWN,success:Vn.UNKNOWN,error:Vn.UNKNOWN},[_.BlockchainResponse]:{sent:Vn.UNKNOWN,success:Vn.UNKNOWN,error:Vn.UNKNOWN},[_.PermissionRequest]:{sent:Vn.PERMISSION_REQUEST_SENT,success:Vn.PERMISSION_REQUEST_SUCCESS,error:Vn.PERMISSION_REQUEST_ERROR},[_.PermissionResponse]:{sent:Vn.UNKNOWN,success:Vn.UNKNOWN,error:Vn.UNKNOWN},[_.OperationRequest]:{sent:Vn.OPERATION_REQUEST_SENT,success:Vn.OPERATION_REQUEST_SUCCESS,error:Vn.OPERATION_REQUEST_ERROR},[_.OperationResponse]:{sent:Vn.UNKNOWN,success:Vn.UNKNOWN,error:Vn.UNKNOWN},[_.SignPayloadRequest]:{sent:Vn.SIGN_REQUEST_SENT,success:Vn.SIGN_REQUEST_SUCCESS,error:Vn.SIGN_REQUEST_ERROR},[_.SignPayloadResponse]:{sent:Vn.UNKNOWN,success:Vn.UNKNOWN,error:Vn.UNKNOWN},[_.BroadcastRequest]:{sent:Vn.BROADCAST_REQUEST_SENT,success:Vn.BROADCAST_REQUEST_SUCCESS,error:Vn.BROADCAST_REQUEST_ERROR},[_.BroadcastResponse]:{sent:Vn.UNKNOWN,success:Vn.UNKNOWN,error:Vn.UNKNOWN},[_.Acknowledge]:{sent:Vn.UNKNOWN,success:Vn.UNKNOWN,error:Vn.UNKNOWN},[_.Disconnect]:{sent:Vn.UNKNOWN,success:Vn.UNKNOWN,error:Vn.UNKNOWN},[_.Error]:{sent:Vn.UNKNOWN,success:Vn.UNKNOWN,error:Vn.UNKNOWN}};var Zn=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(t){s(t)}}function a(e){try{c(r.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};class Jn{constructor(e){this.rpcUrls=e}getLinkForNetwork(e){return Zn(this,void 0,void 0,(function*(){return this.rpcUrls[e.type]}))}}var Xn=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(t){s(t)}}function a(e){try{c(r.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};class $n extends Jn{constructor(e={[N.MAINNET]:"https://tzkt.io",[N.GHOSTNET]:"https://ghostnet.tzkt.io",[N.MONDAYNET]:"https://mondaynet.tzkt.io",[N.DAILYNET]:"https://dailynet.tzkt.io",[N.DELPHINET]:"https://delphinet.tzkt.io",[N.EDONET]:"https://edonet.tzkt.io",[N.FLORENCENET]:"https://florencenet.tzkt.io",[N.GRANADANET]:"https://granadanet.tzkt.io",[N.HANGZHOUNET]:"https://hangzhounet.tzkt.io",[N.ITHACANET]:"https://ithacanet.tzkt.io",[N.JAKARTANET]:"https://jakartanet.tzkt.io",[N.KATHMANDUNET]:"https://kathmandunet.tzkt.io",[N.CUSTOM]:"https://kathmandunet.tzkt.io"}){super(e),this.rpcUrls=e}getAddressLink(e,t){return Xn(this,void 0,void 0,(function*(){return`${yield this.getLinkForNetwork(t)}/${e}`}))}getTransactionLink(e,t){return Xn(this,void 0,void 0,(function*(){return`${yield this.getLinkForNetwork(t)}/${e}`}))}}var er=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(t){s(t)}}function a(e){try{c(r.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};const tr=new ne("DappPostMessageTransport");class nr extends _t{constructor(e,t,n){super(e,t,n,D.TRANSPORT_POSTMESSAGE_PEERS_DAPP)}startOpenChannelListener(){return er(this,void 0,void 0,(function*(){return this.client.listenForChannelOpening((e=>er(this,void 0,void 0,(function*(){tr.log("connect","received PostMessagePairingResponse",e),yield this.addPeer(e),this._isConnected=k.CONNECTED,this.newPeerListener&&(this.newPeerListener(e),this.newPeerListener=void 0)}))))}))}listenForNewPeer(e){return er(this,void 0,void 0,(function*(){tr.log("listenForNewPeer"),this.newPeerListener=e}))}stopListeningForNewPeers(){return er(this,void 0,void 0,(function*(){tr.log("stopListeningForNewPeers"),this.newPeerListener=void 0}))}}var rr=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(t){s(t)}}function a(e){try{c(r.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};const ir=new ne("DappP2PTransport");class sr extends Et{constructor(e,t,n,r,i,s){super(e,t,n,r,D.TRANSPORT_P2P_PEERS_DAPP,i,s)}startOpenChannelListener(){return rr(this,void 0,void 0,(function*(){return this.client.listenForChannelOpening((e=>rr(this,void 0,void 0,(function*(){ir.log("listenForNewPeer","new publicKey",e.publicKey),yield this.addPeer(e),this._isConnected=k.CONNECTED,this.newPeerListener&&(this.newPeerListener(e),this.newPeerListener=void 0)}))))}))}listenForNewPeer(e){return rr(this,void 0,void 0,(function*(){ir.log("listenForNewPeer"),this.newPeerListener=e}))}stopListeningForNewPeers(){return rr(this,void 0,void 0,(function*(){ir.log("stopListeningForNewPeers"),this.newPeerListener=void 0}))}}var or=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(t){s(t)}}function a(e){try{c(r.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};const ar=new ne("DAppClient");class cr extends oe{constructor(e){var t,n,r,i;super(Object.assign({storage:e&&e.storage?e.storage:new Te},e)),this.events=new Yn,this.openRequests=new Map,this._activeAccount=new o,this._activePeer=new o,this.blockchains=new Map,this.events=new Yn(e.eventHandlers,null!==(t=e.disableDefaultEvents)&&void 0!==t&&t),this.blockExplorer=null!==(n=e.blockExplorer)&&void 0!==n?n:new $n,this.preferredNetwork=null!==(r=e.preferredNetwork)&&void 0!==r?r:N.MAINNET,cn(null!==(i=e.colorMode)&&void 0!==i?i:B.LIGHT),this.disclaimerText=e.disclaimerText,this.appMetadataManager=new _e(this.storage),this.activeAccountLoaded=this.storage.get(D.ACTIVE_ACCOUNT).then((e=>or(this,void 0,void 0,(function*(){e?yield this.setActiveAccount(yield this.accountManager.getAccount(e)):yield this.setActiveAccount(void 0)})))).catch((e=>or(this,void 0,void 0,(function*(){yield this.setActiveAccount(void 0),console.error(e)})))),this.handleResponse=(e,t)=>or(this,void 0,void 0,(function*(){var n,r;const i=this.openRequests.get(e.id);if(ar.log("handleResponse","Received message",e,t),"3"===e.version){const r=e;if(i&&r.message.type===_.Acknowledge)ar.log(`acknowledge message received for ${e.id}`),console.timeLog(e.id,"acknowledge"),this.events.emit(Vn.ACKNOWLEDGE_RECEIVED,{message:r.message,extraInfo:{},walletInfo:yield this.getWalletInfo()}).catch(console.error);else if(i){const n=r.message.blockchainData.appMetadata;r.message.type===_.PermissionResponse&&n&&(yield this.appMetadataManager.addAppMetadata(n)),console.timeLog(r.id,"response"),console.timeEnd(r.id),r.message.type===_.Error?i.reject(r.message):i.resolve({message:e,connectionInfo:t}),this.openRequests.delete(r.id)}else if(r.message.type===_.Disconnect){const r=t.origin===I.P2P?this.p2pTransport:null!==(n=this.postMessageTransport)&&void 0!==n?n:yield this.transport;if(r){const t=(yield r.getPeers()).find((t=>t.senderId===e.senderId));t?(yield r.removePeer(t),yield this.removeAccountsForPeers([t]),yield this.events.emit(Vn.CHANNEL_CLOSED)):ar.error("handleDisconnect","cannot find peer for sender ID",e.senderId)}}else ar.error("handleResponse","no request found for id ",e.id)}else{const n=e;if(i&&n.type===_.Acknowledge)ar.log(`acknowledge message received for ${e.id}`),console.timeLog(e.id,"acknowledge"),this.events.emit(Vn.ACKNOWLEDGE_RECEIVED,{message:n,extraInfo:{},walletInfo:yield this.getWalletInfo()}).catch(console.error);else if(i)n.type===_.PermissionResponse&&n.appMetadata&&(yield this.appMetadataManager.addAppMetadata(n.appMetadata)),console.timeLog(n.id,"response"),console.timeEnd(n.id),n.type===_.Error||e.errorType?i.reject(n):i.resolve({message:e,connectionInfo:t}),this.openRequests.delete(n.id);else if(n.type===_.Disconnect||e.typedMessage.type===_.Disconnect){const n=t.origin===I.P2P?this.p2pTransport:null!==(r=this.postMessageTransport)&&void 0!==r?r:yield this.transport;if(n){const t=(yield n.getPeers()).find((t=>t.senderId===e.senderId));t?(yield n.removePeer(t),yield this.removeAccountsForPeers([t]),yield this.events.emit(Vn.CHANNEL_CLOSED)):ar.error("handleDisconnect","cannot find peer for sender ID",e.senderId)}}else ar.error("handleResponse","no request found for id ",e.id)}}))}initInternalTransports(){return or(this,void 0,void 0,(function*(){const e=yield this.keyPair;this.postMessageTransport||this.p2pTransport||(this.postMessageTransport=new nr(this.name,e,this.storage),yield this.addListener(this.postMessageTransport),this.p2pTransport=new sr(this.name,e,this.storage,this.matrixNodes,this.iconUrl,this.appUrl),yield this.addListener(this.p2pTransport))}))}init(e){const t=Object.create(null,{init:{get:()=>super.init}});return or(this,void 0,void 0,(function*(){if(this._initPromise)return this._initPromise;try{yield this.activeAccountLoaded}catch(ys){}return this._initPromise=new Promise((n=>or(this,void 0,void 0,(function*(){if(e)yield this.addListener(e),n(yield t.init.call(this,e));else if(this._transport.isSettled())yield(yield this.transport).connect(),n(yield t.init.call(this,yield this.transport));else{const e=yield this.getActiveAccount(),r=()=>{this.postMessageTransport&&this.postMessageTransport.stopListeningForNewPeers().catch(console.error),this.p2pTransport&&this.p2pTransport.stopListeningForNewPeers().catch(console.error)};if(yield this.initInternalTransports(),!this.postMessageTransport||!this.p2pTransport)return;if(this.postMessageTransport.connect().then().catch(console.error),e&&e.origin){const r=e.origin.type;r===I.EXTENSION?n(yield t.init.call(this,this.postMessageTransport)):r===I.P2P&&n(yield t.init.call(this,this.p2pTransport))}else{const e=this.p2pTransport,t=this.postMessageTransport;t.listenForNewPeer((e=>{ar.log("init","postmessage transport peer connected",e),this.events.emit(Vn.PAIR_SUCCESS,e).catch((e=>console.warn(e))),this.setActivePeer(e).catch(console.error),this.setTransport(this.postMessageTransport).catch(console.error),r(),n(L.POST_MESSAGE)})).catch(console.error),e.listenForNewPeer((e=>{ar.log("init","p2p transport peer connected",e),this.events.emit(Vn.PAIR_SUCCESS,e).catch((e=>console.warn(e))),this.setActivePeer(e).catch(console.error),this.setTransport(this.p2pTransport).catch(console.error),r(),n(L.P2P)})).catch(console.error),_t.getAvailableExtensions().then((()=>or(this,void 0,void 0,(function*(){this.events.emit(Vn.PAIR_INIT,{p2pPeerInfo:()=>(e.connect().then().catch(console.error),e.getPairingRequestInfo()),postmessagePeerInfo:()=>t.getPairingRequestInfo(),preferredNetwork:this.preferredNetwork,abortedHandler:()=>{this._initPromise=void 0},disclaimerText:this.disclaimerText}).catch((e=>console.warn(e)))})))).catch((e=>{this._initPromise=void 0,console.error(e)}))}}})))),this._initPromise}))}getActiveAccount(){return or(this,void 0,void 0,(function*(){return this._activeAccount.promise}))}setActiveAccount(e){return or(this,void 0,void 0,(function*(){if(this._activeAccount.isSettled()?this._activeAccount=o.resolve(e):this._activeAccount.resolve(e),e){const t=e.origin.type;yield this.initInternalTransports(),t===I.EXTENSION?yield this.setTransport(this.postMessageTransport):t===I.P2P&&(yield this.setTransport(this.p2pTransport));const n=yield this.getPeer(e);yield this.setActivePeer(n)}else yield this.setActivePeer(void 0),yield this.setTransport(void 0);yield this.storage.set(D.ACTIVE_ACCOUNT,e?e.accountIdentifier:void 0),yield this.events.emit(Vn.ACTIVE_ACCOUNT_SET,e)}))}clearActiveAccount(){return this.setActiveAccount()}setColorMode(e){return or(this,void 0,void 0,(function*(){return cn(e)}))}getColorMode(){return or(this,void 0,void 0,(function*(){return ln()}))}getAppMetadata(){return or(this,void 0,void 0,(function*(){return this.getOwnAppMetadata()}))}showPrepare(){return or(this,void 0,void 0,(function*(){const e=yield(()=>or(this,void 0,void 0,(function*(){try{return yield this.getWalletInfo()}catch(ys){return}})))();yield this.events.emit(Vn.SHOW_PREPARE,{walletInfo:e})}))}hideUI(e){return or(this,void 0,void 0,(function*(){yield this.events.emit(Vn.HIDE_UI,e)}))}removeAccount(e){const t=Object.create(null,{removeAccount:{get:()=>super.removeAccount}});return or(this,void 0,void 0,(function*(){const n=t.removeAccount.call(this,e),r=yield this.getActiveAccount();return r&&r.accountIdentifier===e&&(yield this.setActiveAccount(void 0)),n}))}removeAllAccounts(){const e=Object.create(null,{removeAllAccounts:{get:()=>super.removeAllAccounts}});return or(this,void 0,void 0,(function*(){yield e.removeAllAccounts.call(this),yield this.setActiveAccount(void 0)}))}removePeer(e,t=!1){return or(this,void 0,void 0,(function*(){const n=yield this.transport,r=n.removePeer(e);return yield this.removeAccountsForPeers([e]),t&&(yield this.sendDisconnectToPeer(e,n)),r}))}removeAllPeers(e=!1){return or(this,void 0,void 0,(function*(){const t=yield this.transport,n=yield t.getPeers(),r=t.removeAllPeers();if(yield this.removeAccountsForPeers(n),e){const e=n.map((e=>this.sendDisconnectToPeer(e,t)));yield Promise.all(e)}return r}))}subscribeToEvent(e,t){return or(this,void 0,void 0,(function*(){yield this.events.on(e,t)}))}checkPermissions(e){return or(this,void 0,void 0,(function*(){if(e===_.PermissionRequest)return!0;const t=yield this.getActiveAccount();if(!t)throw yield this.sendInternalError("No active account set!");const n=t.scopes;switch(e){case _.OperationRequest:return n.includes(O.OPERATION_REQUEST);case _.SignPayloadRequest:return n.includes(O.SIGN);case _.BroadcastRequest:return!0;default:return!1}}))}addBlockchain(e){this.blockchains.set(e.identifier,e),e.getWalletLists().then((e=>{var t;(e=>{Ut=e})(e.desktopList),(e=>{Bt=e})(e.extensionList),(e=>{Kt=e})(e.webList),t=e.iOSList,jt=t}))}removeBlockchain(e){this.blockchains.delete(e)}permissionRequest(e){return or(this,void 0,void 0,(function*(){console.log("PERMISSION REQUEST");const t=this.blockchains.get(e.blockchainIdentifier);if(!t)throw new Error(`Blockchain "${e.blockchainIdentifier}" not supported by dAppClient`);const n=Object.assign(Object.assign({},e),{type:_.PermissionRequest,blockchainData:Object.assign(Object.assign({},e.blockchainData),{appMetadata:yield this.getOwnAppMetadata()})});console.log("REQUESTION PERMIMISSION V3","xxx",n);const{message:r,connectionInfo:i}=yield this.makeRequestV3(n).catch((e=>or(this,void 0,void 0,(function*(){throw new Error("TODO")}))));console.log("RESPONSE V3",r,i);const s=yield t.getAccountInfosFromPermissionResponse(r.message),o={accountIdentifier:s[0].accountId,senderId:r.senderId,origin:{type:i.origin,id:i.id},address:s[0].address,publicKey:s[0].publicKey,scopes:r.message.blockchainData.scopes,connectedAt:(new Date).getTime(),chainData:r.message.blockchainData};return yield this.accountManager.addAccount(o),yield this.setActiveAccount(o),yield t.handleResponse({request:n,account:o,output:r,blockExplorer:this.blockExplorer,connectionContext:i,walletInfo:yield this.getWalletInfo()}),yield this.notifySuccess(n,{account:o,output:{address:s[0].address,network:{type:N.MAINNET},scopes:[O.OPERATION_REQUEST]},blockExplorer:this.blockExplorer,connectionContext:i,walletInfo:yield this.getWalletInfo()}),r.message}))}request(e){return or(this,void 0,void 0,(function*(){console.log("REQUEST",e);const t=this.blockchains.get(e.blockchainIdentifier);if(!t)throw new Error(`Blockchain "${t}" not supported by dAppClient`);yield t.validateRequest(e);const n=yield this.getActiveAccount();if(!n)throw yield this.sendInternalError("No active account!");const r=Object.assign(Object.assign({},e),{type:_.BlockchainRequest,accountId:n.accountIdentifier}),{message:i,connectionInfo:s}=yield this.makeRequestV3(r).catch((e=>or(this,void 0,void 0,(function*(){throw console.error(e),new Error("TODO")}))));return yield t.handleResponse({request:r,account:n,output:i,blockExplorer:this.blockExplorer,connectionContext:s,walletInfo:yield this.getWalletInfo()}),i.message}))}requestPermissions(e){return or(this,void 0,void 0,(function*(){const t={appMetadata:yield this.getOwnAppMetadata(),type:_.PermissionRequest,network:e&&e.network?e.network:{type:N.MAINNET},scopes:e&&e.scopes?e.scopes:[O.OPERATION_REQUEST,O.SIGN]},{message:n,connectionInfo:r}=yield this.makeRequest(t).catch((e=>or(this,void 0,void 0,(function*(){throw yield this.handleRequestError(t,e)})))),i=n.publicKey||n.pubkey||n.pubKey,s=yield function(e){return m(this,void 0,void 0,(function*(){const t={edpk:{length:54,prefix:f.from(new Uint8Array([6,161,159]))},sppk:{length:55,prefix:f.from(new Uint8Array([6,161,161]))},p2pk:{length:55,prefix:f.from(new Uint8Array([6,161,164]))}};let n,r;if(64===e.length)n=t.edpk.prefix,r=e;else{const i=Object.entries(t);for(let t=0;t<i.length;t++){const[s,o]=i[t];if(e.startsWith(s)&&e.length===o.length){n=o.prefix;const t=a.decode(e);r=t.slice(s.length,t.length).toString("hex");break}}}if(!n||!r)throw new Error(`invalid publicKey: ${e}`);const i=(0,d.hash)(f.from(r,"hex"),20);return a.encode(f.concat([n,f.from(i)]))}))}(i),o={accountIdentifier:yield W(s,n.network),senderId:n.senderId,origin:{type:r.origin,id:r.id},address:s,publicKey:i,network:n.network,scopes:n.scopes,threshold:n.threshold,connectedAt:(new Date).getTime()};yield this.accountManager.addAccount(o),yield this.setActiveAccount(o);const c=Object.assign(Object.assign({},n),{address:s,accountInfo:o});return yield this.notifySuccess(t,{account:o,output:c,blockExplorer:this.blockExplorer,connectionContext:r,walletInfo:yield this.getWalletInfo()}),c}))}requestSignPayload(e){return or(this,void 0,void 0,(function*(){if(!e.payload)throw yield this.sendInternalError("Payload must be provided");const t=yield this.getActiveAccount();if(!t)throw yield this.sendInternalError("No active account!");const n=e.payload;if("string"!=typeof n)throw new Error("Payload must be a string");const r=(()=>{switch(e.signingType){case U.OPERATION:if(!n.startsWith("03"))throw new Error('When using signing type "OPERATION", the payload must start with prefix "03"');return U.OPERATION;case U.MICHELINE:if(!n.startsWith("05"))throw new Error('When using signing type "MICHELINE", the payload must start with prefix "05"');return U.MICHELINE;case U.RAW:default:return U.RAW}})(),i={type:_.SignPayloadRequest,signingType:r,payload:n,sourceAddress:e.sourceAddress||t.address},{message:s,connectionInfo:o}=yield this.makeRequest(i).catch((e=>or(this,void 0,void 0,(function*(){throw yield this.handleRequestError(i,e)}))));return yield this.notifySuccess(i,{account:t,output:s,connectionContext:o,walletInfo:yield this.getWalletInfo()}),s}))}requestOperation(e){return or(this,void 0,void 0,(function*(){if(!e.operationDetails)throw yield this.sendInternalError("Operation details must be provided");const t=yield this.getActiveAccount();if(!t)throw yield this.sendInternalError("No active account!");const n={type:_.OperationRequest,network:t.network||{type:N.MAINNET},operationDetails:e.operationDetails,sourceAddress:t.address||""},{message:r,connectionInfo:i}=yield this.makeRequest(n).catch((e=>or(this,void 0,void 0,(function*(){throw yield this.handleRequestError(n,e)}))));return yield this.notifySuccess(n,{account:t,output:r,blockExplorer:this.blockExplorer,connectionContext:i,walletInfo:yield this.getWalletInfo()}),r}))}requestBroadcast(e){return or(this,void 0,void 0,(function*(){if(!e.signedTransaction)throw yield this.sendInternalError("Signed transaction must be provided");const t=e.network||{type:N.MAINNET},n={type:_.BroadcastRequest,network:t,signedTransaction:e.signedTransaction},{message:r,connectionInfo:i}=yield this.makeRequest(n).catch((e=>or(this,void 0,void 0,(function*(){throw yield this.handleRequestError(n,e)}))));return yield this.notifySuccess(n,{network:t,output:r,blockExplorer:this.blockExplorer,connectionContext:i,walletInfo:yield this.getWalletInfo()}),r}))}setActivePeer(e){return or(this,void 0,void 0,(function*(){this._activePeer.isSettled()?this._activePeer=o.resolve(e):this._activePeer.resolve(e),e&&(yield this.initInternalTransports(),"postmessage-pairing-response"===e.type?yield this.setTransport(this.postMessageTransport):"p2p-pairing-response"===e.type&&(yield this.setTransport(this.p2pTransport)))}))}setTransport(e){const t=Object.create(null,{setTransport:{get:()=>super.setTransport}});return or(this,void 0,void 0,(function*(){e||(this._initPromise=void 0);const n=t.setTransport.call(this,e);return yield this.events.emit(Vn.ACTIVE_TRANSPORT_SET,e),n}))}sendInternalError(e){return or(this,void 0,void 0,(function*(){throw yield this.events.emit(Vn.INTERNAL_ERROR,{text:e}),new Error(e)}))}removeAccountsForPeers(e){return or(this,void 0,void 0,(function*(){const t=yield this.accountManager.getAccounts(),n=e.map((e=>e.senderId)),r=t.filter((e=>n.includes(e.senderId))).map((e=>e.accountIdentifier));yield this.accountManager.removeAccounts(r);const i=yield this.getActiveAccount();i&&r.includes(i.accountIdentifier)&&(yield this.setActiveAccount(void 0))}))}handleRequestError(e,t){return or(this,void 0,void 0,(function*(){if(ar.error("handleRequestError","error response",t),t.errorType){const n=[];if(t.errorType===C.NO_PRIVATE_KEY_FOUND_ERROR){const t=()=>or(this,void 0,void 0,(function*(){const t=e;let n;if(t.sourceAddress&&t.network){const e=yield W(t.sourceAddress,t.network);n=yield this.getAccount(e),n&&(yield this.removeAccount(n.accountIdentifier))}}));n.push({text:"Remove account",actionCallback:t})}const r=yield this.getPeer(),i=yield this.getActiveAccount();throw e.type===_.PermissionRequest&&void 0===(yield this.getActiveAccount())&&(this._initPromise=void 0,this.postMessageTransport=void 0,this.p2pTransport=void 0,yield this.setTransport(),yield this.setActivePeer()),this.events.emit(zn[e.type].error,{errorResponse:t,walletInfo:yield this.getWalletInfo(r,i)},n).catch((e=>ar.error("handleRequestError",e))),ae.getError(t.errorType,t.errorData)}throw t}))}notifySuccess(e,t){return or(this,void 0,void 0,(function*(){this.events.emit(zn[e.type].success,t).catch((e=>console.warn(e)))}))}getWalletInfo(e,t){var n,r;return or(this,void 0,void 0,(function*(){const i=t||(yield this.getActiveAccount()),s=e||(yield this.getPeer(i));let o;i&&(o=yield this.appMetadataManager.getAppMetadata(i.senderId));const a=s;o||(o={name:a.name,icon:a.icon});const c=(e,t)=>!(!e||!t)&&e.toLowerCase()===t.toLowerCase();let l,u;if(Ft().find((e=>c(e.name,null==o?void 0:o.name)))?(l=Ft().find((e=>c(e.name,null==o?void 0:o.name))),u="mobile"):Vt().find((e=>c(e.name,null==o?void 0:o.name)))?(l=Vt().find((e=>c(e.name,null==o?void 0:o.name))),u="web"):Ht().find((e=>c(e.name,null==o?void 0:o.name)))?(l=Ht().find((e=>c(e.name,null==o?void 0:o.name))),u="desktop"):Gt().find((e=>c(e.name,null==o?void 0:o.name)))&&(l=Gt().find((e=>c(e.name,null==o?void 0:o.name))),u="extension"),l){let e;return l.hasOwnProperty("links")?e=l.links[null!==(n=null==i?void 0:i.network.type)&&void 0!==n?n:this.preferredNetwork]:l.hasOwnProperty("deepLink")&&(e=l.deepLink),{name:o.name,icon:null!==(r=o.icon)&&void 0!==r?r:l.logo,deeplink:e,type:u}}return o}))}getPeer(e){var t,n,r,i;return or(this,void 0,void 0,(function*(){let s;if(e){ar.log("getPeer","We have an account",e);const o=[...null!==(n=yield null===(t=this.postMessageTransport)||void 0===t?void 0:t.getPeers())&&void 0!==n?n:[],...null!==(i=yield null===(r=this.p2pTransport)||void 0===r?void 0:r.getPeers())&&void 0!==i?i:[]];ar.log("getPeer","Found peers",o,e),s=o.find((t=>t.senderId===e.senderId)),s||(s=o.find((t=>t.extensionId===e.origin.id)))}else s=yield this._activePeer.promise,ar.log("getPeer","Active peer",s);if(!s)throw new Error("No matching peer found.");return s}))}makeRequest(e){var t;return or(this,void 0,void 0,(function*(){const n=yield R();if(console.time(n),ar.log("makeRequest","starting"),yield this.init(),console.timeLog(n,"init done"),ar.log("makeRequest","after init"),yield this.addRequestAndCheckIfRateLimited())throw this.events.emit(Vn.LOCAL_RATE_LIMIT_REACHED).catch((e=>console.warn(e))),new Error("rate limit reached");if(!(yield this.checkPermissions(e.type)))throw this.events.emit(Vn.NO_PERMISSIONS).catch((e=>console.warn(e))),new Error("No permissions to send this request to wallet!");if(!this.beaconId)throw yield this.sendInternalError("BeaconID not defined");const r=Object.assign({id:n,version:"2",senderId:yield ee(yield this.beaconId)},e),i=new o;this.addOpenRequest(r.id,i);const s=yield(new we).serialize(r),a=yield this.getActiveAccount(),c=yield this.getPeer(a),l=yield this.getWalletInfo(c,a);ar.log("makeRequest","sending message",r),console.timeLog(n,"sending");try{yield(yield this.transport).send(s,c)}catch(u){throw this.events.emit(Vn.INTERNAL_ERROR,{text:"Unable to send message. If this problem persists, please reset the connection and pair your wallet again.",buttons:[{text:"Reset Connection",actionCallback:()=>or(this,void 0,void 0,(function*(){yield Nn(),this.disconnect()}))}]}),console.timeLog(n,"send error"),u}return console.timeLog(n,"sent"),this.events.emit(zn[e.type].sent,{walletInfo:Object.assign(Object.assign({},l),{name:null!==(t=l.name)&&void 0!==t?t:"Wallet"}),extraInfo:{resetCallback:()=>or(this,void 0,void 0,(function*(){this.disconnect()}))}}).catch((e=>console.warn(e))),i.promise}))}makeRequestV3(e){var t;return or(this,void 0,void 0,(function*(){const n=yield R();if(console.time(n),ar.log("makeRequest","starting"),yield this.init(),console.timeLog(n,"init done"),ar.log("makeRequest","after init"),yield this.addRequestAndCheckIfRateLimited())throw this.events.emit(Vn.LOCAL_RATE_LIMIT_REACHED).catch((e=>console.warn(e))),new Error("rate limit reached");if(!this.beaconId)throw yield this.sendInternalError("BeaconID not defined");const r={id:n,version:"3",senderId:yield ee(yield this.beaconId),message:e},i=new o;this.addOpenRequest(r.id,i);const s=yield(new we).serialize(r),a=yield this.getActiveAccount(),c=yield this.getPeer(a),l=yield this.getWalletInfo(c,a);ar.log("makeRequest","sending message",r),console.timeLog(n,"sending");try{yield(yield this.transport).send(s,c)}catch(d){throw this.events.emit(Vn.INTERNAL_ERROR,{text:"Unable to send message. If this problem persists, please reset the connection and pair your wallet again.",buttons:[{text:"Reset Connection",actionCallback:()=>or(this,void 0,void 0,(function*(){yield Nn(),this.disconnect()}))}]}),console.timeLog(n,"send error"),d}console.timeLog(n,"sent");const u=e.type;return this.events.emit(zn[u].sent,{walletInfo:Object.assign(Object.assign({},l),{name:null!==(t=l.name)&&void 0!==t?t:"Wallet"}),extraInfo:{resetCallback:()=>or(this,void 0,void 0,(function*(){this.disconnect()}))}}).catch((e=>console.warn(e))),i.promise}))}disconnect(){return or(this,void 0,void 0,(function*(){this.postMessageTransport=void 0,this.p2pTransport=void 0,yield Promise.all([this.clearActiveAccount(),(yield this.transport).disconnect()])}))}addOpenRequest(e,t){ar.log("addOpenRequest",this.name,`adding request ${e} and waiting for answer`),this.openRequests.set(e,t)}}let lr;var ur;n(9669);!function(e){e[e.CONTINUE=100]="CONTINUE",e[e.SWITCHING_PROTOCOLS=101]="SWITCHING_PROTOCOLS",e[e.PROCESSING=102]="PROCESSING",e[e.OK=200]="OK",e[e.CREATED=201]="CREATED",e[e.ACCEPTED=202]="ACCEPTED",e[e.NON_AUTHORITATIVE_INFORMATION=203]="NON_AUTHORITATIVE_INFORMATION",e[e.NO_CONTENT=204]="NO_CONTENT",e[e.RESET_CONTENT=205]="RESET_CONTENT",e[e.PARTIAL_CONTENT=206]="PARTIAL_CONTENT",e[e.MULTI_STATUS=207]="MULTI_STATUS",e[e.ALREADY_REPORTED=208]="ALREADY_REPORTED",e[e.IM_USED=226]="IM_USED",e[e.MULTIPLE_CHOICES=300]="MULTIPLE_CHOICES",e[e.MOVED_PERMANENTLY=301]="MOVED_PERMANENTLY",e[e.FOUND=302]="FOUND",e[e.SEE_OTHER=303]="SEE_OTHER",e[e.NOT_MODIFIED=304]="NOT_MODIFIED",e[e.USE_PROXY=305]="USE_PROXY",e[e.SWITCH_PROXY=306]="SWITCH_PROXY",e[e.TEMPORARY_REDIRECT=307]="TEMPORARY_REDIRECT",e[e.PERMANENT_REDIRECT=308]="PERMANENT_REDIRECT",e[e.BAD_REQUEST=400]="BAD_REQUEST",e[e.UNAUTHORIZED=401]="UNAUTHORIZED",e[e.PAYMENT_REQUIRED=402]="PAYMENT_REQUIRED",e[e.FORBIDDEN=403]="FORBIDDEN",e[e.NOT_FOUND=404]="NOT_FOUND",e[e.METHOD_NOT_ALLOWED=405]="METHOD_NOT_ALLOWED",e[e.NOT_ACCEPTABLE=406]="NOT_ACCEPTABLE",e[e.PROXY_AUTHENTICATION_REQUIRED=407]="PROXY_AUTHENTICATION_REQUIRED",e[e.REQUEST_TIMEOUT=408]="REQUEST_TIMEOUT",e[e.CONFLICT=409]="CONFLICT",e[e.GONE=410]="GONE",e[e.LENGTH_REQUIRED=411]="LENGTH_REQUIRED",e[e.PRECONDITION_FAILED=412]="PRECONDITION_FAILED",e[e.PAYLOAD_TOO_LARGE=413]="PAYLOAD_TOO_LARGE",e[e.URI_TOO_LONG=414]="URI_TOO_LONG",e[e.UNSUPPORTED_MEDIA_TYPE=415]="UNSUPPORTED_MEDIA_TYPE",e[e.RANGE_NOT_SATISFIABLE=416]="RANGE_NOT_SATISFIABLE",e[e.EXPECTATION_FAILED=417]="EXPECTATION_FAILED",e[e.I_AM_A_TEAPOT=418]="I_AM_A_TEAPOT",e[e.MISDIRECTED_REQUEST=421]="MISDIRECTED_REQUEST",e[e.UNPROCESSABLE_ENTITY=422]="UNPROCESSABLE_ENTITY",e[e.LOCKED=423]="LOCKED",e[e.FAILED_DEPENDENCY=424]="FAILED_DEPENDENCY",e[e.UPGRADE_REQUIRED=426]="UPGRADE_REQUIRED",e[e.PRECONDITION_REQUIRED=428]="PRECONDITION_REQUIRED",e[e.TOO_MANY_REQUESTS=429]="TOO_MANY_REQUESTS",e[e.REQUEST_HEADER_FIELDS_TOO_LARGE=431]="REQUEST_HEADER_FIELDS_TOO_LARGE",e[e.UNAVAILABLE_FOR_LEGAL_REASONS=451]="UNAVAILABLE_FOR_LEGAL_REASONS",e[e.INTERNAL_SERVER_ERROR=500]="INTERNAL_SERVER_ERROR",e[e.NOT_IMPLEMENTED=501]="NOT_IMPLEMENTED",e[e.BAD_GATEWAY=502]="BAD_GATEWAY",e[e.SERVICE_UNAVAILABLE=503]="SERVICE_UNAVAILABLE",e[e.GATEWAY_TIMEOUT=504]="GATEWAY_TIMEOUT",e[e.HTTP_VERSION_NOT_SUPPORTED=505]="HTTP_VERSION_NOT_SUPPORTED",e[e.VARIANT_ALSO_NEGOTIATES=506]="VARIANT_ALSO_NEGOTIATES",e[e.INSUFFICIENT_STORAGE=507]="INSUFFICIENT_STORAGE",e[e.LOOP_DETECTED=508]="LOOP_DETECTED",e[e.NOT_EXTENDED=510]="NOT_EXTENDED",e[e.NETWORK_AUTHENTICATION_REQUIRED=511]="NETWORK_AUTHENTICATION_REQUIRED"}(ur||(ur={}));var dr;!function(e){e.TEXT="text",e.JSON="json"}(dr||(dr={}));class hr extends Error{constructor(e,t,n,r,i){super(e),this.message=e,this.status=t,this.statusText=n,this.body=r,this.url=i,this.name="HttpResponse"}}class pr extends Error{constructor(e){super(e),this.message=e,this.name="HttpRequestFailed"}}var fr=n(70794),mr=n(4118);var gr;!function(e){e.GET_BAKING_RIGHTS="getBakingRights",e.GET_BALLOTS="getBallots",e.GET_BALLOT_LIST="getBallotList",e.GET_BIG_MAP_KEY="getBigMapKey",e.GET_BIG_MAP_EXPR="getBigMapExpr",e.GET_BLOCK_HASH="getBlockHash",e.GET_BLOCK="getBlock",e.GET_BLOCK_HEADER="getBlockHeader",e.GET_BLOCK_METADATA="getBlockMetadata",e.GET_BALANCE="getBalance",e.GET_CHAIN_ID="getChainId",e.GET_CONSTANTS="getConstants",e.GET_CONTRACT="getContract",e.GET_CURRENT_PERIOD="getCurrentPeriod",e.GET_CURRENT_PROPOSAL="getCurrentProposal",e.GET_CURRENT_QUORUM="getCurrentQuorum",e.GET_DELEGATE="getDelegate",e.GET_DELEGATES="getDelegates",e.GET_ENDORSING_RIGHTS="getEndorsingRights",e.GET_ENTRYPOINTS="getEntrypoints",e.GET_LIVE_BLOCKS="getLiveBlocks",e.GET_MANAGER_KEY="getManagerKey",e.GET_NORMALIZED_SCRIPT="getNormalizedScript",e.GET_PROPOSALS="getProposals",e.GET_PROTOCOLS="getProtocols",e.GET_SAPLING_DIFF_BY_CONTRACT="getSaplingDiffByContract",e.GET_SAPLING_DIFF_BY_ID="getSaplingDiffById",e.GET_SCRIPT="getScript",e.GET_STORAGE="getStorage",e.GET_SUCCESSOR_PERIOD="getSuccessorPeriod",e.GET_TX_ROLLUP_INBOX="getTxRollupInbox",e.GET_TX_ROLLUP_STATE="getTxRollupState",e.GET_VOTES_LISTINGS="getVotesListings",e.PACK_DATA="packData"}(gr||(gr={}));var Er,vr,yr;!function(e){e.TOO_LARGE="too large"}(Er||(Er={})),function(e){e.BAKING_REWARDS="baking rewards",e.REWARDS="rewards",e.FEES="fees",e.DEPOSITS="deposits",e.LEGACY_REWARDS="legacy_rewards",e.LEGACY_FEES="legacy_fees",e.LEGACY_DEPOSITS="legacy_deposits",e.BLOCK_FEES="block fees",e.NONCE_REVELATION_REWARDS="nonce revelation rewards",e.DOUBLE_SIGNING_EVIDENCE_REWARDS="double signing evidence rewards",e.ENDORSING_REWARDS="endorsing rewards",e.BAKING_BONUSES="baking bonuses",e.STORAGE_FEES="storage fees",e.PUNISHMENTS="punishments",e.LOST_ENDORSING_REWARDS="lost endorsing rewards",e.SUBSIDY="subsidy",e.BURNED="burned",e.COMMITMENT="commitment",e.BOOTSTRAP="bootstrap",e.INVOICE="invoice",e.MINTED="minted",e.TX_ROLLUP_REJECTION_REWARDS="tx_rollup_rejection_rewards",e.TX_ROLLUP_REJECTION_PUNISHMENTS="tx_rollup_rejection_punishments",e.BONDS="bonds"}(vr||(vr={})),function(e){e.ORIGINATION="origination",e.DELEGATION="delegation",e.REVEAL="reveal",e.TRANSACTION="transaction",e.ACTIVATION="activate_account",e.ENDORSEMENT="endorsement",e.PREENDORSEMENT="preendorsement",e.SET_DEPOSITS_LIMIT="set_deposits_limit",e.DOUBLE_PREENDORSEMENT_EVIDENCE="double_preendorsement_evidence",e.ENDORSEMENT_WITH_SLOT="endorsement_with_slot",e.SEED_NONCE_REVELATION="seed_nonce_revelation",e.DOUBLE_ENDORSEMENT_EVIDENCE="double_endorsement_evidence",e.DOUBLE_BAKING_EVIDENCE="double_baking_evidence",e.PROPOSALS="proposals",e.BALLOT="ballot",e.FAILING_NOOP="failing_noop",e.REGISTER_GLOBAL_CONSTANT="register_global_constant",e.TX_ROLLUP_ORIGINATION="tx_rollup_origination",e.TX_ROLLUP_SUBMIT_BATCH="tx_rollup_submit_batch",e.TX_ROLLUP_COMMIT="tx_rollup_commit",e.TX_ROLLUP_RETURN_BOND="tx_rollup_return_bond",e.TX_ROLLUP_FINALIZE_COMMITMENT="tx_rollup_finalize_commitment",e.TX_ROLLUP_REMOVE_COMMITMENT="tx_rollup_remove_commitment",e.TX_ROLLUP_REJECTION="tx_rollup_rejection",e.TX_ROLLUP_DISPATCH_TICKETS="tx_rollup_dispatch_tickets",e.TRANSFER_TICKET="transfer_ticket",e.INCREASE_PAID_STORAGE="increase_paid_storage",e.VDF_REVELATION="vdf_revelation",e.EVENT="event"}(yr||(yr={}));var Ar=function(e,t){return Ar=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},Ar(e,t)};function Tr(e,t){function n(){this.constructor=e}Ar(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function br(e){return"function"==typeof e}var Sr=!1,wr={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){e&&(new Error).stack;Sr=e},get useDeprecatedSynchronousErrorHandling(){return Sr}};function Rr(e){setTimeout((function(){throw e}),0)}var _r={closed:!0,next:function(e){},error:function(e){if(wr.useDeprecatedSynchronousErrorHandling)throw e;Rr(e)},complete:function(){}},Or=function(){return Array.isArray||function(e){return e&&"number"==typeof e.length}}();var Nr=function(){function e(e){return Error.call(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e}(),Pr=function(){function e(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}return e.prototype.unsubscribe=function(){var t;if(!this.closed){var n,r=this,i=r._parentOrParents,s=r._ctorUnsubscribe,o=r._unsubscribe,a=r._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,i instanceof e)i.remove(this);else if(null!==i)for(var c=0;c<i.length;++c){i[c].remove(this)}if(br(o)){s&&(this._unsubscribe=void 0);try{o.call(this)}catch(d){t=d instanceof Nr?Ir(d.errors):[d]}}if(Or(a)){c=-1;for(var l=a.length;++c<l;){var u=a[c];if(null!==(n=u)&&"object"==typeof n)try{u.unsubscribe()}catch(d){t=t||[],d instanceof Nr?t=t.concat(Ir(d.errors)):t.push(d)}}}if(t)throw new Nr(t)}},e.prototype.add=function(t){var n=t;if(!t)return e.EMPTY;switch(typeof t){case"function":n=new e(t);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof e)){var r=n;(n=new e)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}var i=n._parentOrParents;if(null===i)n._parentOrParents=this;else if(i instanceof e){if(i===this)return n;n._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return n;i.push(this)}var s=this._subscriptions;return null===s?this._subscriptions=[n]:s.push(n),n},e.prototype.remove=function(e){var t=this._subscriptions;if(t){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}},e.EMPTY=function(e){return e.closed=!0,e}(new e),e}();function Ir(e){return e.reduce((function(e,t){return e.concat(t instanceof Nr?t.errors:t)}),[])}var xr=function(){return"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),Cr=function(e){function t(n,r,i){var s=e.call(this)||this;switch(s.syncErrorValue=null,s.syncErrorThrown=!1,s.syncErrorThrowable=!1,s.isStopped=!1,arguments.length){case 0:s.destination=_r;break;case 1:if(!n){s.destination=_r;break}if("object"==typeof n){n instanceof t?(s.syncErrorThrowable=n.syncErrorThrowable,s.destination=n,n.add(s)):(s.syncErrorThrowable=!0,s.destination=new kr(s,n));break}default:s.syncErrorThrowable=!0,s.destination=new kr(s,n,r,i)}return s}return Tr(t,e),t.prototype[xr]=function(){return this},t.create=function(e,n,r){var i=new t(e,n,r);return i.syncErrorThrowable=!1,i},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this},t}(Pr),kr=function(e){function t(t,n,r,i){var s,o=e.call(this)||this;o._parentSubscriber=t;var a=o;return br(n)?s=n:n&&(s=n.next,r=n.error,i=n.complete,n!==_r&&(br((a=Object.create(n)).unsubscribe)&&o.add(a.unsubscribe.bind(a)),a.unsubscribe=o.unsubscribe.bind(o))),o._context=a,o._next=s,o._error=r,o._complete=i,o}return Tr(t,e),t.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;wr.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},t.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber,n=wr.useDeprecatedSynchronousErrorHandling;if(this._error)n&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):Rr(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;Rr(e)}}},t.prototype.complete=function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var n=function(){return e._complete.call(e._context)};wr.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(n){if(this.unsubscribe(),wr.useDeprecatedSynchronousErrorHandling)throw n;Rr(n)}},t.prototype.__tryOrSetError=function(e,t,n){if(!wr.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(r){return wr.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=r,e.syncErrorThrown=!0,!0):(Rr(r),!0)}return!1},t.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},t}(Cr);var Lr,Dr=function(){function e(e,t){this.count=e,this.source=t}return e.prototype.call=function(e,t){return t.subscribe(new Mr(e,this.count,this.source))},e}(),Mr=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.count=n,i.source=r,i}return Tr(t,e),t.prototype.error=function(t){if(!this.isStopped){var n=this.source,r=this.count;if(0===r)return e.prototype.error.call(this,t);r>-1&&(this.count=r-1),n.subscribe(this._unsubscribeAndRecycle())}},t}(Cr),Ur=n(35035),Br=n.n(Ur),Kr=n(48764).Buffer;class jr extends Error{constructor(e){super(`The map type '${e}' is invalid`),this.mapType=e,this.name="InvalidMapTypeError"}}const Hr=Symbol.for("taquito-michelson-map-type-symbol");class Gr extends Error{constructor(e,t,n){super(`${n} not compliant with underlying michelson type`),this.value=e,this.type=t,this.name="MapTypecheckError"}}class Vr{constructor(e){this.valueMap=new Map,this.keyMap=new Map,this[Lr]=!0,e&&this.setType(e)}static isMichelsonMap(e){return e&&!0===e[Hr]}setType(e){if(!("args"in(t=e))||!Array.isArray(t.args)||2!==t.args.length)throw new jr(e.toString());var t;this.keySchema=new Ss(e.args[0]),this.valueSchema=new Ss(e.args[1])}removeType(){this.keySchema=void 0,this.valueSchema=void 0}static fromLiteral(e,t){const n=new Vr(t);return Object.keys(e).forEach((t=>{n.set(t,e[t])})),n}typecheckKey(e){return!this.keySchema||this.keySchema.Typecheck(e)}typecheckValue(e){return!this.valueSchema||this.valueSchema.Typecheck(e)}assertTypecheckValue(e){if(!this.typecheckValue(e))throw new Gr(e,this.valueSchema,"value")}assertTypecheckKey(e){if(!this.typecheckKey(e))throw new Gr(e,this.keySchema,"key")}serializeDeterministically(e){return Br()(e)}*keys(){for(const[e]of this.entries())yield e}*values(){for(const[,e]of this.entries())yield e}*entries(){for(const e of this.valueMap.keys())yield[this.keyMap.get(e),this.valueMap.get(e)]}get(e){this.assertTypecheckKey(e);const t=this.serializeDeterministically(e);return this.valueMap.get(t)}set(e,t){this.assertTypecheckKey(e),this.assertTypecheckValue(t);const n=this.serializeDeterministically(e);this.keyMap.set(n,e),this.valueMap.set(n,t)}delete(e){this.assertTypecheckKey(e),this.keyMap.delete(this.serializeDeterministically(e)),this.valueMap.delete(this.serializeDeterministically(e))}has(e){this.assertTypecheckKey(e);const t=this.serializeDeterministically(e);return this.keyMap.has(t)&&this.valueMap.has(t)}clear(){this.keyMap.clear(),this.valueMap.clear()}get size(){return this.keyMap.size}forEach(e){for(const[t,n]of this.entries())e(n,t,this)}}Lr=Hr;class Fr extends Error{constructor(e,t,n){super(),this.value=e,this.token=t,this.name="ValidationError";const r=this.token.annot(),i=r?`[${r}] `:"";this.message=`${i}${n}`}}class qr{constructor(e,t,n){this.val=e,this.idx=t,this.fac=n,this.createToken=this.fac}typeWithoutAnnotations(){const e=t=>{if("object"==typeof t){if(Array.isArray(t)){return t.map((t=>e(t)))}const n=t;return n.args?{prim:n.prim,args:n.args.map((t=>e(t)))}:{prim:n.prim}}return t};return(t=this.val).args?{prim:t.prim,args:t.args.map((t=>e(t)))}:{prim:t.prim};var t}annot(){return(Array.isArray(this.val.annots)&&this.val.annots.length>0?this.val.annots[0]:String(this.idx)).replace(/(%|:)(_Liq_entry_)?/,"")}hasAnnotations(){return Array.isArray(this.val.annots)&&this.val.annots.length}get tokenVal(){return this.val}ExtractSignature(){return[[this.ExtractSchema()]]}}class Qr extends qr{compare(e,t){return e===t?0:e<t?-1:1}}class Wr extends Fr{constructor(e,t,n){super(e,t,n),this.value=e,this.token=t,this.name="BigMapValidationError"}}class Yr extends qr{constructor(e,t,n){super(e,t,n),this.val=e,this.idx=t,this.fac=n}get ValueSchema(){return this.createToken(this.val.args[1],0)}get KeySchema(){return this.createToken(this.val.args[0],0)}ExtractSchema(){return{big_map:{key:this.KeySchema.ExtractSchema(),value:this.ValueSchema.ExtractSchema()}}}generateSchema(){return{__michelsonType:Yr.prim,schema:{key:this.KeySchema.generateSchema(),value:this.ValueSchema.generateSchema()}}}isValid(e){return Vr.isMichelsonMap(e)?null:new Wr(e,this,"Value must be a MichelsonMap")}objLitToMichelsonMap(e){return e instanceof Vr?e:"object"==typeof e?0===Object.keys(e).length?new Vr:Vr.fromLiteral(e):e}Encode(e){const t=this.objLitToMichelsonMap(e.pop()),n=this.isValid(t);if(n)throw n;return Array.from(t.keys()).sort(((e,t)=>this.KeySchema.compare(e,t))).map((e=>({prim:"Elt",args:[this.KeySchema.EncodeObject(e),this.ValueSchema.EncodeObject(t.get(e))]})))}EncodeObject(e,t){const n=this.objLitToMichelsonMap(e),r=this.isValid(n);if(r)throw r;return t&&t[Yr.prim]?t[Yr.prim](n,this.val):Array.from(n.keys()).sort(((e,t)=>this.KeySchema.compare(e,t))).map((e=>({prim:"Elt",args:[this.KeySchema.EncodeObject(e),this.ValueSchema.EncodeObject(n.get(e))]})))}Execute(e,t){if(t&&t[Yr.prim])return t[Yr.prim](e,this.val);if(Array.isArray(e)){const t=new Vr(this.val);return e.forEach((e=>{t.set(this.KeySchema.ToKey(e.args[0]),this.ValueSchema.Execute(e.args[1]))})),t}if("int"in e)return e.int;throw new Wr(e,this,`Big map is expecting either an array (Athens) or an object with an int property (Babylon). Got ${JSON.stringify(e)}`)}findAndReturnTokens(e,t){return Yr.prim===e&&t.push(this),this.KeySchema.findAndReturnTokens(e,t),this.ValueSchema.findAndReturnTokens(e,t),t}}Yr.prim="big_map";class zr extends Error{constructor(e){super(e),this.message=e,this.name="OrTokenDecodingError"}}class Zr extends Qr{constructor(e,t,n){super(e,t,n),this.val=e,this.idx=t,this.fac=n}Encode(e){const t=e[e.length-1],n=this.createToken(this.val.args[0],this.idx);let r=1;n instanceof Zr&&(r=Object.keys(n.ExtractSchema()).length);const i=this.createToken(this.val.args[1],this.idx+r);if(String(n.annot())!==String(t)||n instanceof Zr){if(String(i.annot())!==String(t)||i instanceof Zr){if(n instanceof Zr){const t=n.Encode(e);if(t)return{prim:"Left",args:[t]}}if(i instanceof Zr){const t=i.Encode(e);if(t)return{prim:"Right",args:[t]}}return null}return e.pop(),{prim:"Right",args:[i.Encode(e)]}}return e.pop(),{prim:"Left",args:[n.Encode(e)]}}ExtractSignature(){const e=this.createToken(this.val.args[0],this.idx);let t=1;e instanceof Zr&&(t=Object.keys(e.ExtractSchema()).length);const n=this.createToken(this.val.args[1],this.idx+t),r=[];if(e instanceof Zr)r.push(...e.ExtractSignature());else for(const i of e.ExtractSignature())r.push([e.annot(),...i]);if(n instanceof Zr)r.push(...n.ExtractSignature());else for(const i of n.ExtractSignature())r.push([n.annot(),...i]);return r}EncodeObject(e,t){const n=Object.keys(e)[0],r=this.createToken(this.val.args[0],this.idx);let i=1;r instanceof Zr&&(i=Object.keys(r.ExtractSchema()).length);const s=this.createToken(this.val.args[1],this.idx+i);if(String(r.annot())!==String(n)||r instanceof Zr){if(String(s.annot())!==String(n)||s instanceof Zr){if(r instanceof Zr){const n=r.EncodeObject(e,t);if(n)return{prim:"Left",args:[n]}}if(s instanceof Zr){const n=s.EncodeObject(e,t);if(n)return{prim:"Right",args:[n]}}return null}return{prim:"Right",args:[s.EncodeObject(e[n],t)]}}return{prim:"Left",args:[r.EncodeObject(e[n],t)]}}Execute(e,t){const n=this.createToken(this.val.args[0],this.idx);let r=1;n instanceof Zr&&(r=Object.keys(n.ExtractSchema()).length);const i=this.createToken(this.val.args[1],this.idx+r);if("Right"===e.prim)return i instanceof Zr?i.Execute(e.args[0],t):{[i.annot()]:i.Execute(e.args[0],t)};if("Left"===e.prim)return n instanceof Zr?n.Execute(e.args[0],t):{[n.annot()]:n.Execute(e.args[0],t)};throw new zr(`Was expecting Left or Right prim but got: ${e.prim}`)}traversal(e,t,n){const r=this.createToken(this.val.args[0],this.idx);let i,s=1;r instanceof Zr&&!r.hasAnnotations()?(i=e(r),s=Object.keys(r.ExtractSchema()).length):i={[r.annot()]:e(r)};const o=this.createToken(this.val.args[1],this.idx+s);let a;a=o instanceof Zr&&!o.hasAnnotations()?t(o):{[o.annot()]:t(o)};return n(i,a)}ExtractSchema(){return this.traversal((e=>e.ExtractSchema()),(e=>e.ExtractSchema()),((e,t)=>Object.assign(Object.assign({},e),t)))}generateSchema(){return{__michelsonType:Zr.prim,schema:this.traversal((e=>e instanceof Zr&&!e.hasAnnotations()?e.generateSchema().schema:e.generateSchema()),(e=>e instanceof Zr&&!e.hasAnnotations()?e.generateSchema().schema:e.generateSchema()),((e,t)=>Object.assign(Object.assign({},e),t)))}}findToken(e){const t=this.createToken(this.val.args[0],this.idx);let n=1;t instanceof Zr&&(n=Object.keys(t.ExtractSchema()).length);const r=this.createToken(this.val.args[1],this.idx+n);if(String(t.annot())===String(e)&&!(t instanceof Zr)&&t instanceof Qr)return t;if(String(r.annot())===String(e)&&!(r instanceof Zr)&&r instanceof Qr)return r;if(t instanceof Zr){const n=t.findToken(e);if(n)return n}if(r instanceof Zr){const t=r.findToken(e);if(t)return t}return null}compare(e,t){const n=Object.keys(e)[0];if(n!==Object.keys(t)[0]){return JSON.stringify(this.EncodeObject(e))<JSON.stringify(this.EncodeObject(t))?-1:1}{const r=this.findToken(n);if(r instanceof Qr)return r.compare(e[n],t[n])}}ToKey(e){return this.Execute(e)}ToBigMapKey(e){return{key:this.EncodeObject(e),type:this.typeWithoutAnnotations()}}findAndReturnTokens(e,t){return Zr.prim===e&&t.push(this),this.traversal((n=>n.findAndReturnTokens(e,t)),(n=>n.findAndReturnTokens(e,t)),((e,t)=>Object.assign(Object.assign({},e),t))),t}}Zr.prim="or";class Jr extends Error{constructor(e){super(e),this.message=e,this.name="TokenArgumentValidationError"}}class Xr extends Error{constructor(e,t){super(`Tokens ${e} and ${t} are not comparable`),this.val1=e,this.val2=t,this.name="TokenComparisonError"}}function $r(e,t=ei.prim){if(Array.isArray(e))return $r({prim:t,args:e},t);if(void 0===e.args)throw new Jr("Encountered an invalid PairToken with no arguments, a pair must have two or more arguments");return e.args.length>2?[e.args[0],{prim:t,args:e.args.slice(1)}]:[e.args[0],e.args[1]]}class ei extends Qr{constructor(e,t,n){super(Array.isArray(e)?{prim:ei.prim,args:e}:e.prim?e:{prim:ei.prim,args:e},t,n)}args(){return $r(this.val)}tokens(){let e=0;return this.args().map((t=>{const n=this.createToken(t,this.idx+e);return n instanceof ei?e+=Object.keys(n.ExtractSchema()).length:e++,n}))}Encode(e){return{prim:"Pair",args:this.tokens().map((t=>t.Encode(e)))}}ExtractSignature(){const e=this.args(),t=this.createToken(e[0],this.idx);let n=1;t instanceof Zr&&(n=Object.keys(t.ExtractSchema()).length);const r=this.createToken(e[1],this.idx+n),i=[];for(const s of t.ExtractSignature())for(const e of r.ExtractSignature())i.push([...s,...e]);return i}ToBigMapKey(e){return{key:this.EncodeObject(e),type:this.typeWithoutAnnotations()}}ToKey(e){return this.Execute(e)}EncodeObject(e,t){const[n,r]=this.tokens();let i,s;return i=n instanceof ei&&!n.hasAnnotations()?e:e[n.annot()],s=r instanceof ei&&!r.hasAnnotations()?e:e[r.annot()],{prim:"Pair",args:[n.EncodeObject(i,t),r.EncodeObject(s,t)]}}traversal(e,t){const n=this.args(),r=this.createToken(n[0],this.idx);let i,s=1;r instanceof ei&&(s=Object.keys(r.ExtractSchema()).length),i=r instanceof ei&&!r.hasAnnotations()?e(r):{[r.annot()]:e(r)};const o=this.createToken(n[1],this.idx+s);let a;a=o instanceof ei&&!o.hasAnnotations()?t(o):{[o.annot()]:t(o)};return Object.assign(Object.assign({},i),a)}Execute(e,t){const n=$r(e,"Pair");return this.traversal((e=>e.Execute(n[0],t)),(e=>e.Execute(n[1],t)))}ExtractSchema(){return this.traversal((e=>e.ExtractSchema()),(e=>e.ExtractSchema()))}generateSchema(){return{__michelsonType:ei.prim,schema:this.traversal((e=>e instanceof ei&&!e.hasAnnotations()?e.generateSchema().schema:e.generateSchema()),(e=>e instanceof ei&&!e.hasAnnotations()?e.generateSchema().schema:e.generateSchema()))}}compare(e,t){const[n,r]=this.tokens(),i=(e,t)=>e instanceof ei&&!e.hasAnnotations()?t:t[e.annot()];if(n instanceof Qr&&r instanceof Qr){const s=n.compare(i(n,e),i(n,t));return 0===s?r.compare(i(r,e),i(r,t)):s}throw new Xr(e,t)}findAndReturnTokens(e,t){return ei.prim===e&&t.push(this),this.tokens().map((n=>n.findAndReturnTokens(e,t))),t}}ei.prim="pair";class ti extends Fr{constructor(e,t,n){super(e,t,n),this.value=e,this.token=t,this.name="NatValidationError"}}class ni extends Qr{constructor(e,t,n){super(e,t,n),this.val=e,this.idx=t,this.fac=n}Execute(e){return new fr.Z(e[Object.keys(e)[0]])}Encode(e){const t=e.pop(),n=this.isValid(t);if(n)throw n;return{int:new fr.Z(t).toFixed()}}isValid(e){const t=new fr.Z(e);return t.isNaN()?new ti(e,this,`Value is not a number: ${e}`):t.isNegative()?new ti(e,this,`Value cannot be negative: ${e}`):null}EncodeObject(e,t){const n=this.isValid(e);if(n)throw n;return t&&t[ni.prim]?t[ni.prim](e):{int:new fr.Z(e).toFixed()}}ExtractSchema(){return ni.prim}generateSchema(){return{__michelsonType:ni.prim,schema:ni.prim}}ToBigMapKey(e){return{key:{int:String(e)},type:{prim:ni.prim}}}ToKey({int:e}){return new fr.Z(e)}compare(e,t){const n=Number(e),r=Number(t);return n===r?0:n<r?-1:1}findAndReturnTokens(e,t){return ni.prim===e&&t.push(this),t}}ni.prim="nat";class ri extends Qr{constructor(e,t,n){super(e,t,n),this.val=e,this.idx=t,this.fac=n}Execute(e){return e[Object.keys(e)[0]]}ExtractSchema(){return ri.prim}generateSchema(){return{__michelsonType:ri.prim,schema:ri.prim}}Encode(e){return{string:e.pop()}}EncodeObject(e,t){return t&&t[ri.prim]?t[ri.prim](e):{string:e}}ToKey({string:e}){return e}ToBigMapKey(e){return{key:{string:e},type:{prim:ri.prim}}}findAndReturnTokens(e,t){return ri.prim===e&&t.push(this),t}}ri.prim="string";class ii extends Fr{constructor(e,t,n){super(e,t,n),this.value=e,this.token=t,this.name="AddressValidationError"}}class si extends Qr{constructor(e,t,n){super(e,t,n),this.val=e,this.idx=t,this.fac=n}ToBigMapKey(e){return{key:{bytes:(0,mr.aZ)(e)},type:{prim:"bytes"}}}isValid(e){return(0,mr.YN)(e)!==mr.nd.VALID?new ii(e,this,`Address is not valid: ${e}`):null}Encode(e){const t=e.pop(),n=this.isValid(t);if(n)throw n;return{string:t}}EncodeObject(e,t){const n=this.isValid(e);if(n)throw n;return t&&t[si.prim]?t[si.prim](e):{string:e}}Execute(e){if(e.string)return e.string;if(!e.bytes)throw new ii(e,this,`cannot be missing both string and bytes: ${e}`);return(0,mr.W0)(e.bytes)}ExtractSchema(){return si.prim}generateSchema(){return{__michelsonType:si.prim,schema:si.prim}}ToKey({bytes:e,string:t}){if(t)return t;if(!e)throw new ii({bytes:e,string:t},this,`cannot be missing both string and bytes ${{string:t,bytes:e}}`);return(0,mr.W0)(e)}compare(e,t){const n=e=>e.startsWith("tz"),r=n(e),i=n(t);return r&&!i?-1:i&&!r?1:super.compare(e,t)}findAndReturnTokens(e,t){return si.prim===e&&t.push(this),t}}si.prim="address";class oi extends Fr{constructor(e,t,n){super(e,t,n),this.value=e,this.token=t,this.name="MapValidationError"}}class ai extends qr{constructor(e,t,n){super(e,t,n),this.val=e,this.idx=t,this.fac=n}get ValueSchema(){return this.createToken(this.val.args[1],0)}get KeySchema(){return this.createToken(this.val.args[0],0)}isValid(e){return Vr.isMichelsonMap(e)?null:new oi(e,this,"Value must be a MichelsonMap")}Execute(e,t){const n=new Vr(this.val);return e.forEach((e=>{n.set(this.KeySchema.ToKey(e.args[0]),this.ValueSchema.Execute(e.args[1],t))})),n}objLitToMichelsonMap(e){return e instanceof Vr?e:"object"==typeof e?0===Object.keys(e).length?new Vr:Vr.fromLiteral(e):e}Encode(e){const t=this.objLitToMichelsonMap(e.pop()),n=this.isValid(t);if(n)throw n;return Array.from(t.keys()).sort(((e,t)=>this.KeySchema.compare(e,t))).map((e=>({prim:"Elt",args:[this.KeySchema.EncodeObject(e),this.ValueSchema.EncodeObject(t.get(e))]})))}EncodeObject(e,t){const n=this.objLitToMichelsonMap(e),r=this.isValid(n);if(r)throw r;return t&&t[ai.prim]?t[ai.prim](n):Array.from(n.keys()).sort(((e,t)=>this.KeySchema.compare(e,t))).map((e=>({prim:"Elt",args:[this.KeySchema.EncodeObject(e),this.ValueSchema.EncodeObject(n.get(e))]})))}ExtractSchema(){return{map:{key:this.KeySchema.ExtractSchema(),value:this.ValueSchema.ExtractSchema()}}}generateSchema(){return{__michelsonType:ai.prim,schema:{key:this.KeySchema.generateSchema(),value:this.ValueSchema.generateSchema()}}}findAndReturnTokens(e,t){return ai.prim===e&&t.push(this),this.KeySchema.findAndReturnTokens(e,t),this.ValueSchema.findAndReturnTokens(e,t),t}}ai.prim="map";class ci extends Qr{constructor(e,t,n){super(e,t,n),this.val=e,this.idx=t,this.fac=n}Execute(e){return"true"===String(e.prim).toLowerCase()}Encode(e){return{prim:e.pop()?"True":"False"}}EncodeObject(e,t){return t&&t[ci.prim]?t[ci.prim](e):{prim:e?"True":"False"}}ExtractSchema(){return ci.prim}generateSchema(){return{__michelsonType:ci.prim,schema:ci.prim}}ToBigMapKey(e){return{key:this.EncodeObject(e),type:{prim:ci.prim}}}ToKey(e){return this.EncodeObject(e)}compare(e,t){return e&&t||!e&&!t?0:e?1:-1}findAndReturnTokens(e,t){return ci.prim===e&&t.push(this),t}}ci.prim="bool";class li extends Fr{constructor(e,t,n){super(e,t,n),this.value=e,this.token=t,this.name="TxRollupL2AddressValidationError"}}class ui extends Qr{constructor(e,t,n){super(e,t,n),this.val=e,this.idx=t,this.fac=n}ToBigMapKey(e){return{key:{bytes:(0,mr.CX)(e)},type:{prim:"bytes"}}}isValid(e){if((0,mr.YN)(e)!==mr.nd.VALID)throw new li(e,this,`tx_rollup_l2_address is not valid: ${e}`);return null}Encode(e){const t=e.pop();if(!t)throw new li(t,this,`arg missing to encode: this -> "${t}"`);return this.isValid(t),{string:t}}EncodeObject(e,t){return this.isValid(e),t&&t[ui.prim]?t[ui.prim](e):{string:e}}Execute(e){if(e.string)return e.string;if(!e.bytes)throw new li(e,this,`value cannot be missing string and byte value. must have one ${JSON.stringify(e)}`);return(0,mr.IJ)(e.bytes)}ExtractSchema(){return ui.prim}generateSchema(){return{__michelsonType:ui.prim,schema:ui.prim}}ToKey({bytes:e,string:t}){if(t)return t;if(!e)throw new li(e,this,`value cannot be missing string and byte value. must have one: bytes = ${e}`);return(0,mr.IJ)(e)}findAndReturnTokens(e,t){return ui.prim===e&&t.push(this),t}}ui.prim="tx_rollup_l2_address";class di extends Fr{constructor(e,t,n){super(e,t,n),this.value=e,this.token=t,this.name="ContractValidationError"}}class hi extends qr{constructor(e,t,n){super(e,t,n),this.val=e,this.idx=t,this.fac=n}isValid(e){return(0,mr.YN)(e)!==mr.nd.VALID?new di(e,this,"Contract address is not valid"):null}Execute(e){if(e.string)return e.string;if(!e.bytes)throw new di(e,this,"must contain bytes or string");return(0,mr.W0)(e.bytes)}Encode(e){const t=e.pop(),n=this.isValid(t);if(n)throw n;return{string:t}}EncodeObject(e,t){const n=this.isValid(e);if(n)throw n;return t&&t[hi.prim]?t[hi.prim](e):{string:e}}ExtractSchema(){return hi.prim}generateSchema(){const e=this.createToken(this.val.args[0],0);return{__michelsonType:hi.prim,schema:{parameter:this.val.args[0]?e.generateSchema():{}}}}findAndReturnTokens(e,t){return hi.prim===e&&t.push(this),t}}hi.prim="contract";class pi extends Fr{constructor(e,t,n){super(e,t,n),this.value=e,this.token=t,this.name="ListValidationError"}}class fi extends qr{constructor(e,t,n){super(e,t,n),this.val=e,this.idx=t,this.fac=n}get valueSchema(){return this.createToken(this.val.args[0],this.idx)}isValid(e){return Array.isArray(e)?null:new pi(e,this,"Value must be an array")}Encode(e){const t=e.pop(),n=this.isValid(t);if(n)throw n;const r=this.createToken(this.val.args[0],0);return t.reduce(((e,t)=>[...e,r.EncodeObject(t)]),[])}Execute(e,t){const n=this.createToken(this.val.args[0],0),r=this.isValid(e);if(r)throw r;return e.reduce(((e,r)=>[...e,n.Execute(r,t)]),[])}EncodeObject(e,t){const n=this.createToken(this.val.args[0],0),r=this.isValid(e);if(r)throw r;return t&&t[fi.prim]?t[fi.prim](e):e.reduce(((e,t)=>[...e,n.EncodeObject(t)]),[])}ExtractSchema(){return{[fi.prim]:this.valueSchema.ExtractSchema()}}generateSchema(){return{__michelsonType:fi.prim,schema:this.valueSchema.generateSchema()}}findAndReturnTokens(e,t){return fi.prim===e&&t.push(this),this.createToken(this.val.args[0],this.idx).findAndReturnTokens(e,t),t}}fi.prim="list";class mi extends Fr{constructor(e,t,n){super(e,t,n),this.value=e,this.token=t,this.name="MutezValidationError"}}class gi extends Qr{constructor(e,t,n){super(e,t,n),this.val=e,this.idx=t,this.fac=n}Execute(e){return new fr.Z(e[Object.keys(e)[0]])}ExtractSchema(){return gi.prim}generateSchema(){return{__michelsonType:gi.prim,schema:gi.prim}}isValid(e){return new fr.Z(e).isNaN()?new mi(e,this,`Value is not a number: ${e}`):null}Encode(e){const t=e.pop(),n=this.isValid(t);if(n)throw n;return{int:String(t).toString()}}EncodeObject(e,t){const n=this.isValid(e);if(n)throw n;return t&&t[gi.prim]?t[gi.prim](e):{int:String(e).toString()}}ToBigMapKey(e){return{key:{int:String(e)},type:{prim:gi.prim}}}ToKey({int:e}){return e}compare(e,t){const n=Number(e),r=Number(t);return n===r?0:n<r?-1:1}findAndReturnTokens(e,t){return gi.prim===e&&t.push(this),t}}gi.prim="mutez";class Ei extends Fr{constructor(e,t,n){super(e,t,n),this.value=e,this.token=t,this.name="BytesValidationError"}}class vi extends Qr{constructor(e,t,n){super(e,t,n),this.val=e,this.idx=t,this.fac=n}ToBigMapKey(e){return{key:{bytes:e},type:{prim:vi.prim}}}isValid(e){return"string"==typeof e&&/^[0-9a-fA-F]*$/.test(e)&&e.length%2==0?null:new Ei(e,this,`Invalid bytes: ${e}`)}convertUint8ArrayToHexString(e){return e.constructor===Uint8Array?Kr.from(e).toString("hex"):e}Encode(e){let t=e.pop();t=(0,mr.MT)(this.convertUint8ArrayToHexString(t));const n=this.isValid(t);if(n)throw n;return{bytes:String(t).toString()}}EncodeObject(e,t){"string"==typeof(e=this.convertUint8ArrayToHexString(e))&&(e=(0,mr.MT)(e));const n=this.isValid(e);if(n)throw n;return t&&t[vi.prim]?t[vi.prim](e):{bytes:String(e).toString()}}Execute(e){return e.bytes}ExtractSchema(){return vi.prim}generateSchema(){return{__michelsonType:vi.prim,schema:vi.prim}}ToKey({bytes:e,string:t}){return t||e}findAndReturnTokens(e,t){return vi.prim===e&&t.push(this),t}}vi.prim="bytes";class yi extends Qr{constructor(e,t,n){super(e,t,n),this.val=e,this.idx=t,this.fac=n}subToken(){return this.createToken(this.val.args[0],this.idx)}schema(){return this.createToken(this.val.args[0],0)}annot(){return Array.isArray(this.val.annots)?super.annot():this.createToken(this.val.args[0],this.idx).annot()}Encode(e){const t=e;return null==t?{prim:"None"}:!Array.isArray(t)||void 0!==t[t.length-1]&&null!==t[t.length-1]?{prim:"Some",args:[this.schema().Encode(e)]}:(t.pop(),{prim:"None"})}EncodeObject(e,t){const n=e;return null==n?{prim:"None"}:{prim:"Some",args:[this.schema().EncodeObject(n,t)]}}Execute(e,t){return"None"===e.prim?null:this.schema().Execute(e.args[0],t)}ExtractSchema(){return this.schema().ExtractSchema()}generateSchema(){return{__michelsonType:yi.prim,schema:this.schema().generateSchema()}}ExtractSignature(){return[...this.schema().ExtractSignature(),[]]}get KeySchema(){return this.schema()}compare(e,t){return e?t?this.KeySchema.compare(e,t):1:-1}ToKey(e){return this.Execute(e)}ToBigMapKey(e){return{key:this.EncodeObject(e),type:this.typeWithoutAnnotations()}}findAndReturnTokens(e,t){return yi.prim===e&&t.push(this),this.subToken().findAndReturnTokens(e,t),t}}yi.prim="option";class Ai extends Qr{constructor(e,t,n){super(e,t,n),this.val=e,this.idx=t,this.fac=n}Execute(e){return e.string&&/^\d+$/.test(e.string)?new Date(1e3*Number(e.string)).toISOString():e.string?new Date(e.string).toISOString():e.int?new Date(1e3*Number(e.int)).toISOString():void 0}Encode(e){return{string:e.pop()}}EncodeObject(e,t){return t&&t[Ai.prim]?t[Ai.prim](e):{string:e}}ExtractSchema(){return Ai.prim}generateSchema(){return{__michelsonType:Ai.prim,schema:Ai.prim}}ToKey({string:e}){return e}ToBigMapKey(e){return{key:{string:e},type:{prim:Ai.prim}}}findAndReturnTokens(e,t){return Ai.prim===e&&t.push(this),t}}Ai.prim="timestamp";class Ti extends Fr{constructor(e,t,n){super(e,t,n),this.value=e,this.token=t,this.name="IntValidationError"}}class bi extends Qr{constructor(e,t,n){super(e,t,n),this.val=e,this.idx=t,this.fac=n}Execute(e){return new fr.Z(e[Object.keys(e)[0]])}ExtractSchema(){return bi.prim}generateSchema(){return{__michelsonType:bi.prim,schema:bi.prim}}isValid(e){return new fr.Z(e).isNaN()?new Ti(e,this,`Value is not a number: ${e}`):null}Encode(e){const t=e.pop(),n=this.isValid(t);if(n)throw n;return{int:new fr.Z(t).toFixed()}}EncodeObject(e,t){const n=this.isValid(e);if(n)throw n;return t&&t[bi.prim]?t[bi.prim](e):{int:new fr.Z(e).toFixed()}}ToBigMapKey(e){return{key:{int:String(e)},type:{prim:bi.prim}}}ToKey({int:e}){return e}compare(e,t){const n=Number(e),r=Number(t);return n===r?0:n<r?-1:1}findAndReturnTokens(e,t){return bi.prim===e&&t.push(this),t}}bi.prim="int";class Si extends Qr{constructor(e,t,n){super(e,t,n),this.val=e,this.idx=t,this.fac=n}Encode(e){return e.pop(),{prim:"Unit"}}EncodeObject(e,t){return t&&t[Si.prim]?t[Si.prim](e):{prim:"Unit"}}Execute(e){return ws}ExtractSchema(){return Si.prim}generateSchema(){return{__michelsonType:Si.prim,schema:Si.prim}}compare(e,t){return 0}ToKey(e){return ws}ToBigMapKey(e){return{key:{prim:"Unit"},type:{prim:Si.prim}}}findAndReturnTokens(e,t){return Si.prim===e&&t.push(this),t}}Si.prim="unit";class wi extends Fr{constructor(e,t,n){super(e,t,n),this.value=e,this.token=t,this.name="KeyValidationError"}}class Ri extends Qr{constructor(e,t,n){super(e,t,n),this.val=e,this.idx=t,this.fac=n}Execute(e){return e.string?e.string:(0,mr.z)(e.bytes)}isValid(e){return(0,mr.z8)(e)!==mr.nd.VALID?new wi(e,this,"Key is not valid"):null}Encode(e){const t=e.pop(),n=this.isValid(t);if(n)throw n;return{string:t}}EncodeObject(e,t){const n=this.isValid(e);if(n)throw n;return t&&t[Ri.prim]?t[Ri.prim](e):{string:e}}ExtractSchema(){return Ri.prim}generateSchema(){return{__michelsonType:Ri.prim,schema:Ri.prim}}ToKey(e){return this.Execute(e)}ToBigMapKey(e){return{key:{string:e},type:{prim:Ri.prim}}}compare(e,t){const n=this.getPrefix(e),r=this.getPrefix(t);if(n===mr.oT.EDPK&&r!==mr.oT.EDPK)return-1;if(n===mr.oT.SPPK&&r!==mr.oT.SPPK)return r===mr.oT.EDPK?1:-1;if(n===mr.oT.P2PK){if(r!==mr.oT.P2PK)return 1;const n=this.getP256PublicKeyComparableBytes(e),i=this.getP256PublicKeyComparableBytes(t);return Kr.compare(n,i)}return super.compare(e,t)}getPrefix(e){return e.substring(0,4)}getP256PublicKeyComparableBytes(e){return(0,mr.sA)(e,mr.O4[mr.oT.P2PK]).slice(1)}findAndReturnTokens(e,t){return Ri.prim===e&&t.push(this),t}}Ri.prim="key";class _i extends Fr{constructor(e,t,n){super(e,t,n),this.value=e,this.token=t,this.name="KeyHashValidationError"}}class Oi extends Qr{constructor(e,t,n){super(e,t,n),this.val=e,this.idx=t,this.fac=n}Execute(e){return e.string?e.string:(0,mr.aP)(e.bytes)}isValid(e){return(0,mr.vO)(e)!==mr.nd.VALID?new _i(e,this,`KeyHash is not valid: ${e}`):null}Encode(e){const t=e.pop(),n=this.isValid(t);if(n)throw n;return{string:t}}EncodeObject(e,t){const n=this.isValid(e);if(n)throw n;return t&&t[Oi.prim]?t[Oi.prim](e):{string:e}}ExtractSchema(){return Oi.prim}generateSchema(){return{__michelsonType:Oi.prim,schema:Oi.prim}}ToKey({string:e,bytes:t}){return e||(0,mr.aP)(t)}ToBigMapKey(e){return{key:{string:e},type:{prim:Oi.prim}}}findAndReturnTokens(e,t){return Oi.prim===e&&t.push(this),t}}Oi.prim="key_hash";class Ni extends Fr{constructor(e,t,n){super(e,t,n),this.value=e,this.token=t,this.name="SignatureValidationError"}}class Pi extends Qr{constructor(e,t,n){super(e,t,n),this.val=e,this.idx=t,this.fac=n}Execute(e){return e.string?e.string:e.bytes}isValid(e){return(0,mr.pB)(e)!==mr.nd.VALID?new Ni(e,this,"Signature is not valid"):null}Encode(e){const t=e.pop(),n=this.isValid(t);if(n)throw n;return{string:t}}EncodeObject(e,t){const n=this.isValid(e);if(n)throw n;return t&&t[Pi.prim]?t[Pi.prim](e):{string:e}}ExtractSchema(){return Pi.prim}generateSchema(){return{__michelsonType:Pi.prim,schema:Pi.prim}}ToKey(e){return this.Execute(e)}ToBigMapKey(e){return{key:{string:e},type:{prim:Pi.prim}}}findAndReturnTokens(e,t){return Pi.prim===e&&t.push(this),t}}Pi.prim="signature";class Ii extends qr{constructor(e,t,n){super(e,t,n),this.val=e,this.idx=t,this.fac=n}get paramSchema(){return this.createToken(this.val.args[0],this.idx)}get returnSchema(){return this.createToken(this.val.args[1],this.idx+1)}Execute(e){return e.string?e.string:e}Encode(e){return e.pop()}EncodeObject(e,t){return t&&t[Ii.prim]?t[Ii.prim](e):e}ExtractSchema(){return{[Ii.prim]:{parameters:this.paramSchema.ExtractSchema(),returns:this.returnSchema.ExtractSchema()}}}generateSchema(){return{__michelsonType:Ii.prim,schema:{parameters:this.paramSchema.generateSchema(),returns:this.returnSchema.generateSchema()}}}findAndReturnTokens(e,t){return Ii.prim===e&&t.push(this),this.createToken(this.val.args[0],this.idx).findAndReturnTokens(e,t),this.createToken(this.val.args[1],this.idx).findAndReturnTokens(e,t),t}}Ii.prim="lambda";class xi extends qr{constructor(e,t,n){super(e,t,n),this.val=e,this.idx=t,this.fac=n}Execute(e){return e.string}Encode(...e){return{string:e.pop()}}EncodeObject(e,t){return t&&t[xi.prim]?t[xi.prim](e):{string:e}}ExtractSchema(){return xi.prim}generateSchema(){return{__michelsonType:xi.prim,schema:xi.prim}}findAndReturnTokens(e,t){return xi.prim===e&&t.push(this),t}}xi.prim="operation";class Ci extends Fr{constructor(e,t,n){super(e,t,n),this.value=e,this.token=t,this.name="SetValidationError"}}class ki extends qr{constructor(e,t,n){super(e,t,n),this.val=e,this.idx=t,this.fac=n}get KeySchema(){return this.createToken(this.val.args[0],0)}isValid(e){return Array.isArray(e)?null:new Ci(e,this,"Value must be an array")}Encode(e){const t=e.pop(),n=this.isValid(t);if(n)throw n;return t.sort(((e,t)=>this.KeySchema.compare(e,t))).reduce(((e,t)=>[...e,this.KeySchema.EncodeObject(t)]),[])}Execute(e,t){return e.reduce(((e,n)=>[...e,this.KeySchema.Execute(n,t)]),[])}EncodeObject(e,t){const n=this.isValid(e);if(n)throw n;return t&&t[ki.prim]?t[ki.prim](e):e.sort(((e,t)=>this.KeySchema.compare(e,t))).reduce(((e,t)=>[...e,this.KeySchema.EncodeObject(t)]),[])}ExtractSchema(){return ki.prim}generateSchema(){return{__michelsonType:ki.prim,schema:this.KeySchema.generateSchema()}}findAndReturnTokens(e,t){return ki.prim===e&&t.push(this),this.KeySchema.findAndReturnTokens(e,t),t}}ki.prim="set";class Li extends Fr{constructor(e,t,n){super(e,t,n),this.value=e,this.token=t,this.name="ChainIDValidationError"}}class Di extends Qr{constructor(e,t,n){super(e,t,n),this.val=e,this.idx=t,this.fac=n}isValid(e){return(0,mr.VN)(e)!==mr.nd.VALID?new Li(e,this,"ChainID is not valid"):null}Execute(e){return e[Object.keys(e)[0]]}ExtractSchema(){return Di.prim}generateSchema(){return{__michelsonType:Di.prim,schema:Di.prim}}Encode(e){const t=e.pop(),n=this.isValid(t);if(n)throw n;return{string:t}}EncodeObject(e,t){const n=this.isValid(e);if(n)throw n;return t&&t[Di.prim]?t[Di.prim](e):{string:e}}ToKey({string:e}){return e}ToBigMapKey(e){return{key:{string:e},type:{prim:Di.prim}}}findAndReturnTokens(e,t){return Di.prim===e&&t.push(this),t}}Di.prim="chain_id";class Mi extends Error{constructor(){super("Tickets cannot be sent to the blockchain; they are created on-chain"),this.name="TicketEncodeError"}}const Ui={prim:"contract"},Bi={prim:"int"};class Ki extends qr{constructor(e,t,n){super(e,t,n),this.val=e,this.idx=t,this.fac=n}get valueToken(){return this.createToken(this.val.args[0],this.idx)}Encode(e){throw new Mi}EncodeObject(e,t){if(t&&t[Ki.prim])return t[Ki.prim](e,this.val);throw new Mi}Execute(e,t){if(t&&t[Ki.prim])return t[Ki.prim](e,this.val);const n=this.createToken(Ui,this.idx),r=this.valueToken,i=this.createToken(Bi,this.idx);return void 0===e.args[2]&&void 0!==e.args[1].args?{ticketer:n.Execute(e.args[0],t),value:r.Execute(e.args[1].args[0],t),amount:i.Execute(e.args[1].args[1],t)}:{ticketer:n.Execute(e.args[0],t),value:r.Execute(e.args[1],t),amount:i.Execute(e.args[2],t)}}ExtractSchema(){return{ticketer:hi.prim,value:this.valueToken.ExtractSchema(),amount:bi.prim}}generateSchema(){return{__michelsonType:Ki.prim,schema:{value:this.valueToken.generateSchema(),ticketer:{__michelsonType:hi.prim,schema:hi.prim},amount:{__michelsonType:bi.prim,schema:bi.prim}}}}findAndReturnTokens(e,t){return Ki.prim===e&&t.push(this),this.valueToken.findAndReturnTokens(e,t),t}}Ki.prim="ticket";class ji extends Fr{constructor(e,t,n){super(e,t,n),this.value=e,this.token=t,this.name="NeverTokenError"}}class Hi extends qr{constructor(e,t,n){super(e,t,n),this.val=e,this.idx=t,this.fac=n}Encode(e){const t=e.pop();throw new ji(t,this,"Assigning a value to the type never is forbidden.")}EncodeObject(e,t){if(t&&t[Hi.prim])return t[Hi.prim](e);throw new ji(e,this,"Assigning a value to the type never is forbidden.")}Execute(e){throw new ji(e,this,"There is no literal value for the type never.")}ExtractSchema(){return Hi.prim}generateSchema(){return{__michelsonType:Hi.prim,schema:Hi.prim}}findAndReturnTokens(e,t){return Hi.prim===e&&t.push(this),t}}Hi.prim="never";class Gi extends Fr{constructor(e,t,n){super(e,t,n),this.value=e,this.token=t,this.name="SaplingStateValidationError"}}class Vi extends qr{constructor(e,t,n){super(e,t,n),this.val=e,this.idx=t,this.fac=n}isValid(e){return"object"==typeof e&&0===Object.keys(e).length}Execute(e,t){if(t&&t[Vi.prim])return t[Vi.prim](e,this.val);if("int"in e)return e.int;throw new Gi(e,this,`Sapling state is expecting an object with an int property. Got ${JSON.stringify(e)}`)}Encode(e){const t=e.pop();if(this.isValid(t))return[];throw new Gi(t,this,`Invalid sapling_state. Received: ${t} while expecting: {}`)}EncodeObject(e,t){if(t&&t[Vi.prim])return t[Vi.prim](e);if(this.isValid(e))return[];throw new Gi(e,this,`Invalid sapling_state. Received: ${e} while expecting: {}`)}ExtractSchema(){return{[Vi.prim]:{"memo-size":Number(this.val.args[0].int)}}}generateSchema(){return{__michelsonType:Vi.prim,schema:{memoSize:this.val.args[0].int}}}findAndReturnTokens(e,t){return Vi.prim===e&&t.push(this),t}}Vi.prim="sapling_state";class Fi extends Fr{constructor(e,t,n){super(e,t,n),this.value=e,this.token=t,this.name="SaplingTransactionValidationError"}}class qi extends qr{constructor(e,t,n){super(e,t,n),this.val=e,this.idx=t,this.fac=n}Execute(e){throw new Fi(e,this,"There is no literal value for the sapling_transaction type.")}validateBytes(e){const t=/^(0x|0X)?([0-9a-fA-F]*$)/.exec(e);if(t&&t[2].length%2==0)return t[2];throw new Fi(e,this,`Invalid bytes: ${e}`)}convertUint8ArrayToHexString(e){return e.constructor===Uint8Array?Kr.from(e).toString("hex"):e}Encode(e){let t=e.pop();return t=this.validateBytes(this.convertUint8ArrayToHexString(t)),{bytes:String(t).toString()}}EncodeObject(e,t){return e=this.validateBytes(this.convertUint8ArrayToHexString(e)),t&&t[qi.prim]?t[qi.prim](e):{bytes:String(e).toString()}}ExtractSchema(){return{[qi.prim]:{"memo-size":Number(this.val.args[0].int)}}}generateSchema(){return{__michelsonType:qi.prim,schema:{memoSize:this.val.args[0].int}}}findAndReturnTokens(e,t){return qi.prim===e&&t.push(this),t}}qi.prim="sapling_transaction";class Qi extends Fr{constructor(e,t,n){super(e,t,n),this.value=e,this.token=t,this.name="SaplingTransactionDeprecatedValidationError"}}class Wi extends qr{constructor(e,t,n){super(e,t,n),this.val=e,this.idx=t,this.fac=n}Execute(e){throw new Qi(e,this,"There is no literal value for the sapling_transaction_deprecated type.")}validateBytes(e){const t=/^(0x|0X)?([0-9a-fA-F]*$)/.exec(e);if(t&&t[2].length%2==0)return t[2];throw new Qi(e,this,`Invalid bytes: ${e}`)}convertUint8ArrayToHexString(e){return e.constructor===Uint8Array?Kr.from(e).toString("hex"):e}Encode(e){let t=e.pop();return t=this.validateBytes(this.convertUint8ArrayToHexString(t)),{bytes:String(t).toString()}}EncodeObject(e,t){return e=this.validateBytes(this.convertUint8ArrayToHexString(e)),t&&t[Wi.prim]?t[Wi.prim](e):{bytes:String(e).toString()}}ExtractSchema(){return{[Wi.prim]:{"memo-size":Number(this.val.args[0].int)}}}generateSchema(){return{__michelsonType:Wi.prim,schema:{memoSize:this.val.args[0].int}}}findAndReturnTokens(e,t){return Wi.prim===e&&t.push(this),t}}Wi.prim="sapling_transaction_deprecated";class Yi extends Fr{constructor(e,t,n){super(e,t,n),this.value=e,this.token=t,this.name="Bls12381frValidationError"}}class zi extends qr{constructor(e,t,n){super(e,t,n),this.val=e,this.idx=t,this.fac=n}isValid(e){return/^[0-9a-fA-F]*$/.test(e)&&e.length%2==0?null:new Yi(e,this,`Invalid bytes: ${e}`)}convertUint8ArrayToHexString(e){return e.constructor===Uint8Array?Kr.from(e).toString("hex"):e}Encode(e){let t=e.pop();if("number"==typeof t)return{int:t.toString()};{t=this.convertUint8ArrayToHexString(t);const e=this.isValid(t);if(e)throw e;return{bytes:t}}}EncodeObject(e,t){if(t&&t[zi.prim])return t[zi.prim](e);if("number"==typeof e)return{int:e.toString()};{e=this.convertUint8ArrayToHexString(e);const t=this.isValid(e);if(t)throw t;return{bytes:e}}}Execute(e){return e.bytes}ExtractSchema(){return zi.prim}generateSchema(){return{__michelsonType:zi.prim,schema:zi.prim}}findAndReturnTokens(e,t){return zi.prim===e&&t.push(this),t}}zi.prim="bls12_381_fr";class Zi extends Fr{constructor(e,t,n){super(e,t,n),this.value=e,this.token=t,this.name="Bls12381g1ValidationError"}}class Ji extends qr{constructor(e,t,n){super(e,t,n),this.val=e,this.idx=t,this.fac=n}isValid(e){return/^[0-9a-fA-F]*$/.test(e)&&e.length%2==0?null:new Zi(e,this,`Invalid bytes: ${e}`)}convertUint8ArrayToHexString(e){return e.constructor===Uint8Array?Kr.from(e).toString("hex"):e}Encode(e){let t=e.pop();t=this.convertUint8ArrayToHexString(t);const n=this.isValid(t);if(n)throw n;return{bytes:t}}EncodeObject(e,t){e=this.convertUint8ArrayToHexString(e);const n=this.isValid(e);if(n)throw n;return t&&t[Ji.prim]?t[Ji.prim](e):{bytes:e}}Execute(e){return e.bytes}ExtractSchema(){return Ji.prim}generateSchema(){return{__michelsonType:Ji.prim,schema:Ji.prim}}findAndReturnTokens(e,t){return Ji.prim===e&&t.push(this),t}}Ji.prim="bls12_381_g1";class Xi extends Fr{constructor(e,t,n){super(e,t,n),this.value=e,this.token=t,this.name="Bls12381g2ValidationError"}}class $i extends qr{constructor(e,t,n){super(e,t,n),this.val=e,this.idx=t,this.fac=n}isValid(e){return/^[0-9a-fA-F]*$/.test(e)&&e.length%2==0?null:new Xi(e,this,`Invalid bytes: ${e}`)}convertUint8ArrayToHexString(e){return e.constructor===Uint8Array?Kr.from(e).toString("hex"):e}Encode(e){let t=e.pop();t=this.convertUint8ArrayToHexString(t);const n=this.isValid(t);if(n)throw n;return{bytes:t}}EncodeObject(e,t){e=this.convertUint8ArrayToHexString(e);const n=this.isValid(e);if(n)throw n;return t&&t[$i.prim]?t[$i.prim](e):{bytes:e}}Execute(e){return e.bytes}ExtractSchema(){return $i.prim}generateSchema(){return{__michelsonType:$i.prim,schema:$i.prim}}findAndReturnTokens(e,t){return $i.prim===e&&t.push(this),t}}$i.prim="bls12_381_g2";class es extends Fr{constructor(e,t,n){super(e,t,n),this.value=e,this.token=t,this.name="ChestValidationError"}}class ts extends qr{constructor(e,t,n){super(e,t,n),this.val=e,this.idx=t,this.fac=n}isValid(e){return/^[0-9a-fA-F]*$/.test(e)&&e.length%2==0?null:new es(e,this,`Invalid bytes: ${e}`)}convertUint8ArrayToHexString(e){return e.constructor===Uint8Array?Kr.from(e).toString("hex"):e}Encode(e){let t=e.pop();t=this.convertUint8ArrayToHexString(t);const n=this.isValid(t);if(n)throw n;return{bytes:t}}EncodeObject(e,t){e=this.convertUint8ArrayToHexString(e);const n=this.isValid(e);if(n)throw n;return t&&t[ts.prim]?t[ts.prim](e):{bytes:e}}Execute(e){return e.bytes}ExtractSchema(){return ts.prim}generateSchema(){return{__michelsonType:ts.prim,schema:ts.prim}}findAndReturnTokens(e,t){return ts.prim===e&&t.push(this),t}}ts.prim="chest";class ns extends Fr{constructor(e,t,n){super(e,t,n),this.value=e,this.token=t,this.name="ChestKeyValidationError"}}class rs extends qr{constructor(e,t,n){super(e,t,n),this.val=e,this.idx=t,this.fac=n}isValid(e){return/^[0-9a-fA-F]*$/.test(e)&&e.length%2==0?null:new ns(e,this,`Invalid bytes: ${e}`)}convertUint8ArrayToHexString(e){return e.constructor===Uint8Array?Kr.from(e).toString("hex"):e}Encode(e){let t=e.pop();t=this.convertUint8ArrayToHexString(t);const n=this.isValid(t);if(n)throw n;return{bytes:t}}EncodeObject(e,t){e=this.convertUint8ArrayToHexString(e);const n=this.isValid(e);if(n)throw n;return t&&t[rs.prim]?t[rs.prim](e):{bytes:e}}Execute(e){return e.bytes}ExtractSchema(){return rs.prim}generateSchema(){return{__michelsonType:rs.prim,schema:rs.prim}}findAndReturnTokens(e,t){return rs.prim===e&&t.push(this),t}}rs.prim="chest_key";class is extends Fr{constructor(e,t,n){super(e,t,n),this.value=e,this.token=t,this.name="GlobalConstantEncodingError"}}class ss extends Fr{constructor(e,t,n){super(e,t,n),this.value=e,this.token=t,this.name="GlobalConstantDecodingError"}}class os extends qr{constructor(e,t,n){super(e,t,n),this.val=e,this.idx=t,this.fac=n}Execute(e,t){if(t&&t[os.prim])return t[os.prim](e,this.val);throw new ss(e,this,`Unable to decode a value represented by a global constants. Please provide an expanded script to the Michelson-Encoder or semantics for the decoding. The following global constant hash was encountered: ${this.val.args[0].string}.`)}Encode(e){throw new is(e,this,`Unable to encode a script containing global constants. Please provide an expanded script to the Michelson-Encoder. The following global constant hash was encountered: ${this.val.args[0].string}.`)}EncodeObject(e,t){if(t&&t[os.prim])return t[os.prim](e);throw new is(e,this,`Unable to encode a script containing global constants. Please provide an expanded script to the Michelson-Encoder. The following global constant hash was encountered: ${this.val.args[0].string}.`)}ExtractSchema(){return os.prim}generateSchema(){return{__michelsonType:os.prim,schema:{hash:this.val.args[0].string}}}findAndReturnTokens(e,t){return os.prim===e&&t.push(this),t}}os.prim="constant";const as=[ei,ni,ri,Yr,si,ui,ai,ci,Zr,hi,fi,gi,vi,yi,Ai,bi,Si,Ri,Oi,Pi,Ii,xi,ki,Di,Ki,Hi,Vi,qi,Wi,zi,Ji,$i,ts,rs,os];class cs extends Error{constructor(e,t){super(e),this.message=e,this.data=t,this.name="Invalid token error"}}function ls(e,t){if(Array.isArray(e))return new ei(e,t,ls);const n=as.find((t=>t.prim===e.prim));if(!n)throw new cs("Malformed data expected a value with a valid prim property",e);return new n(e,t,ls)}class us extends Error{constructor(e,t){super(`Unable to encode the parameter of the view: ${e}.`),this.smartContractViewName=e,this.originalError=t,this.name="ViewEncodingError"}}class ds extends Error{constructor(e){super(e),this.message=e,this.name="InvalidScriptError"}}class hs extends Error{constructor(e){super("Invalid RPC response passed as argument(s)"),this.script=e,this.name="InvalidRpcResponseError"}}class ps extends Error{constructor(e,t,n){super(`\n      ${e}. Error encountered when trying to encode arguments: \n\n      [${t}]\n    `),this.message=e,this.args=t,this.originalError=n,this.name="ParameterEncodingError"}}class fs extends Error{constructor(e){super(e),this.message=e,this.name="InvalidBigMapSchema"}}class ms extends Error{constructor(e){super(e),this.message=e,this.name="InvalidBigMapDiff"}}class gs extends Error{constructor(e,t){super(`Unable to encode ${e}. ${t}`),this.obj=e,this.details=t,this.name="BigMapEncodingError"}}class Es extends Error{constructor(e,t){super(`Unable to encode ${e}. ${t}`),this.obj=e,this.details=t,this.name="StorageEncodingError"}}class vs extends Error{constructor(e){super(e),this.message=e,this.name="MissingArgumentError"}}var ys;const As=Symbol.for("taquito-schema-type-symbol");function Ts(e,t=ei.prim){var n,r;if(Array.isArray(e))return Ts({prim:t,args:e},t);const i=e;return i.prim===t&&i.args&&i.args.length>2?Object.assign(Object.assign({},i),{args:[null===(n=i.args)||void 0===n?void 0:n[0],{prim:t,args:null===(r=i.args)||void 0===r?void 0:r.slice(1)}]}):i}function bs(e,t){const n=Ts(e),r=Ts(t);return n.prim===r.prim&&(void 0===n.args&&void 0===r.args||void 0!==n.args&&void 0!==r.args&&n.args.length===r.args.length&&n.args.every(((e,t)=>{var n,i;return bs(e,null!==(i=null===(n=r.args)||void 0===n?void 0:n[t])&&void 0!==i?i:{})})))&&(void 0===n.annots&&void 0===r.annots||void 0!==n.annots&&void 0!==r.annots&&n.annots.length===r.annots.length&&n.annots.every(((e,t)=>{var n;return e===(null===(n=r.annots)||void 0===n?void 0:n[t])})))}class Ss{constructor(e){if(this.val=e,this[ys]=!0,this.root=ls(e,0),this.root instanceof Yr)this.bigMap=this.root;else if(this.isExpressionExtended(e)&&"pair"===e.prim){const t=e.args[0];this.isExpressionExtended(t)&&"big_map"===t.prim&&(this.bigMap=new Yr(t,0,ls))}}static isSchema(e){return e&&!0===e[As]}static fromRPCResponse(e){const t=e&&e.script&&Array.isArray(e.script.code)&&e.script.code.find((t=>{if(!Array.isArray(t)){const e=t;return!!e.prim&&"storage"===e.prim}this.fromRPCResponse({script:{code:t,storage:e.script.storage}})}));if(!t||!Array.isArray(t.args))throw new hs(e.script);return new Ss(t.args[0])}isExpressionExtended(e){return"prim"in e&&Array.isArray(e.args)}removeTopLevelAnnotation(e){return(this.root instanceof ei||this.root instanceof Zr)&&this.root.hasAnnotations()&&"object"==typeof e&&1===Object.keys(e).length?e[Object.keys(e)[0]]:e}Execute(e,t){const n=this.root.Execute(e,t);return this.removeTopLevelAnnotation(n)}Typecheck(e){if(this.root instanceof Yr&&Number.isInteger(Number(e)))return!0;if(this.root instanceof Ki&&e.ticketer&&e.value&&e.amount)return!0;try{return this.root.EncodeObject(e),!0}catch(t){return!1}}ExecuteOnBigMapDiff(e,t){if(!this.bigMap)throw new fs("Big map schema is undefined");if(!Array.isArray(e))throw new ms("Big map diff must be an array");const n=e.map((({key:e,value:t})=>({args:[e,t]})));return this.bigMap.Execute(n,t)}ExecuteOnBigMapValue(e,t){if(!this.bigMap)throw new fs("No big map schema");return this.bigMap.ValueSchema.Execute(e,t)}EncodeBigMapKey(e){if(!this.bigMap)throw new fs("Big map schema is undefined");try{return this.bigMap.KeySchema.ToBigMapKey(e)}catch(t){throw new gs("big map key",t)}}Encode(e,t){try{return this.root.EncodeObject(e,t)}catch(n){if(n instanceof Fr)throw n;throw new Es("storage object",n)}}ExtractSchema(){return this.removeTopLevelAnnotation(this.root.ExtractSchema())}generateSchema(){return this.removeTopLevelAnnotation(this.root.generateSchema())}ComputeState(e,t){if(!this.bigMap)throw new fs("Big map schema is undefined");const n=e.reduce(((e,t)=>Object.assign(Object.assign({},e),this.ExecuteOnBigMapDiff(t.contents[0].metadata.operation_result.big_map_diff))),{});return Object.assign(Object.assign({},this.Execute(t)),{[this.bigMap.annot()]:n})}FindFirstInTopLevelPair(e,t){return this.findValue(this.root.val,e,t)}findValue(e,t,n){if(bs(n,e))return t;if(Array.isArray(e)||"pair"===e.prim){const r=Ts(e),i=Ts(t,"Pair");if(void 0===r.args||void 0===i.args)throw new vs("Tokens have no arguments");if(r.args[0])return this.findValue(r.args[0],i.args[0],n)||this.findValue(r.args[1],i.args[1],n)}}findToken(e){return this.root.findAndReturnTokens(e,[])}}ys=As;const ws=Symbol(),Rs=Symbol("source_reference");class _s extends Error{constructor(e,t,n){super(n),this.src=e,this.idx=t,Object.setPrototypeOf(this,_s.prototype)}}var Os;!function(e){e[e.Comment=0]="Comment",e[e.Number=1]="Number",e[e.String=2]="String",e[e.Bytes=3]="Bytes",e[e.Ident=4]="Ident"}(Os||(Os={}));const Ns=new RegExp("\\s"),Ps=new RegExp("[:@%_A-Za-z]"),Is=new RegExp("[@%_\\.A-Za-z0-9]"),xs=new RegExp("[0-9]"),Cs=new RegExp("[0-9a-fA-F]");function*ks(e,t=!1){let n=0;for(;n<e.length;){for(;n<e.length&&Ns.test(e[n]);)n++;if(n===e.length)return;const r=e[n],i=n;if(Ps.test(r)){for(n++;n<e.length&&Is.test(e[n]);)n++;yield{t:Os.Ident,v:e.slice(i,n),first:i,last:n}}else if(e.length-n>1&&"0x"===e.substr(n,2)){for(n+=2;n<e.length&&Cs.test(e[n]);)n++;if(0!=(n-i&1))throw new _s(e,n,"Bytes literal length is expected to be power of two");yield{t:Os.Bytes,v:e.slice(i,n),first:i,last:n}}else if(xs.test(r)||"-"===r){"-"===r&&n++;const t=n;for(;n<e.length&&xs.test(e[n]);)n++;if(t===n)throw new _s(e,n,"Number literal is too short");yield{t:Os.Number,v:e.slice(i,n),first:i,last:n}}else if('"'===r){n++;let t=!1;for(;n<e.length&&(t||'"'!==e[n]);n++)t=!t&&"\\"===e[n];if(n===e.length)throw new _s(e,n,"Unterminated string literal");n++,yield{t:Os.String,v:e.slice(i,n),first:i,last:n}}else if("#"===r){for(n++;n<e.length&&"\n"!==e[n];)n++;t&&(yield{t:Os.Comment,v:e.slice(i,n),first:i,last:n})}else if(e.length-n>1&&"/*"===e.substr(n,2)){for(n+=2;n<e.length&&!(e.length-n>1&&"*/"===e.substr(n,2));)n++;if(n===e.length)throw new _s(e,n,"Unterminated C style comment");n+=2,t&&(yield{t:Os.Comment,v:e.slice(i,n),first:i,last:n})}else{if("("!==r&&")"!==r&&"{"!==r&&"}"!==r&&";"!==r)throw new _s(e,n,`Invalid character at offset ${n}: \`${r}'`);n++,yield{t:r,v:r,first:i,last:n}}}}const Ls=Symbol("ref_contract");var Ds;!function(e){e.Ps9mPmXa="Ps9mPmXaRzmzk35gbAYNCAw6UXdE2qoABTHbN2oEEc1qM7CwT9P",e.PtCJ7pwo="PtCJ7pwoxe8JasnHY8YonnLYjcVHmhiARPJvqcC6VfHT5s8k8sY",e.PsYLVpVv="PsYLVpVvgbLhAhoqAkMFUo6gudkJ9weNXhUYCiLDzcUpFpkk8Wt",e.PsddFKi3="PsddFKi32cMJ2qPjf43Qv5GDWLDPZb3T3bF6fLKiF5HtvHNU7aP",e.Pt24m4xi="Pt24m4xiPbLDhVgVfABUjirbmda3yohdN82Sp9FeuAXJ4eV9otd",e.PsBABY5H="PsBABY5HQTSkA4297zNHfsZNKtxULfL18y95qb3m53QJiXGmrbU",e.PsBabyM1="PsBabyM1eUXZseaJdmXFApDSBqj8YBfwELoxZHHW77EMcAbbwAS",e.PsCARTHA="PsCARTHAGazKbHtnKfLzQg3kms52kSRpgnDY982a9oYsSXRLQEb",e.PsDELPH1="PsDELPH1Kxsxt8f9eWbxQeRxkjfbxoqM52jvs5Y5fBxWWh4ifpo",e.PtEdoTez="PtEdoTezd3RHSC31mpxxo1npxFjoWWcFgQtxapi51Z8TLu6v6Uq",e.PtEdo2Zk="PtEdo2ZkT9oKpimTah6x2embF25oss54njMuPzkJTEi5RqfdZFA",e.PsFLoren="PsFLorenaUUuikDWvMDr6fGBRG8kt3e3D3fHoXK1j1BFRxeSH4i",e.PsFLorena="PsFLorenaUUuikDWvMDr6fGBRG8kt3e3D3fHoXK1j1BFRxeSH4i",e.PtGRANAD="PtGRANADsDU8R9daYKAgWnQYAJ64omN1o3KMGVCykShA97vQbvV",e.PtGRANADs="PtGRANADsDU8R9daYKAgWnQYAJ64omN1o3KMGVCykShA97vQbvV",e.PtHangzH="PtHangzHogokSuiMHemCuowEavgYTP8J5qQ9fQS793MHYFpCY3r",e.PtHangz2="PtHangz2aRngywmSRGGvrcTyMbbdpWdpFKuS4uMWxg2RaH9i1qx",e.PsiThaCa="PsiThaCaT47Zboaw71QWScM8sXeMM7bbQFncK9FLqYc6EKdpjVP",e.Psithaca2="Psithaca2MLRFYargivpo7YvUr7wUDqyxrdhC5CQq78mRvimz6A",e.PtJakarta="PtJakartaiDz69SfDDLXJSiuZqTSeSKRDbKVZC8MNzJnvRjvnGw",e.PtJakart2="PtJakart2xVj7pYXJBXrqHgd82rdkLey5ZeeGwDgPp9rhQUbSqY",e.PtKathman="PtKathmankSpLLDALzWw7CGD2j2MtyveTwboEYokqUCP4a1LxMg",e.ProtoALpha="ProtoALphaALphaALphaALphaALphaALphaALphaALphaDdp3zK"}(Ds||(Ds={}));const Ms=Ds.Psithaca2,Us={Ps9mPmXaRzmzk35gbAYNCAw6UXdE2qoABTHbN2oEEc1qM7CwT9P:0,PtCJ7pwoxe8JasnHY8YonnLYjcVHmhiARPJvqcC6VfHT5s8k8sY:1,PsYLVpVvgbLhAhoqAkMFUo6gudkJ9weNXhUYCiLDzcUpFpkk8Wt:2,PsddFKi32cMJ2qPjf43Qv5GDWLDPZb3T3bF6fLKiF5HtvHNU7aP:3,Pt24m4xiPbLDhVgVfABUjirbmda3yohdN82Sp9FeuAXJ4eV9otd:4,PsBABY5HQTSkA4297zNHfsZNKtxULfL18y95qb3m53QJiXGmrbU:5,PsBabyM1eUXZseaJdmXFApDSBqj8YBfwELoxZHHW77EMcAbbwAS:5,PsCARTHAGazKbHtnKfLzQg3kms52kSRpgnDY982a9oYsSXRLQEb:6,PsDELPH1Kxsxt8f9eWbxQeRxkjfbxoqM52jvs5Y5fBxWWh4ifpo:7,PtEdoTezd3RHSC31mpxxo1npxFjoWWcFgQtxapi51Z8TLu6v6Uq:8,PtEdo2ZkT9oKpimTah6x2embF25oss54njMuPzkJTEi5RqfdZFA:8,PsFLorenaUUuikDWvMDr6fGBRG8kt3e3D3fHoXK1j1BFRxeSH4i:9,PtGRANADsDU8R9daYKAgWnQYAJ64omN1o3KMGVCykShA97vQbvV:10,PtHangzHogokSuiMHemCuowEavgYTP8J5qQ9fQS793MHYFpCY3r:11,PtHangz2aRngywmSRGGvrcTyMbbdpWdpFKuS4uMWxg2RaH9i1qx:11,PsiThaCaT47Zboaw71QWScM8sXeMM7bbQFncK9FLqYc6EKdpjVP:12,Psithaca2MLRFYargivpo7YvUr7wUDqyxrdhC5CQq78mRvimz6A:12,PtJakartaiDz69SfDDLXJSiuZqTSeSKRDbKVZC8MNzJnvRjvnGw:13,PtJakart2xVj7pYXJBXrqHgd82rdkLey5ZeeGwDgPp9rhQUbSqY:13,PtKathmankSpLLDALzWw7CGD2j2MtyveTwboEYokqUCP4a1LxMg:14,ProtoALphaALphaALphaALphaALphaALphaALphaALphaDdp3zK:15};function Bs(e,t){return Us[e]<Us[t]}class Ks extends Error{constructor(e,t){super(t),this.prim=e,Object.setPrototypeOf(this,Ks.prototype)}}function js(e,t){var n,r;if(0===t&&void 0===e.args||(null===(n=e.args)||void 0===n?void 0:n.length)===t)return!0;throw new Ks(e,`macro ${e.prim} expects ${t} arguments, was given ${null===(r=e.args)||void 0===r?void 0:r.length}`)}function Hs(e){if(void 0===e.annots)return!0;throw new Ks(e,`unexpected annotation on macro ${e.prim}: ${e.annots}`)}function Gs(e,t){if("int"in t)return!0;throw new Ks(e,`macro ${e.prim} expects int argument`)}function Vs(e,t,n,r){let i=0,s=0;const o=[null,null];let a;if(i===t.length)throw new Ks(e,`unexpected end: ${e.prim}`);let c,l=t[i++];switch(l){case"P":{const{r:o,n:c,an:l}=Vs(e,t.slice(i),n.slice(s),r);a=o,i+=c,s+=l;break}case"A":s!==n.length&&(o[0]=n[s++]);break;default:throw new Ks(e,`${e.prim}: unexpected character: ${l}`)}if(i===t.length)throw new Ks(e,`unexpected end: ${e.prim}`);switch(l=t[i++],l){case"P":{const{r:o,n:a,an:l}=Vs(e,t.slice(i),n.slice(s),r);c=o.map((([e,t])=>[e+1,t])),i+=a,s+=l;break}case"I":s!==n.length&&(o[1]=n[s++]);break;default:throw new Ks(e,`${e.prim}: unexpected character: ${l}`)}return{r:r(a,c,[0,o]),n:i,an:s}}function Fs(e,t,n,r){const i=t[0];switch(i){case"A":return t.length>1?[{prim:"DUP"},{prim:"DIP",args:[[{prim:"CAR",annots:["@%%"]},Fs(e,t.slice(1),[],r)]]},{prim:"CDR",annots:["@%%"]},{prim:"SWAP"},{prim:"PAIR",annots:["%@","%@",...n]}]:r.a;case"D":return t.length>1?[{prim:"DUP"},{prim:"DIP",args:[[{prim:"CDR",annots:["@%%"]},Fs(e,t.slice(1),[],r)]]},{prim:"CAR",annots:["@%%"]},{prim:"PAIR",annots:["%@","%@",...n]}]:r.d;default:throw new Ks(e,`${e.prim}: unexpected character: ${i}`)}}function qs(e,t){let n=e.length;for(;n>0&&e[n-1]===t;)n--;return e.slice(0,n)}function Qs(e){const t=[],n=[];if(void 0!==e)for(const r of e)(0!==r.length&&"%"===r[0]?t:n).push(r);return{fields:t,rest:n}}function Ws({prim:e,annots:t,args:n}){return Object.assign(Object.assign({prim:e},t&&{annots:t}),n&&{args:n})}const Ys=/^P[PAI]{3,}R$/,zs=/^UNP[PAI]{2,}R$/,Zs=/^C[AD]{2,}R$/,Js=/^SET_C[AD]+R$/,Xs=/^MAP_C[AD]+R$/,$s=/^DI{2,}P$/,eo=/^DU+P$/;class to extends Error{constructor(e,t){super(t),this.token=e,Object.setPrototypeOf(this,to.prototype)}}class no extends Error{constructor(e,t){super(t),this.node=e,Object.setPrototypeOf(this,no.prototype)}}const ro=new to(null,"Unexpected EOF");function io(e){return e.t===Os.Ident&&("@"===e.v[0]||"%"===e.v[0]||":"===e.v[0])}const so=new RegExp("^-?[0-9]+$"),oo=new RegExp("^([0-9a-fA-F]{2})*$");class ao{constructor(e){this.opt=e}expand(e){var t,n,r;if(void 0!==(null===(t=this.opt)||void 0===t?void 0:t.expandGlobalConstant)&&"constant"===e.prim){const t=function(e,t){return void 0!==e.args&&1===e.args.length&&"string"in e.args[0]&&e.args[0].string in t?t[e.args[0].string]:e}(e,this.opt.expandGlobalConstant);return t!==e&&(t[Rs]=Object.assign(Object.assign({},e[Rs]||{first:0,last:0}),{globalConstant:e})),t}if(void 0===(null===(n=this.opt)||void 0===n?void 0:n.expandMacros)||(null===(r=this.opt)||void 0===r?void 0:r.expandMacros)){const t=function(e,t){const n=(null==t?void 0:t.protocol)||Ms;function r(e){return void 0!==e?[{prim:"RENAME",annots:e}]:[]}switch(e.prim){case"CMPEQ":case"CMPNEQ":case"CMPLT":case"CMPGT":case"CMPLE":case"CMPGE":if(js(e,0))return[{prim:"COMPARE"},Ws({prim:e.prim.slice(3),annots:e.annots})];break;case"IFEQ":case"IFNEQ":case"IFLT":case"IFGT":case"IFLE":case"IFGE":if(js(e,2))return[{prim:e.prim.slice(2)},Ws({prim:"IF",annots:e.annots,args:e.args})];break;case"IFCMPEQ":case"IFCMPNEQ":case"IFCMPLT":case"IFCMPGT":case"IFCMPLE":case"IFCMPGE":if(js(e,2))return[{prim:"COMPARE"},{prim:e.prim.slice(5)},Ws({prim:"IF",annots:e.annots,args:e.args})];break;case"FAIL":if(js(e,0)&&Hs(e))return[{prim:"UNIT"},{prim:"FAILWITH"}];break;case"ASSERT":if(js(e,0)&&Hs(e))return[{prim:"IF",args:[[],[[{prim:"UNIT"},{prim:"FAILWITH"}]]]}];break;case"ASSERT_EQ":case"ASSERT_NEQ":case"ASSERT_LT":case"ASSERT_GT":case"ASSERT_LE":case"ASSERT_GE":if(js(e,0)&&Hs(e))return[{prim:e.prim.slice(7)},{prim:"IF",args:[[],[[{prim:"UNIT"},{prim:"FAILWITH"}]]]}];break;case"ASSERT_CMPEQ":case"ASSERT_CMPNEQ":case"ASSERT_CMPLT":case"ASSERT_CMPGT":case"ASSERT_CMPLE":case"ASSERT_CMPGE":if(js(e,0)&&Hs(e))return[[{prim:"COMPARE"},{prim:e.prim.slice(10)}],{prim:"IF",args:[[],[[{prim:"UNIT"},{prim:"FAILWITH"}]]]}];break;case"ASSERT_NONE":if(js(e,0)&&Hs(e))return[{prim:"IF_NONE",args:[[],[[{prim:"UNIT"},{prim:"FAILWITH"}]]]}];break;case"ASSERT_SOME":if(js(e,0))return[{prim:"IF_NONE",args:[[[{prim:"UNIT"},{prim:"FAILWITH"}]],r(e.annots)]}];break;case"ASSERT_LEFT":if(js(e,0))return[{prim:"IF_LEFT",args:[r(e.annots),[[{prim:"UNIT"},{prim:"FAILWITH"}]]]}];break;case"ASSERT_RIGHT":if(js(e,0))return[{prim:"IF_LEFT",args:[[[{prim:"UNIT"},{prim:"FAILWITH"}]],r(e.annots)]}];break;case"IF_SOME":if(js(e,2))return[Ws({prim:"IF_NONE",annots:e.annots,args:[e.args[1],e.args[0]]})];break;case"IF_RIGHT":if(js(e,2))return[Ws({prim:"IF_LEFT",annots:e.annots,args:[e.args[1],e.args[0]]})];break;case"CAR":case"CDR":if(void 0===e.args)return e;if(js(e,1)&&Gs(e,e.args[0])){const t=parseInt(e.args[0].int,10);return Ws({prim:"GET",args:[{int:"CAR"===e.prim?String(2*t+1):String(2*t)}],annots:e.annots})}}if(Ys.test(e.prim)&&js(e,0)){const{fields:t,rest:n}=Qs(e.annots),{r:r}=Vs(e,e.prim.slice(1),t,((e,t,n)=>[...e||[],...t||[],n]));return r.map((([e,t],i)=>{const s=[...qs(t,null).map((e=>null===e?"%":e)),...0===e&&i===r.length-1?n:[]],o=Ws({prim:"PAIR",annots:0!==s.length?s:void 0});return 0===e?o:{prim:"DIP",args:1===e?[[o]]:[{int:String(e)},[o]]}}))}if(zs.test(e.prim)){if(Bs(n,Ds.PtEdo2Zk)&&js(e,0)){const{r:t}=Vs(e,e.prim.slice(3),e.annots||[],((e,t,n)=>[n,...t||[],...e||[]]));return t.map((([e,t])=>{const n=[{prim:"DUP"},Ws({prim:"CAR",annots:null!==t[0]?[t[0]]:void 0}),{prim:"DIP",args:[[Ws({prim:"CDR",annots:null!==t[1]?[t[1]]:void 0})]]}];return 0===e?n:{prim:"DIP",args:1===e?[[n]]:[{int:String(e)},[n]]}}))}if("UNPAIR"===e.prim)return e;if(js(e,0)){const{r:t}=Vs(e,e.prim.slice(3),[],((e,t,n)=>[n,...t||[],...e||[]]));return t.map((([e])=>{const t=Ws({prim:"UNPAIR"});return 0===e?t:{prim:"DIP",args:1===e?[[t]]:[{int:String(e)},[t]]}}))}}if(Zs.test(e.prim)&&js(e,0)){const t=[...e.prim.slice(1,e.prim.length-1)];return t.map(((n,r)=>{const i=r===t.length-1?e.annots:void 0;switch(n){case"A":return Ws({prim:"CAR",annots:i});case"D":return Ws({prim:"CDR",annots:i});default:throw new Ks(e,`unexpected character: ${n}`)}}))}if(Js.test(e.prim)&&js(e,0)){const{fields:t,rest:n}=Qs(e.annots);if(t.length>1)throw new Ks(e,`unexpected annotation on macro ${e.prim}: ${t}`);const r=0!==t.length?{a:[{prim:"DUP"},{prim:"CAR",annots:t},{prim:"DROP"},{prim:"CDR",annots:["@%%"]},{prim:"SWAP"},{prim:"PAIR",annots:[t[0],"%@"]}],d:[{prim:"DUP"},{prim:"CDR",annots:t},{prim:"DROP"},{prim:"CAR",annots:["@%%"]},{prim:"PAIR",annots:["%@",t[0]]}]}:{a:[{prim:"CDR",annots:["@%%"]},{prim:"SWAP"},{prim:"PAIR",annots:["%","%@"]}],d:[{prim:"CAR",annots:["@%%"]},{prim:"PAIR",annots:["%@","%"]}]};return Fs(e,e.prim.slice(5,e.prim.length-1),n,r)}if(Xs.test(e.prim)&&js(e,1)){const{fields:t}=Qs(e.annots);if(t.length>1)throw new Ks(e,`unexpected annotation on macro ${e.prim}: ${t}`);const n={a:[{prim:"DUP"},{prim:"CDR",annots:["@%%"]},{prim:"DIP",args:[[Ws({prim:"CAR",annots:0!==t.length?["@"+t[0].slice(1)]:void 0}),e.args[0]]]},{prim:"SWAP"},{prim:"PAIR",annots:[0!==t.length?t[0]:"%","%@"]}],d:[{prim:"DUP"},Ws({prim:"CDR",annots:0!==t.length?["@"+t[0].slice(1)]:void 0}),e.args[0],{prim:"SWAP"},{prim:"CAR",annots:["@%%"]},{prim:"PAIR",annots:["%@",0!==t.length?t[0]:"%"]}]};return Fs(e,e.prim.slice(5,e.prim.length-1),[],n)}if($s.test(e.prim)&&js(e,1)){let t=0;for(;"I"===e.prim[1+t];)t++;return Ws({prim:"DIP",args:[{int:String(t)},e.args[0]]})}if(eo.test(e.prim)){let t=0;for(;"U"===e.prim[1+t];)t++;if(Bs(n,Ds.PtEdo2Zk)){if(1===t){if(void 0===e.args)return e;js(e,1)&&Gs(e,e.args[0])&&(t=parseInt(e.args[0].int,10))}else js(e,0);return 1===t?[Ws({prim:"DUP",annots:e.annots})]:2===t?[{prim:"DIP",args:[[Ws({prim:"DUP",annots:e.annots})]]},{prim:"SWAP"}]:[{prim:"DIP",args:[{int:String(t-1)},[Ws({prim:"DUP",annots:e.annots})]]},{prim:"DIG",args:[{int:String(t)}]}]}if(1===t)return e;if(js(e,0))return Ws({prim:"DUP",args:[{int:String(t)}],annots:e.annots})}return e}(e,this.opt);return t!==e&&(t[Rs]=Object.assign(Object.assign({},e[Rs]||{first:0,last:0}),{macro:e})),t}return e}parseListExpr(e,t){var n;const r={first:t.first,last:t.last},i="("===t.t;let s;if(i){if(s=e.next(),s.done)throw ro;r.last=s.value.last}else s={value:t};if(s.value.t!==Os.Ident)throw new to(s.value,`not an identifier: ${s.value.v}`);const o={prim:s.value.v,[Rs]:r};for(;;){const t=e.next();if(t.done){if(i)throw ro;break}if(")"===t.value.t){if(!i)throw new to(t.value,"unexpected closing bracket");r.last=t.value.last;break}if(io(t.value))o.annots=o.annots||[],o.annots.push(t.value.v),r.last=t.value.last;else{o.args=o.args||[];const i=this.parseExpr(e,t.value);r.last=(null===(n=i[Rs])||void 0===n?void 0:n.last)||r.last,o.args.push(i)}}return this.expand(o)}parseArgs(e,t){var n;const r={first:t.first,last:t.last},i={prim:t.v,[Rs]:r};for(;;){const t=e.next();if(t.done||"}"===t.value.t||";"===t.value.t)return[i,t];if(io(t.value))r.last=t.value.last,i.annots=i.annots||[],i.annots.push(t.value.v);else{const s=this.parseExpr(e,t.value);r.last=(null===(n=s[Rs])||void 0===n?void 0:n.last)||r.last,i.args=i.args||[],i.args.push(s)}}}parseSequenceExpr(e,t){var n,r;const i={first:t.first,last:t.last},s=[];s[Rs]=i;const o="{"===t.t;let a="{"===t.t?null:{value:t};for(;;){if(null===a&&(a=e.next(),a.done||(i.last=a.value.last)),a.done){if(o)throw ro;return s}if("}"===a.value.t){if(o)return s;throw new to(a.value,"unexpected closing bracket")}if(a.value.t===Os.Ident){const[t,r]=this.parseArgs(e,a.value);i.last=(null===(n=t[Rs])||void 0===n?void 0:n.last)||i.last,s.push(this.expand(t)),a=r}else{const t=this.parseExpr(e,a.value);i.last=(null===(r=t[Rs])||void 0===r?void 0:r.last)||i.last,s.push(t),a=null}null===a&&(a=e.next(),a.done||(i.last=a.value.last)),a.done||";"!==a.value.t||(a=null)}}parseExpr(e,t){switch(t.t){case Os.Ident:return this.expand({prim:t.v,[Rs]:{first:t.first,last:t.last}});case Os.Number:return{int:t.v,[Rs]:{first:t.first,last:t.last}};case Os.String:return{string:JSON.parse(t.v),[Rs]:{first:t.first,last:t.last}};case Os.Bytes:return{bytes:t.v.slice(2),[Rs]:{first:t.first,last:t.last}};case"{":return this.parseSequenceExpr(e,t);default:return this.parseListExpr(e,t)}}parseSequence(e){if("string"!=typeof e)throw new TypeError(`string type was expected, got ${typeof e} instead`);const t=ks(e),n=t.next();return n.done?null:this.parseSequenceExpr(t,n.value)}parseList(e){if("string"!=typeof e)throw new TypeError(`string type was expected, got ${typeof e} instead`);const t=ks(e),n=t.next();return n.done?null:this.parseListExpr(t,n.value)}parseMichelineExpression(e){if("string"!=typeof e)throw new TypeError(`string type was expected, got ${typeof e} instead`);const t=ks(e),n=t.next();return n.done?null:this.parseExpr(t,n.value)}parseScript(e){return this.parseSequence(e)}parseData(e){return this.parseList(e)}parseJSON(e){if("object"!=typeof e)throw new TypeError(`object type was expected, got ${typeof e} instead`);if(Array.isArray(e)){const t=[];for(const n of e){if(null===n||"object"!=typeof n)throw new no(n,`unexpected sequence element: ${n}`);t.push(this.parseJSON(n))}return t}if("prim"in e){const t=e;if("string"==typeof t.prim&&(void 0===t.annots||Array.isArray(t.annots))&&(void 0===t.args||Array.isArray(t.args))){const e={prim:t.prim};if(void 0!==t.annots){for(const e of t.annots)if("string"!=typeof e)throw new no(e,`string expected: ${e}`);e.annots=t.annots}if(void 0!==t.args){e.args=[];for(const n of t.args){if(null===n||"object"!=typeof n)throw new no(n,`unexpected argument: ${n}`);e.args.push(this.parseJSON(n))}}return this.expand(e)}throw new no(e,`malformed prim expression: ${e}`)}if("string"in e){if("string"==typeof e.string)return{string:e.string};throw new no(e,`malformed string literal: ${e}`)}if("int"in e){if("string"==typeof e.int&&so.test(e.int))return{int:e.int};throw new no(e,`malformed int literal: ${e}`)}if("bytes"in e){if("string"==typeof e.bytes&&oo.test(e.bytes))return{bytes:e.bytes};throw new no(e,`malformed bytes literal: ${e}`)}throw new no(e,`unexpected object: ${e}`)}}const co=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],lo=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998];class uo extends Error{constructor(e){super(e),this.message=e,this.name="Base58DecodingError"}}class ho extends Error{constructor(e){super(e),this.message=e,this.name="InvalidMessageError"}}function po(e){const t=(e.length+9)%64,n=0===t?0:64-t;if(e.length>268435455)throw new ho(`SHA-256 -- message length is too big: ${e.length}`);const r=e.length<<3,i=[...e,128,...new Array(n).fill(0),0,0,0,0,r>>24&255,r>>16&255,r>>8&255,255&r];function s(e,t){return e>>>t|e<<32-t}const o=[...co],a=new Array(64),c=new Array(8);for(let u=0;u<i.length;u+=64){let e=u,t=0;for(;t<16;)a[t]=i[e]<<24|i[e+1]<<16|i[e+2]<<8|i[e+3],e+=4,t++;for(;t<64;){const e=s(a[t-15],7)^s(a[t-15],18)^a[t-15]>>>3,n=s(a[t-2],17)^s(a[t-2],19)^a[t-2]>>>10;a[t]=(0|n)+a[t-7]+e+a[t-16]|0,t++}for(let n=0;n<8;n++)c[n]=o[n];for(let n=0;n<64;n++){const e=s(c[0],2)^s(c[0],13)^s(c[0],22),t=s(c[4],6)^s(c[4],11)^s(c[4],25),r=c[7]+t+(c[4]&c[5]^~c[4]&c[6])+lo[n]+a[n]|0,i=e+(c[0]&c[1]^c[0]&c[2]^c[1]&c[2])|0;c[7]=c[6],c[6]=c[5],c[5]=c[4],c[4]=c[3]+r|0,c[3]=c[2],c[2]=c[1],c[1]=c[0],c[0]=r+i|0}for(let n=0;n<8;n++)o[n]=o[n]+c[n]|0}const l=[];for(const u of o)l.push(u>>24&255),l.push(u>>16&255),l.push(u>>8&255),l.push(255&u);return l}const fo=[0,1,2,3,4,5,6,7,8,-1,-1,-1,-1,-1,-1,-1,9,10,11,12,13,14,15,16,-1,17,18,19,20,21,-1,22,23,24,25,26,27,28,29,30,31,32,-1,-1,-1,-1,-1,-1,33,34,35,36,37,38,39,40,41,42,43,-1,44,45,46,47,48,49,50,51,52,53,54,55,56,57];function mo(e,t){const n=e.charCodeAt(t)-49;if(n>=fo.length||-1===fo[n])throw new uo(`Unexpected character at position ${t}: ${e[t]}`);return fo[n]}function go(e){const t=function(e){const t=[];let n=0;for(;n<e.length&&0===mo(e,n);)n++;let r=n;for(;n<e.length;){let r=mo(e,n++),i=0;for(;0!==r||i<t.length;){const e=58*(t[i]||0)+r;t[i++]=e%256,r=Math.floor(e/256)}}for(;r-- >0;)t.push(0);return t.reverse()}(e);if(t.length<4)throw new uo(`Data is too short ${t.length}`);const n=t.slice(0,t.length-4),r=t.slice(t.length-4),i=po(po(n));if(r[0]!==i[0]||r[1]!==i[1]||r[2]!==i[2]||r[3]!==i[3])throw new uo("Invalid checksum");return n}class Eo extends Error{constructor(e){super(e),this.message=e,this.name="InvalidContractError"}}class vo extends Error{constructor(e){super(e),this.message=e,this.name="InvalidTypeExpressionError"}}class yo extends Error{constructor(e){super(e),this.message=e,this.name="InvalidDataExpressionError"}}class Ao extends Error{constructor(e){super(`Contract has no entrypoint named: '${e}'`),this.entrypoint=e,this.name="InvalidEntrypointError"}}class To extends Error{constructor(e){super(e),this.message=e,this.name="TezosIdEncodeError"}}class bo extends Error{constructor(e){super(e),this.message=e,this.name="LongIntegerError"}}class So extends Error{constructor(e){super(`Unable to parse hex byte: ${e}`),this.hexByte=e,this.name="HexParseError"}}class wo extends Error{constructor(e,t){super(t),this.val=e,Object.setPrototypeOf(this,wo.prototype)}}class Ro extends wo{constructor(e,t,n){super(e,n),void 0!==t&&(this.data=t),Object.setPrototypeOf(this,Ro.prototype)}}class _o{constructor(e){if(this.neg=!1,this.buf=[],void 0!==e)if("string"==typeof e)for(let t=0;t<e.length;t++){const n=e.charCodeAt(t);if(0===t&&45===n)this.neg=!0;else{if(n<48||n>57)throw new bo(`unexpected character in integer constant: ${e[t]}`);this.append(n-48)}}else e<0?(this.neg=!0,this.append(-e)):this.append(e)}append(e){let t=0;for(;0!==e||t<this.buf.length;){const n=10*(this.buf[t]||0)+e;this.buf[t++]=n%256,e=Math.floor(n/256)}}cmp(e){if(this.neg!==e.neg)return(e.neg?1:0)-(this.neg?1:0);{let t=0;if(this.buf.length!==e.buf.length)t=this.buf.length<e.buf.length?-1:1;else if(0!==this.buf.length){let n=e.buf.length-1;for(;n>=0&&this.buf[n]===e.buf[n];)n--;t=n<0?0:this.buf[n]<e.buf[n]?-1:1}return this.neg?0===t?0:-t:t}}get sign(){return 0===this.buf.length?0:this.neg?-1:1}}function Oo(e){const t=[];for(let n=0;n<e.length;n+=2){const r=parseInt(e.slice(n,n+2),16);if(Number.isNaN(r))return null;t.push(r)}return t}function No(e){try{return new _o(e),!0}catch(ys){return!1}}function Po(e){try{return new _o(e).sign>=0}catch(ys){return!1}}const Io=/^(@%|@%%|%@|[@:%]([_0-9a-zA-Z][_0-9a-zA-Z.%@]*)?)$/;function xo(e,t){if(Array.isArray(e))return{};let n,r,i;if(void 0!==e.annots)for(const s of e.annots)if(0!==s.length){if(!Io.test(s)||!(null==t?void 0:t.specialVar)&&("@%"===s||"@%%"===s)||!(null==t?void 0:t.specialFields)&&"%@"===s)throw new wo(e,`${e.prim}: unexpected annotation: ${s}`);switch(s[0]){case"%":((null==t?void 0:t.emptyFields)||s.length>1)&&(n=n||[],n.push(s));break;case":":s.length>1&&(r=r||[],r.push(s));break;case"@":((null==t?void 0:t.emptyVar)||s.length>1)&&(i=i||[],i.push(s))}}return{f:n,t:r,v:i}}const Co={BlockHash:[32,[1,52]],OperationHash:[32,[5,116]],OperationListHash:[32,[133,233]],OperationListListHash:[32,[29,159,109]],ProtocolHash:[32,[2,170]],ContextHash:[32,[79,199]],ED25519PublicKeyHash:[20,[6,161,159]],SECP256K1PublicKeyHash:[20,[6,161,161]],P256PublicKeyHash:[20,[6,161,164]],ContractHash:[20,[2,90,121]],CryptoboxPublicKeyHash:[16,[153,103]],ED25519Seed:[32,[13,15,58,7]],ED25519PublicKey:[32,[13,15,37,217]],SECP256K1SecretKey:[32,[17,162,224,201]],P256SecretKey:[32,[16,81,238,189]],ED25519EncryptedSeed:[56,[7,90,60,179,41]],SECP256K1EncryptedSecretKey:[56,[9,237,241,174,150]],P256EncryptedSecretKey:[56,[9,48,57,115,171]],SECP256K1PublicKey:[33,[3,254,226,86]],P256PublicKey:[33,[3,178,139,127]],SECP256K1Scalar:[33,[38,248,136]],SECP256K1Element:[33,[5,92,0]],ED25519SecretKey:[64,[43,246,78,7]],ED25519Signature:[64,[9,245,205,134,18]],SECP256K1Signature:[64,[13,115,101,19,63]],P256Signature:[64,[54,240,44,52]],GenericSignature:[64,[4,130,43]],ChainID:[4,[87,82,0]],RollupAddress:[20,[1,128,120,31]],TxRollupL2Address:[20,[6,161,166]]};function ko(e,...t){const n=go(e);for(const r of t){const[e,t]=Co[r];if(n.length===e+t.length){let e=0;for(;e<t.length&&n[e]===t[e];)e++;if(e===t.length)return[r,n.slice(t.length)]}}return null}function Lo(e,t){const n=t,r=Array.isArray(n)?n:n.args;if(2===r.length){return"pair"===e?{prim:"pair",args:r}:{prim:"Pair",args:r}}return Object.assign(Object.assign({},Array.isArray(n)?{prim:e}:n),{args:[r[0],{prim:e,args:r.slice(1)}]})}function Do(e){return Array.isArray(e)||"pair"===e.prim}function Mo(e){return Array.isArray(e)||"prim"in e&&"Pair"===e.prim}const Uo=/^[0-9]{4}-(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])[T ]([01][0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9]|60)(\.[0-9]+)?(Z|[+-]([01][0-9]|2[0-3]):([0-5][0-9]))$/;function Bo(e){if("string"in e){if(Po(e.string))return new Date(parseInt(e.string,10));if(Uo.test(e.string)){const t=new Date(e.string);if(!Number.isNaN(t.valueOf))return t}}else if(No(e.int))return new Date(parseInt(e.int,10));return null}const Ko={ABS:!0,ADD:!0,ADDRESS:!0,AMOUNT:!0,AND:!0,APPLY:!0,BALANCE:!0,BLAKE2B:!0,CAR:!0,CDR:!0,CHAIN_ID:!0,CHECK_SIGNATURE:!0,COMPARE:!0,CONCAT:!0,CONS:!0,EDIV:!0,EQ:!0,EXEC:!0,FAILWITH:!0,GE:!0,GET_AND_UPDATE:!0,GT:!0,HASH_KEY:!0,IMPLICIT_ACCOUNT:!0,INT:!0,ISNAT:!0,JOIN_TICKETS:!0,KECCAK:!0,LE:!0,LEVEL:!0,LSL:!0,LSR:!0,LT:!0,MEM:!0,MUL:!0,NEG:!0,NEQ:!0,NEVER:!0,NOT:!0,NOW:!0,OR:!0,PACK:!0,PAIRING_CHECK:!0,READ_TICKET:!0,SAPLING_VERIFY_UPDATE:!0,SELF:!0,SELF_ADDRESS:!0,SENDER:!0,SET_DELEGATE:!0,SHA256:!0,SHA3:!0,SHA512:!0,SIZE:!0,SLICE:!0,SOME:!0,SOURCE:!0,SPLIT_TICKET:!0,SUB:!0,SWAP:!0,TICKET:!0,TOTAL_VOTING_POWER:!0,TRANSFER_TOKENS:!0,UNIT:!0,VOTING_POWER:!0,XOR:!0,RENAME:!0,OPEN_CHEST:!0,SUB_MUTEZ:!0,MIN_BLOCK_TIME:!0},jo=Object.assign({},Ko,{CONTRACT:!0,CREATE_CONTRACT:!0,DIG:!0,DIP:!0,DROP:!0,DUG:!0,DUP:!0,EMIT:!0,EMPTY_BIG_MAP:!0,EMPTY_MAP:!0,EMPTY_SET:!0,GET:!0,IF:!0,IF_CONS:!0,IF_LEFT:!0,IF_NONE:!0,ITER:!0,LAMBDA:!0,LEFT:!0,LOOP:!0,LOOP_LEFT:!0,MAP:!0,NIL:!0,NONE:!0,PAIR:!0,PUSH:!0,RIGHT:!0,SAPLING_EMPTY_STATE:!0,UNPACK:!0,UNPAIR:!0,UPDATE:!0,CAST:!0,VIEW:!0}),Ho={unit:!0,never:!0,bool:!0,int:!0,nat:!0,string:!0,chain_id:!0,bytes:!0,mutez:!0,key_hash:!0,key:!0,signature:!0,timestamp:!0,address:!0,tx_rollup_l2_address:!0},Go=Object.assign({},Ho,{or:!0,pair:!0,set:!0,big_map:!0,contract:!0,lambda:!0,list:!0,map:!0,operation:!0,option:!0,bls12_381_g1:!0,bls12_381_g2:!0,bls12_381_fr:!0,sapling_transaction:!0,sapling_state:!0,ticket:!0,chest_key:!0,chest:!0});class Vo extends wo{constructor(e,t){super(e,t),this.val=e,Object.setPrototypeOf(this,Vo.prototype)}}function Fo(e){return"prim"in e}function qo(e){if(Fo(e))return!0;throw new Vo(e,"prim expression expected")}function Qo(e){if(Array.isArray(e))return!0;throw new Vo(e,"sequence expression expected")}function Wo(e){if(function(e){return Array.isArray(e)||"prim"in e}(e))return!0;throw new Vo(e,"prim or sequence expression expected")}function Yo(e){if("-"===e.int[0])throw new Vo(e,"natural number expected")}function zo(e){if("int"in e)return!0;throw new Vo(e,"int literal expected")}function Zo(e){if("string"in e)return!0;throw new Vo(e,"string literal expected")}function Jo(e,t){var n;if(0===t&&void 0===e.args||(null===(n=e.args)||void 0===n?void 0:n.length)===t)return!0;throw new Vo(e,`${t} arguments expected`)}function Xo(e){var t,n;if(Array.isArray(e)){for(const t of e){if(!Array.isArray(t)&&!Fo(t))throw new Vo(e,"sequence or prim expected");Xo(t)}return!0}if(qo(e)){if(Object.prototype.hasOwnProperty.call(Ko,e.prim))return Jo(e,0),!0;switch(e.prim){case"DROP":case"PAIR":case"UNPAIR":case"DUP":case"UPDATE":case"GET":void 0!==e.args&&Jo(e,1)&&zo(e.args[0])&&Yo(e.args[0]);break;case"DIG":case"DUG":case"SAPLING_EMPTY_STATE":Jo(e,1)&&zo(e.args[0])&&Yo(e.args[0]);break;case"NONE":case"LEFT":case"RIGHT":case"NIL":case"CAST":Jo(e,1)&&aa(e.args[0]);break;case"UNPACK":Jo(e,1)&&ea(e.args[0]);break;case"CONTRACT":Jo(e,1)&&ra(e.args[0]);break;case"IF_NONE":case"IF_LEFT":case"IF_CONS":case"IF":Jo(e,2)&&(Qo(e.args[0])&&Xo(e.args[0]),Qo(e.args[1])&&Xo(e.args[1]));break;case"MAP":case"ITER":case"LOOP":case"LOOP_LEFT":Jo(e,1)&&Xo(e.args[0]);break;case"CREATE_CONTRACT":Jo(e,1)&&ua(e.args[0]);break;case"DIP":if(2===(null===(t=e.args)||void 0===t?void 0:t.length))zo(e.args[0])&&Yo(e.args[0]),Qo(e.args[1])&&Xo(e.args[1]);else{if(1!==(null===(n=e.args)||void 0===n?void 0:n.length))throw new Vo(e,"1 or 2 arguments expected");Qo(e.args[0])&&Xo(e.args[0])}break;case"PUSH":Jo(e,2)&&(ta(e.args[0]),la(e.args[1]));break;case"EMPTY_SET":Jo(e,1)&&$o(e.args[0]);break;case"EMPTY_MAP":Jo(e,2)&&($o(e.args[0]),aa(e.args[1]));break;case"EMPTY_BIG_MAP":Jo(e,2)&&($o(e.args[0]),ia(e.args[1]));break;case"LAMBDA":Jo(e,3)&&(aa(e.args[0]),aa(e.args[1]),Qo(e.args[2])&&Xo(e.args[2]));break;case"VIEW":Jo(e,2)&&(Zo(e.args[0])&&oa(e.args[0]),aa(e.args[1])&&ta(e.args[1]));break;case"EMIT":e.args&&e.args.length>0?Jo(e,1):Jo(e,0);break;default:throw new Vo(e,"instruction expected")}}return!0}function $o(e){if(Wo(e))if(Array.isArray(e)||"pair"===e.prim||"or"===e.prim||"option"===e.prim)ca(e,(e=>$o(e)));else if(!Object.prototype.hasOwnProperty.call(Ho,e.prim))throw new Vo(e,`${e.prim}: type is not comparable`);return!0}function ea(e){if(Wo(e)&&Fo(e)){if(!Object.prototype.hasOwnProperty.call(Go,e.prim)||"big_map"===e.prim||"operation"===e.prim||"sapling_state"===e.prim||"ticket"===e.prim)throw new Vo(e,`${e.prim}: type can't be used inside PACK/UNPACK instructions`);ca(e,(e=>ea(e)))}return!0}function ta(e){if(Wo(e)&&Fo(e)){if(!Object.prototype.hasOwnProperty.call(Go,e.prim)||"big_map"===e.prim||"operation"===e.prim||"sapling_state"===e.prim||"ticket"===e.prim||"contract"===e.prim)throw new Vo(e,`${e.prim}: type can't be pushed`);ca(e,(e=>ta(e)))}return!0}function na(e){if(Wo(e)&&Fo(e)){if(!Object.prototype.hasOwnProperty.call(Go,e.prim)||"operation"===e.prim||"contract"===e.prim)throw new Vo(e,`${e.prim}: type can't be used as part of a storage`);ca(e,(e=>na(e)))}return!0}function ra(e){if(Wo(e)&&Fo(e)){if(!Object.prototype.hasOwnProperty.call(Go,e.prim)||"operation"===e.prim)throw new Vo(e,`${e.prim}: type can't be used as part of a parameter`);ca(e,(e=>ra(e)))}return!0}function ia(e){if(Wo(e)&&Fo(e)){if(!Object.prototype.hasOwnProperty.call(Go,e.prim)||"big_map"===e.prim||"operation"===e.prim||"sapling_state"===e.prim)throw new Vo(e,`${e.prim}: type can't be used inside a big_map`);ca(e,(e=>ia(e)))}return!0}const sa=new RegExp("^[a-zA-Z0-9_.%@]*$");function oa(e){if(e.string.length>31)throw new Vo(e,`view name too long: ${e.string}`);if(!sa.test(e.string))throw new Vo(e,`invalid character(s) in view name: ${e.string}`)}function aa(e){if(Wo(e)&&Fo(e)){if(!Object.prototype.hasOwnProperty.call(Go,e.prim))throw new Vo(e,"type expected");ca(e,(e=>aa(e)))}return!0}function ca(e,t){if(Array.isArray(e)||"pair"===e.prim){const n=Array.isArray(e)?e:e.args;if(void 0===n||n.length<2)throw new Vo(e,"at least 2 arguments expected");return n.forEach((e=>{Wo(e)&&t(e)})),!0}switch(e.prim){case"option":case"list":Jo(e,1)&&Wo(e.args[0])&&t(e.args[0]);break;case"contract":Jo(e,1)&&ra(e.args[0]);break;case"or":Jo(e,2)&&Wo(e.args[0])&&Wo(e.args[1])&&(t(e.args[0]),t(e.args[1]));break;case"lambda":Jo(e,2)&&(aa(e.args[0]),aa(e.args[1]));break;case"set":Jo(e,1)&&$o(e.args[0]);break;case"map":Jo(e,2)&&Wo(e.args[0])&&Wo(e.args[1])&&($o(e.args[0]),t(e.args[1]));break;case"big_map":Jo(e,2)&&Wo(e.args[0])&&Wo(e.args[1])&&($o(e.args[0]),ia(e.args[1]),t(e.args[1]));break;case"ticket":Jo(e,1)&&Wo(e.args[0])&&$o(e.args[0]);break;case"sapling_state":case"sapling_transaction":Jo(e,1)&&zo(e.args[0]);break;default:Jo(e,0)}return!0}function la(e){if("int"in e||"string"in e||"bytes"in e)return!0;if(Array.isArray(e)){let t=0;for(const n of e)Fo(n)&&"Elt"===n.prim?(Jo(n,2)&&(la(n.args[0]),la(n.args[1])),t++):la(n);if(0!==t&&t!==e.length)throw new Vo(e,"data entries and map elements can't be intermixed");return!0}if(!Fo(e))throw new Vo(e,"data entry expected");switch(e.prim){case"Unit":case"True":case"False":case"None":Jo(e,0);break;case"Pair":if(void 0===e.args||e.args.length<2)throw new Vo(e,"at least 2 arguments expected");for(const t of e.args)la(t);break;case"Left":case"Right":case"Some":Jo(e,1)&&la(e.args[0]);break;default:if(!Object.prototype.hasOwnProperty.call(jo,e.prim))throw new Vo(e,"data entry or instruction expected");Xo(e)}return!0}function ua(e){if(Qo(e)){const t={},n={};for(const r of e)if(qo(r)){if("view"!==r.prim){if(r.prim in t)throw new Vo(e,`duplicate contract section: ${r.prim}`);t[r.prim]=!0}switch(r.prim){case"code":Jo(r,1)&&Qo(r.args[0])&&Xo(r.args[0]);break;case"parameter":if(Jo(r,1)&&ra(r.args[0]),r.annots)throw new Vo(r,"Annotation must be part of the parameter type");break;case"storage":Jo(r,1)&&na(r.args[0]);break;case"view":if(Jo(r,4)){if(Zo(r.args[0])){const t=r.args[0];if(t.string in n)throw new Vo(e,`duplicate view name: ${t.string}`);n[t.string]=!0,oa(t)}ta(r.args[1]),ta(r.args[2]),Qo(r.args[3])&&Xo(r.args[3])}break;default:throw new Vo(e,`unexpected contract section: ${r.prim}`)}}}return!0}function da(e){return Object.prototype.hasOwnProperty.call(jo,e.prim)}function ha(e){if(!Array.isArray(e))return!1;for(const t of e)if("prim"in t){if(da(t))throw new wo(e,`Instruction outside of a lambda: ${JSON.stringify(e)}`);if("Elt"===t.prim)throw new wo(e,`Elt item outside of a map literal: ${JSON.stringify(e)}`)}return!0}const pa=["parameter","storage","code","False","Elt","Left","None","Pair","Right","Some","True","Unit","PACK","UNPACK","BLAKE2B","SHA256","SHA512","ABS","ADD","AMOUNT","AND","BALANCE","CAR","CDR","CHECK_SIGNATURE","COMPARE","CONCAT","CONS","CREATE_ACCOUNT","CREATE_CONTRACT","IMPLICIT_ACCOUNT","DIP","DROP","DUP","EDIV","EMPTY_MAP","EMPTY_SET","EQ","EXEC","FAILWITH","GE","GET","GT","HASH_KEY","IF","IF_CONS","IF_LEFT","IF_NONE","INT","LAMBDA","LE","LEFT","LOOP","LSL","LSR","LT","MAP","MEM","MUL","NEG","NEQ","NIL","NONE","NOT","NOW","OR","PAIR","PUSH","RIGHT","SIZE","SOME","SOURCE","SENDER","SELF","STEPS_TO_QUOTA","SUB","SWAP","TRANSFER_TOKENS","SET_DELEGATE","UNIT","UPDATE","XOR","ITER","LOOP_LEFT","ADDRESS","CONTRACT","ISNAT","CAST","RENAME","bool","contract","int","key","key_hash","lambda","list","map","big_map","nat","option","or","pair","set","signature","string","bytes","mutez","timestamp","unit","operation","address","SLICE","DIG","DUG","EMPTY_BIG_MAP","APPLY","chain_id","CHAIN_ID","LEVEL","SELF_ADDRESS","never","NEVER","UNPAIR","VOTING_POWER","TOTAL_VOTING_POWER","KECCAK","SHA3","PAIRING_CHECK","bls12_381_g1","bls12_381_g2","bls12_381_fr","sapling_state","sapling_transaction","SAPLING_EMPTY_STATE","SAPLING_VERIFY_UPDATE","ticket","TICKET","READ_TICKET","SPLIT_TICKET","JOIN_TICKETS","GET_AND_UPDATE","chest","chest_key","OPEN_CHEST","VIEW","view","constant","SUB_MUTEZ","EMIT"];Object.assign({},...pa.map(((e,t)=>({[e]:t}))));var fa;!function(e){e[e.Int=0]="Int",e[e.String=1]="String",e[e.Sequence=2]="Sequence",e[e.Prim0=3]="Prim0",e[e.Prim0Annot=4]="Prim0Annot",e[e.Prim1=5]="Prim1",e[e.Prim1Annot=6]="Prim1Annot",e[e.Prim2=7]="Prim2",e[e.Prim2Annot=8]="Prim2Annot",e[e.Prim=9]="Prim",e[e.Bytes=10]="Bytes"}(fa||(fa={}));const ma=new Error("bounds out of range");class ga{constructor(e,t=0,n=e.length){this.buffer=e,this.idx=t,this.cap=n}get length(){return this.cap-this.idx}readBytes(e){if(this.cap-this.idx<e)throw ma;const t=this.buffer.slice(this.idx,this.idx+e);return this.idx+=e,t}reader(e){if(this.cap-this.idx<e)throw ma;const t=new ga(this.buffer,this.idx,this.idx+e);return this.idx+=e,t}copy(){return new ga(this.buffer,this.idx,this.cap)}readUint8(){if(this.cap-this.idx<1)throw ma;return this.buffer[this.idx++]>>>0}readUint16(){if(this.cap-this.idx<2)throw ma;return(this.buffer[this.idx++]<<8|this.buffer[this.idx++])>>>0}readUint32(){if(this.cap-this.idx<4)throw ma;return(this.buffer[this.idx++]<<24|this.buffer[this.idx++]<<16|this.buffer[this.idx++]<<8|this.buffer[this.idx++])>>>0}readInt8(){if(this.cap-this.idx<1)throw ma;return this.buffer[this.idx++]<<24>>24}readInt16(){if(this.cap-this.idx<2)throw ma;return(this.buffer[this.idx++]<<8|this.buffer[this.idx++])<<16>>16}readInt32(){if(this.cap-this.idx<4)throw ma;return this.buffer[this.idx++]<<24|this.buffer[this.idx++]<<16|this.buffer[this.idx++]<<8|this.buffer[this.idx++]}}var Ea,va,ya;function Aa(e){let t;const n=e.readUint8();switch(n){case va.ED25519:t="ED25519PublicKeyHash";break;case va.SECP256K1:t="SECP256K1PublicKeyHash";break;case va.P256:t="P256PublicKeyHash";break;default:throw new Error(`unknown public key hash tag: ${n}`)}return{type:t,hash:e.readBytes(20)}}function Ta(e){let t;const n=e.readUint8();switch(n){case Ea.Implicit:t=Aa(e);break;case Ea.Originated:t={type:"ContractHash",hash:e.readBytes(20)},e.readBytes(1);break;default:throw new Error(`unknown address tag: ${n}`)}if(0!==e.length){const n=new TextDecoder;t.entryPoint=n.decode(new Uint8Array(e.readBytes(e.length)))}return t}function ba(e){let t,n;const r=e.readUint8();switch(r){case ya.ED25519:n="ED25519PublicKey",t=32;break;case ya.SECP256K1:n="SECP256K1PublicKey",t=33;break;case ya.P256:n="P256PublicKey",t=33;break;default:throw new Error(`unknown public key tag: ${r}`)}return{type:n,publicKey:e.readBytes(t)}}!function(e){e[e.Implicit=0]="Implicit",e[e.Originated=1]="Originated"}(Ea||(Ea={})),function(e){e[e.ED25519=0]="ED25519",e[e.SECP256K1=1]="SECP256K1",e[e.P256=2]="P256"}(va||(va={})),function(e){e[e.ED25519=0]="ED25519",e[e.SECP256K1=1]="SECP256K1",e[e.P256=2]="P256"}(ya||(ya={}));class Sa extends wo{constructor(e,t,n){super(e,n),this.stackState=t,Object.setPrototypeOf(this,Sa.prototype)}}function wa(e){return Array.isArray(e)?"pair":e.prim}function Ra(e){return"prim"in e?e.args:e}function _a(e,t,n=!1){if(wa(e)!==wa(t))throw new Ro(e,void 0,`types mismatch: ${wa(e)} != ${wa(t)}`);const r=[xo(e),xo(t)];if(r[0].t&&r[1].t&&r[0].t[0]!==r[1].t[0])throw new Ro(e,void 0,`${wa(e)}: type names mismatch: ${r[0].t[0]} != ${r[1].t[0]}`);if(n&&r[0].f&&r[1].f&&r[0].f[0]!==r[1].f[0])throw new Ro(e,void 0,`${wa(e)}: field names mismatch: ${r[0].f[0]} != ${r[1].f}`);if(Do(e)){const n=Lo("pair",e),r=Lo("pair",t);return _a(n.args[0],r.args[0],!0),void _a(n.args[1],r.args[1],!0)}switch(e.prim){case"option":case"list":case"contract":case"set":case"ticket":_a(e.args[0],t.args[0]);break;case"or":_a(e.args[0],t.args[0],!0),_a(e.args[1],t.args[1],!0);break;case"lambda":case"map":case"big_map":_a(e.args[0],t.args[0]),_a(e.args[1],t.args[1]);break;case"sapling_state":case"sapling_transaction":if(parseInt(e.args[0].int,10)!==parseInt(t.args[0].int,10))throw new Ro(e,void 0,`${wa(e)}: type argument mismatch: ${e.args[0].int} != ${t.args[0].int}`)}}function Oa(e,t){if(e.length!==t.length)throw new Ro(e,void 0,`stack length mismatch: ${e.length} != ${t.length}`);for(let n=0;n<e.length;n++)_a(e[n],t[n])}function Na(e,t=!1){var n,r,i;if(!Array.isArray(e)){const s=xo(e);if(((null===(n=s.t)||void 0===n?void 0:n.length)||0)>1)throw new Ro(e,void 0,`${e.prim}: at most one type annotation allowed: ${e.annots}`);if(t){if(((null===(r=s.f)||void 0===r?void 0:r.length)||0)>1)throw new Ro(e,void 0,`${e.prim}: at most one field annotation allowed: ${e.annots}`)}else if(((null===(i=s.f)||void 0===i?void 0:i.length)||0)>0)throw new Ro(e,void 0,`${e.prim}: field annotations aren't allowed: ${e.annots}`)}if(Do(e)){const t=Ra(e);for(const e of t)Na(e,!0)}else switch(e.prim){case"option":case"list":case"contract":case"set":Na(e.args[0]);break;case"or":for(const t of e.args)Na(t,!0);break;case"lambda":case"map":case"big_map":Na(e.args[0]),Na(e.args[1])}}function Pa(e){if(!Array.isArray(e))return!1;for(const t of e)if(!(Array.isArray(t)&&Pa(t)||"prim"in t&&da(t)))return!1;return!0}function Ia(e,t,n){if(Do(t)){if(Mo(e)){ha(e);const r=Lo("Pair",e),i=Lo("pair",t);return Ia(r.args[0],i.args[0],n),void Ia(r.args[1],i.args[1],n)}throw new Ro(t,e,`pair expected: ${JSON.stringify(e)}`)}switch(t.prim){case"int":if("int"in e&&No(e.int))return;throw new Ro(t,e,`integer value expected: ${JSON.stringify(e)}`);case"nat":case"mutez":if("int"in e&&Po(e.int))return;throw new Ro(t,e,`natural value expected: ${JSON.stringify(e)}`);case"string":if("string"in e)return;throw new Ro(t,e,`string value expected: ${JSON.stringify(e)}`);case"bytes":case"bls12_381_g1":case"bls12_381_g2":if("bytes"in e&&null!==Oo(e.bytes))return;throw new Ro(t,e,`bytes value expected: ${JSON.stringify(e)}`);case"bool":if("prim"in e&&("True"===e.prim||"False"===e.prim))return;throw new Ro(t,e,`boolean value expected: ${JSON.stringify(e)}`);case"key_hash":if("string"in e&&null!==ko(e.string,"ED25519PublicKeyHash","SECP256K1PublicKeyHash","P256PublicKeyHash"))return;if("bytes"in e)try{return void function(e){const t=Oo(e.bytes);if(null===t)throw new Error(`can't parse bytes: "${e.bytes}"`);Aa(new ga(new Uint8Array(t)))}(e)}catch(r){}throw new Ro(t,e,`key hash expected: ${JSON.stringify(e)}`);case"timestamp":if(("string"in e||"int"in e)&&null!==Bo(e))return;throw new Ro(t,e,`timestamp expected: ${JSON.stringify(e)}`);case"address":if("string"in e){let t=e.string;const n=e.string.indexOf("%");if(n>=0&&(t=e.string.slice(0,n)),null!==ko(t,"ED25519PublicKeyHash","SECP256K1PublicKeyHash","P256PublicKeyHash","ContractHash","TxRollupL2Address","RollupAddress"))return}else if("bytes"in e)try{return void function(e){const t=Oo(e.bytes);if(null===t)throw new Error(`can't parse bytes: "${e.bytes}"`);Ta(new ga(new Uint8Array(t)))}(e)}catch(r){}throw new Ro(t,e,`address expected: ${JSON.stringify(e)}`);case"key":if("string"in e&&null!==ko(e.string,"ED25519PublicKey","SECP256K1PublicKey","P256PublicKey"))return;if("bytes"in e)try{return void function(e){const t=Oo(e.bytes);if(null===t)throw new Error(`can't parse bytes: "${e.bytes}"`);ba(new ga(new Uint8Array(t)))}(e)}catch(r){}throw new Ro(t,e,`public key expected: ${JSON.stringify(e)}`);case"unit":if("prim"in e&&"Unit"===e.prim)return;throw new Ro(t,e,`unit value expected: ${JSON.stringify(e)}`);case"signature":if("bytes"in e||"string"in e&&null!==ko(e.string,"ED25519Signature","SECP256K1Signature","P256Signature","GenericSignature"))return;throw new Ro(t,e,`signature expected: ${JSON.stringify(e)}`);case"chain_id":if("bytes"in e||"string"in e){if(null!==("string"in e?go(e.string):Oo(e.bytes)))return}throw new Ro(t,e,`chain id expected: ${JSON.stringify(e)}`);case"option":if("prim"in e){if("None"===e.prim)return;if("Some"===e.prim)return void Ia(e.args[0],t.args[0],n)}throw new Ro(t,e,`option expected: ${JSON.stringify(e)}`);case"list":case"set":if(ha(e)){for(const r of e)Ia(r,t.args[0],n);return}throw new Ro(t,e,`${t.prim} expected: ${JSON.stringify(e)}`);case"or":if("prim"in e){if("Left"===e.prim)return void Ia(e.args[0],t.args[0],n);if("Right"===e.prim)return void Ia(e.args[0],t.args[1],n)}throw new Ro(t,e,`union (or) expected: ${JSON.stringify(e)}`);case"lambda":if(Pa(e)){const r=xa(e,[t.args[0]],n);if("failed"in r)throw new Ro(t,e,`function is failed with error type: ${r.failed}`);if(1!==r.length)throw new Ro(t,e,"function must return a value");return void _a(t.args[1],r[0])}throw new Ro(t,e,`function expected: ${JSON.stringify(e)}`);case"map":case"big_map":if(Array.isArray(e)){for(const r of e){if(!("prim"in r)||"Elt"!==r.prim)throw new Ro(t,e,`map elements expected: ${JSON.stringify(e)}`);Ia(r.args[0],t.args[0],n),Ia(r.args[1],t.args[1],n)}return}throw new Ro(t,e,`${t.prim} expected: ${JSON.stringify(e)}`);case"bls12_381_fr":if("int"in e&&No(e.int)||"bytes"in e&&null!==Oo(e.bytes))return;throw new Ro(t,e,`BLS12-381 element expected: ${JSON.stringify(e)}`);case"sapling_state":if(Array.isArray(e))return;throw new Ro(t,e,`sapling state expected: ${JSON.stringify(e)}`);case"ticket":return void Ia(e,{prim:"pair",args:[{prim:"address"},t.args[0],{prim:"nat"}]},n);default:throw new Ro(t,e,`type ${wa(t)} don't have Michelson literal representation`)}}function xa(e,t,n){const r=(null==n?void 0:n.protocol)||Ms;if(Array.isArray(e))return function(e,t,n){let r=t,i=t,s=0;for(const o of e){const e=xa(o,i,n);if(r=e,"failed"in e)break;i=e,s++}if("failed"in r&&0==r.level&&(!("prim"in r.failed)||"never"!==r.failed.prim)&&s!==e.length-1)throw new Sa(e,r,"FAIL must appear in a tail position");if(void 0!==(null==n?void 0:n.traceCallback)){const i={op:e,in:t,out:r};n.traceCallback(i)}return"failed"in r?{failed:r.failed,level:r.level+1}:r}(e,t,n);const i=e;function s(e,...n){if(t.length<n.length+e)throw new Sa(i,t,`${i.prim}: stack must have at least ${n.length} element(s)`);let r=e;for(const s of n){if(null!==s&&0!==s.length){let e=0;for(;e<s.length&&s[e]!==wa(t[r]);)e++;if(e===s.length)throw new Sa(i,t,`${i.prim}: stack type mismatch: [${r}] expected to be ${s}, got ${wa(t[r])} instead`)}r++}return t.slice(e,n.length+e)}function o(e){return(...n)=>{try{return e(...n)}catch(r){throw r instanceof wo?new Sa(i,t,r.message):r}}}function a(e){return n=>{try{return e(n)}catch(r){throw r instanceof wo?new Sa(i,t,r.message):r}}}const c=o(xo),l=o(Oa),u=o(_a),d=a($o),h=a(ea),p=a(na),f=a(ta),m=a(ia);function g(e,n){const r=c(i,Object.assign(Object.assign({},n),{emptyFields:void 0!==e.f&&e.f>1,emptyVar:void 0!==e.v&&e.v>1})),s=(e,n,r)=>{if(e&&e.length>(n||0))throw new Sa(i,t,`${i.prim}: at most ${n||0} ${r} annotations allowed`)};return s(r.f,e.f,"field"),s(r.t,e.t,"type"),s(r.v,e.v,"variable"),r}function E(e,t){const n=e,r=Array.isArray(n)?{prim:"pair",args:n}:n,i=c(r),s=void 0!==t.v||void 0!==t.t||void 0!==t.f?[...(null===t.v?i.v:t.v)||[],...(null===t.t?i.t:t.t)||[],...(null===t.f?i.f:t.f)||[]]:void 0,o=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(r,["annots"]);return Object.assign(Object.assign({},o),s&&0!==s.length&&{annots:s})}function v(e,t){const n=g({v:1});return E(e,{v:void 0!==n.v?n.v:void 0!==t?[t]:null,t:null})}function y(e,n,r,s,o){var a,l,u,d;const h=null===(a=c(n).f)||void 0===a?void 0:a[0],p=null===(l=r.f)||void 0===l?void 0:l[s];if(void 0!==p&&"%"!==p&&void 0!==h&&p!==h)throw new Sa(i,t,`${i.prim}: field names doesn't match: ${p} !== ${h}`);const f=null===(u=r.v)||void 0===u?void 0:u[s],m=null===(d=c(e).v)||void 0===d?void 0:d[0];return E(n,{t:null,v:f?"@%"===f?h?["@"+h.slice(1)]:void 0:"@%%"===f?m?["@"+m.slice(1)+"."+(h?h.slice(1):o)]:h?["@"+h.slice(1)]:void 0:[f]:null})}function A(e,n,r=n){const s=Lo("pair",e);if(1===r)return[s.args[0]];if(2===r)return s.args;const o=s.args[1];if(Do(o))return[s.args[0],...A(o,n,r-1)];throw new Sa(i,t,`${i.prim}: at least ${n} fields are expected`)}function T(e,n,r=n){if(0===r)return e;const s=Lo("pair",e);if(1===r)return s.args[0];const o=s.args[1];if(Do(o))return T(o,n,r-2);if(2===r)return o;throw new Sa(i,t,`${i.prim}: at least ${n+1} fields are expected`)}function b(e,n,r,s=r){if(0===s)return n;const o=Lo("pair",e);if(1===s)return Object.assign(Object.assign({},o),{args:[n,o.args[1]]});const a=o.args[1];if(Do(a))return Object.assign(Object.assign({},o),{args:[o.args[0],b(a,n,r,s-2)]});if(2===s)return Object.assign(Object.assign({},o),{args:[o.args[0],n]});throw new Sa(i,t,`${i.prim}: at least ${r+1} fields are expected`)}const S=(e,t)=>["@"+(e.v?e.v[0].slice(1)+".":"")+t];function w(e,t){return"failed"in e||"failed"in t?"failed"in e?t:e:(l(e,t),e)}const R=(e=>{var i,o,a,R,_;switch(e.prim){case"DUP":{const n=e.args?parseInt(e.args[0].int,10):1;if(0===n)throw new Sa(e,t,"DUP 0 is forbidden");const r=s(n-1,null)[0];if("ticket"===wa(r))throw new Sa(e,t,"ticket can't be DUPed");return[r,...t]}case"SWAP":{const e=s(0,null,null);return g({}),[e[1],e[0],...t.slice(2)]}case"SOME":return[E({prim:"option",args:[s(0,null)[0]]},g({t:1,v:1})),...t.slice(1)];case"UNIT":return[E({prim:"unit"},g({v:1,t:1})),...t];case"PAIR":{const n=e.args?parseInt(e.args[0].int,10):2;if(n<2)throw new Sa(e,t,`PAIR ${n} is forbidden`);const r=s(0,...new Array(n).fill(null)),i=g({f:n,t:1,v:1},{specialFields:!0}),o=e=>{const t=e.lastIndexOf(".");return e.slice(t>0?t+1:1)},a=r.map(((e,t)=>{var n;const r=c(e);return E(e,{v:null,t:null,f:i.f&&i.f.length>t&&"%"!==i.f[t]?"%@"===i.f[t]?r.v?["%"+o((null===(n=r.v)||void 0===n?void 0:n[0])||"")]:void 0:[i.f[t]]:void 0})}));return[E({prim:"pair",args:a},{t:i.t,v:i.v}),...t.slice(n)]}case"UNPAIR":{const n=e.args?parseInt(e.args[0].int,10):2;if(n<2)throw new Sa(e,t,`UNPAIR ${n} is forbidden`);const r=s(0,["pair"])[0],i=g({f:2,v:2},{specialVar:!0});return[...A(r,n).map(((e,t)=>y(r,e,i,t,0===t?"car":"cdr"))),...t.slice(1)]}case"CAR":case"CDR":{const n=Lo("pair",s(0,["pair"])[0]);return[y(n,n.args["CAR"===e.prim?0:1],g({f:1,v:1},{specialVar:!0}),0,e.prim.toLocaleLowerCase()),...t.slice(1)]}case"CONS":{const e=s(0,null,["list"]);return u(e[0],e[1].args[0]),[v({prim:"list",args:[e[1].args[0]]}),...t.slice(2)]}case"SIZE":return s(0,["string","list","set","map","bytes"]),[v({prim:"nat"}),...t.slice(1)];case"MEM":{const e=s(0,null,["set","map","big_map"]);return d(e[0]),u(e[0],e[1].args[0]),[v({prim:"bool"}),...t.slice(2)]}case"GET":if(e.args){const n=parseInt(e.args[0].int,10);return[v(T(s(0,["pair"])[0],n)),...t.slice(1)]}{const e=s(0,null,["map","big_map"]);return d(e[0]),u(e[0],e[1].args[0]),[v({prim:"option",args:[e[1].args[1]]}),...t.slice(2)]}case"UPDATE":if(e.args){const n=parseInt(e.args[0].int,10),r=s(0,null,["pair"]);return[v(b(r[1],r[0],n)),...t.slice(2)]}{const e=s(0,null,["bool","option"]);if(d(e[0]),"bool"===e[1].prim){const n=s(2,["set"]);return u(e[0],n[0].args[0]),[v({prim:"set",args:[E(e[0],{t:null})]}),...t.slice(3)]}const n=s(2,["map","big_map"]);return u(e[0],n[0].args[0]),"map"===n[0].prim?[v({prim:"map",args:[E(e[0],{t:null}),E(e[1].args[0],{t:null})]}),...t.slice(3)]:(m(e[1].args[0]),[v({prim:"big_map",args:[E(e[0],{t:null}),E(e[1].args[0],{t:null})]}),...t.slice(3)])}case"GET_AND_UPDATE":{const e=g({v:2}),n=s(0,null,["option"],["map","big_map"]);d(n[0]),u(n[0],n[2].args[0]),u(n[1].args[0],n[2].args[1]);const r=null===(i=e.v)||void 0===i?void 0:i.map((e=>"@"!==e?[e]:void 0));return"map"===n[2].prim?[E({prim:"option",args:[n[2].args[1]]},{v:null==r?void 0:r[0]}),E({prim:"map",args:[E(n[0],{t:null}),E(n[1].args[0],{t:null})]},{v:null==r?void 0:r[1]}),...t.slice(3)]:(m(n[1].args[0]),[E({prim:"option",args:[n[2].args[1]]},{v:null==r?void 0:r[0]}),E({prim:"big_map",args:[E(n[0],{t:null}),E(n[1].args[0],{t:null})]},{v:null==r?void 0:r[1]}),...t.slice(3)])}case"EXEC":{const e=s(0,null,["lambda"]);return u(e[0],e[1].args[0]),[v(e[1].args[1]),...t.slice(2)]}case"APPLY":{const n=s(0,null,["lambda"]);if(p(n[0]),f(n[0]),!Do(n[1].args[0]))throw new Sa(e,t,`${e.prim}: function's argument must be a pair: ${wa(n[1].args[0])}`);const r=n[1].args[0];return u(n[0],Ra(r)[0]),[v({prim:"lambda",args:[Ra(r)[1],n[1].args[1]]}),...t.slice(2)]}case"FAILWITH":{const e=s(0,null)[0];return Bs(r,Ds.PtEdo2Zk)||h(e),{failed:e,level:0}}case"NEVER":return s(0,["never"]),{failed:{prim:"never"},level:0};case"RENAME":return[v(s(0,null)[0]),...t.slice(1)];case"CONCAT":{const n=s(0,["string","list","bytes"]);if("list"===n[0].prim){if("string"!==wa(n[0].args[0])&&"bytes"!==wa(n[0].args[0]))throw new Sa(e,t,`${e.prim}: can't concatenate list of ${wa(n[0].args[0])}'s`);return[v(n[0].args[0]),...t.slice(1)]}const r=s(1,["string","bytes"]);if(n[0].prim!==r[0].prim)throw new Sa(e,t,`${e.prim}: can't concatenate ${n[0].prim} with ${r[0].prim}`);return[v(r[0]),...t.slice(2)]}case"SLICE":return[v({prim:"option",args:[s(0,["nat"],["nat"],["string","bytes"])[2]]},"@slice"),...t.slice(3)];case"PACK":{const e=s(0,null)[0];return h(e),[v({prim:"bytes"},"@packed"),...t.slice(1)]}case"ADD":{const n=s(0,["nat","int","timestamp","mutez","bls12_381_g1","bls12_381_g2","bls12_381_fr"],["nat","int","timestamp","mutez","bls12_381_g1","bls12_381_g2","bls12_381_fr"]);if("nat"===n[0].prim&&"int"===n[1].prim||"int"===n[0].prim&&"nat"===n[1].prim)return[v({prim:"int"}),...t.slice(2)];if("int"===n[0].prim&&"timestamp"===n[1].prim||"timestamp"===n[0].prim&&"int"===n[1].prim)return[v({prim:"timestamp"}),...t.slice(2)];if(("int"===n[0].prim||"nat"===n[0].prim||"mutez"===n[0].prim||"bls12_381_g1"===n[0].prim||"bls12_381_g2"===n[0].prim||"bls12_381_fr"===n[0].prim)&&n[0].prim===n[1].prim)return[v(n[0]),...t.slice(2)];throw new Sa(e,t,`${e.prim}: can't add ${n[0].prim} to ${n[1].prim}`)}case"SUB":{const n=Bs(r,Ds.PsiThaCa)?s(0,["nat","int","timestamp","mutez"],["nat","int","timestamp","mutez"]):s(0,["nat","int","timestamp"],["nat","int","timestamp"]);if(("nat"===n[0].prim||"int"===n[0].prim)&&("nat"===n[1].prim||"int"===n[1].prim)||"timestamp"===n[0].prim&&"timestamp"===n[1].prim)return[v({prim:"int"}),...t.slice(2)];if("timestamp"===n[0].prim&&"int"===n[1].prim)return[v({prim:"timestamp"}),...t.slice(2)];if("mutez"===n[0].prim&&"mutez"===n[1].prim)return[v({prim:"mutez"}),...t.slice(2)];throw new Sa(e,t,`${e.prim}: can't subtract ${n[0].prim} from ${n[1].prim}`)}case"SUB_MUTEZ":return s(0,["mutez"],["mutez"]),[v({prim:"option",args:[{prim:"mutez"}]}),...t.slice(2)];case"MUL":{const n=s(0,["nat","int","mutez","bls12_381_g1","bls12_381_g2","bls12_381_fr"],["nat","int","mutez","bls12_381_g1","bls12_381_g2","bls12_381_fr"]);if("nat"===n[0].prim&&"int"===n[1].prim||"int"===n[0].prim&&"nat"===n[1].prim)return[v({prim:"int"}),...t.slice(2)];if("nat"===n[0].prim&&"mutez"===n[1].prim||"mutez"===n[0].prim&&"nat"===n[1].prim)return[v({prim:"mutez"}),...t.slice(2)];if(("bls12_381_g1"===n[0].prim||"bls12_381_g2"===n[0].prim||"bls12_381_fr"===n[0].prim)&&"bls12_381_fr"===n[1].prim||("nat"===n[0].prim||"int"===n[0].prim)&&n[0].prim===n[1].prim)return[v(n[0]),...t.slice(2)];if(("nat"===n[0].prim||"int"===n[0].prim)&&"bls12_381_fr"===n[1].prim||("nat"===n[1].prim||"int"===n[1].prim)&&"bls12_381_fr"===n[0].prim)return[v({prim:"bls12_381_fr"}),...t.slice(2)];throw new Sa(e,t,`${e.prim}: can't multiply ${n[0].prim} by ${n[1].prim}`)}case"EDIV":{const n=(e,t)=>({prim:"option",args:[{prim:"pair",args:[{prim:e},{prim:t}]}]}),r=s(0,["nat","int","mutez"],["nat","int","mutez"]);if("nat"===r[0].prim&&"nat"===r[1].prim)return[v(n("nat","nat")),...t.slice(2)];if(!("nat"!==r[0].prim&&"int"!==r[0].prim||"nat"!==r[1].prim&&"int"!==r[1].prim))return[v(n("int","nat")),...t.slice(2)];if("mutez"===r[0].prim&&"nat"===r[1].prim)return[v(n("mutez","mutez")),...t.slice(2)];if("mutez"===r[0].prim&&"mutez"===r[1].prim)return[v(n("nat","mutez")),...t.slice(2)];throw new Sa(e,t,`${e.prim}: can't euclideally divide ${r[0].prim} by ${r[1].prim}`)}case"ABS":return s(0,["int"]),[v({prim:"nat"}),...t.slice(1)];case"ISNAT":return s(0,["int"]),[v({prim:"option",args:[{prim:"nat"}]}),...t.slice(1)];case"INT":return s(0,["nat","bls12_381_fr"]),[v({prim:"int"}),...t.slice(1)];case"NEG":{const e=s(0,["nat","int","bls12_381_g1","bls12_381_g2","bls12_381_fr"])[0];return"nat"===e.prim||"int"===e.prim?[v({prim:"int"}),...t.slice(1)]:[v(e),...t.slice(1)]}case"LSL":case"LSR":return s(0,["nat"],["nat"]),[v({prim:"nat"}),...t.slice(2)];case"OR":case"XOR":{const n=s(0,["nat","bool"],["nat","bool"]);if(n[0].prim!==n[1].prim)throw new Sa(e,t,`${e.prim}: both arguments must be of the same type: ${n[0].prim}, ${n[1].prim}`);return[v(n[1]),...t.slice(2)]}case"AND":{const n=s(0,["nat","bool","int"],["nat","bool"]);if(("int"!==n[0].prim||"nat"!==n[1].prim)&&n[0].prim!==n[1].prim)throw new Sa(e,t,`${e.prim}: both arguments must be of the same type: ${n[0].prim}, ${n[1].prim}`);return[v(n[1]),...t.slice(2)]}case"NOT":return"bool"===s(0,["nat","bool","int"])[0].prim?[v({prim:"bool"}),...t.slice(1)]:[v({prim:"int"}),...t.slice(1)];case"COMPARE":{const e=s(0,null,null);return d(e[0]),d(e[1]),[v({prim:"int"}),...t.slice(2)]}case"EQ":case"NEQ":case"LT":case"GT":case"LE":case"GE":return s(0,["int"]),[v({prim:"bool"}),...t.slice(1)];case"SELF":{if(void 0===(null==n?void 0:n.contract))throw new Sa(e,t,`${e.prim}: contract required`);const r=g({f:1,v:1}),i=La(n.contract,null===(o=r.f)||void 0===o?void 0:o[0]);if(null===i)throw new Sa(e,t,`${e.prim}: contract has no entrypoint ${i}`);return[E({prim:"contract",args:[i]},{v:r.v?r.v:["@self"]}),...t]}case"TRANSFER_TOKENS":{const e=s(0,null,["mutez"],["contract"]);return u(e[0],e[2].args[0]),[v({prim:"operation"}),...t.slice(3)]}case"SET_DELEGATE":{const n=s(0,["option"])[0];if("key_hash"!==wa(n.args[0]))throw new Sa(e,t,`${e.prim}: key hash expected: ${wa(n.args[0])}`);return[v({prim:"operation"}),...t.slice(1)]}case"IMPLICIT_ACCOUNT":return s(0,["key_hash"]),[v({prim:"contract",args:[{prim:"unit"}]}),...t.slice(1)];case"NOW":return[v({prim:"timestamp"},"@now"),...t];case"AMOUNT":return[v({prim:"mutez"},"@amount"),...t];case"BALANCE":return[v({prim:"mutez"},"@balance"),...t];case"CHECK_SIGNATURE":return s(0,["key"],["signature"],["bytes"]),[v({prim:"bool"}),...t.slice(3)];case"BLAKE2B":case"SHA256":case"SHA512":case"KECCAK":case"SHA3":return s(0,["bytes"]),[v({prim:"bytes"}),...t.slice(1)];case"HASH_KEY":return s(0,["key"]),[v({prim:"key_hash"}),...t.slice(1)];case"SOURCE":return[v({prim:"address"},"@source"),...t];case"SENDER":return[v({prim:"address"},"@sender"),...t];case"ADDRESS":{const e=s(0,["contract"])[0],n=g({v:1});return[E({prim:"address",[Ls]:e},{v:n.v?n.v:S(c(e),"address")}),...t.slice(1)]}case"SELF_ADDRESS":{const e={prim:"address"};return void 0!==(null==n?void 0:n.contract)&&(e[Ls]={prim:"contract",args:[Ca(n.contract,"parameter").args[0]]}),[v(e,"@address"),...t]}case"CHAIN_ID":return[v({prim:"chain_id"}),...t];case"DROP":{g({});const n=void 0!==e.args?parseInt(e.args[0].int,10):1;return s(n-1,null),t.slice(n)}case"DIG":{g({});const n=parseInt(e.args[0].int,10);return[s(n,null)[0],...t.slice(0,n),...t.slice(n+1)]}case"DUG":{g({});const n=parseInt(e.args[0].int,10);return[...t.slice(1,n+1),s(0,null)[0],...t.slice(n+1)]}case"NONE":return Na(e.args[0]),[E({prim:"option",args:[e.args[0]]},g({t:1,v:1})),...t];case"LEFT":case"RIGHT":{const n=s(0,null)[0],r=g({f:2,t:1,v:1},{specialFields:!0}),i=c(n),o=[E(n,{t:null,v:null,f:r.f&&r.f.length>0&&"%"!==r.f[0]?"%@"===r.f[0]?i.v?["%"+i.v[0].slice(1)]:void 0:r.f:void 0}),E(e.args[0],{t:null,f:r.f&&r.f.length>1&&"%"!==r.f[1]?r.f:void 0})];return[E({prim:"or",args:"LEFT"===e.prim?o:[o[1],o[0]]},{t:r.t,v:r.v}),...t.slice(1)]}case"NIL":return Na(e.args[0]),[E({prim:"list",args:[e.args[0]]},g({t:1,v:1})),...t];case"UNPACK":return s(0,["bytes"]),Na(e.args[0]),[v({prim:"option",args:[e.args[0]]},"@unpacked"),...t.slice(1)];case"CONTRACT":{const n=s(0,["address"])[0];Na(e.args[0]);const r=g({v:1,f:1}),i=n[Ls];if(void 0!==i){const n=La(i,null===(a=r.f)||void 0===a?void 0:a[0]);if(null===n)throw new Sa(e,t,`${e.prim}: contract has no entrypoint ${n}`);u(n,e.args[0])}return[E({prim:"option",args:[{prim:"contract",args:[e.args[0]]}]},{v:r.v?r.v:S(c(n),"contract")}),...t.slice(1)]}case"CAST":{g({});const n=s(0,null)[0];return Na(e.args[0]),u(e.args[0],n),[e.args[0],...t.slice(1)]}case"IF_NONE":{g({});const r=s(0,["option"])[0],i=t.slice(1);return w(xa(e.args[0],i,n),xa(e.args[1],[E(r.args[0],{t:null,v:S(c(r),"some")}),...i],n))}case"IF_LEFT":{g({});const r=s(0,["or"])[0],i=c(r),o=c(r.args[0]),a=c(r.args[1]),l=t.slice(1);return w(xa(e.args[0],[E(r.args[0],{t:null,v:S(i,o.f?o.f[0].slice(1):"left")}),...l],n),xa(e.args[1],[E(r.args[1],{t:null,v:S(i,a.f?a.f[0].slice(1):"right")}),...l],n))}case"IF_CONS":{g({});const r=s(0,["list"])[0],i=c(r),o=t.slice(1);return w(xa(e.args[0],[E(r.args[0],{t:null,v:S(i,"hd")}),E(r,{t:null,v:S(i,"tl")}),...o],n),xa(e.args[1],o,n))}case"IF":{g({}),s(0,["bool"]);const r=t.slice(1);return w(xa(e.args[0],r,n),xa(e.args[1],r,n))}case"MAP":{const r=s(0,["list","map","option"])[0],i=t.slice(1),o="map"===r.prim?{prim:"pair",args:r.args}:r.args[0],a=xa(e.args[0],[E(o,{t:null,v:S(c(r),"elt")}),...i],n);if("failed"in a){if(!("prim"in a.failed)||"never"!==a.failed.prim)throw new Sa(e,t,`${e.prim}: FAIL is not allowed in MAP`);return{failed:a.failed,level:a.level+1}}if(a.length<1)throw new Sa(e,t,`${e.prim}: function must return a value`);return l(a.slice(1),i),"list"===r.prim?[v({prim:"list",args:[a[0]]}),...i]:"map"===r.prim?[v({prim:"map",args:[r.args[0],a[0]]}),...i]:[v({prim:"option",args:[a[0]]}),...i]}case"ITER":{g({});const r=s(0,["set","list","map"])[0],i=t.slice(1),o="map"===r.prim?{prim:"pair",args:r.args}:r.args[0],a=xa(e.args[0],[E(o,{t:null,v:S(c(r),"elt")}),...i],n);return"failed"in a?{failed:a.failed,level:a.level+1}:(l(a,i),i)}case"LOOP":{g({}),s(0,["bool"]);const r=t.slice(1),i=xa(e.args[0],r,n);return"failed"in i?{failed:i.failed,level:i.level+1}:(l(i,[{prim:"bool"},...r]),r)}case"LOOP_LEFT":{g({});const r=s(0,["or"])[0],i=t.slice(1),o=xa(e.args[0],[E(r.args[0],{t:null,v:S(c(r),"left")}),...i],n);return"failed"in o?{failed:o.failed,level:o.level+1}:(l(o,[r,...i]),[E(r.args[1],{t:null,v:g({v:1}).v}),...i])}case"DIP":{g({});const r=2===e.args.length?parseInt(e.args[0].int,10):1;s(r-1,null);const i=t.slice(0,r),o=t.slice(r),a=2===e.args.length?xa(e.args[1],o,n):xa(e.args[0],o,n);return"failed"in a?{failed:a.failed,level:a.level+1}:[...i,...a]}case"CREATE_CONTRACT":{const n=g({v:2}),r=s(0,["option"],["mutez"],null);if("key_hash"!==wa(r[0].args[0]))throw new Sa(e,t,`${e.prim}: key hash expected: ${wa(r[0].args[0])}`);p(r[2])&&(Ma(e.args[0]),_a(Ca(e.args[0],"storage").args[0],r[2]));const i=null===(R=n.v)||void 0===R?void 0:R.map((e=>"@"!==e?[e]:void 0));return[E({prim:"operation"},{v:null==i?void 0:i[0]}),E({prim:"address",[Ls]:{prim:"contract",args:[Ca(e.args[0],"parameter").args[0]]}},{v:null==i?void 0:i[1]}),...t.slice(3)]}case"PUSH":return Na(e.args[0]),Ia(e.args[1],e.args[0],Object.assign(Object.assign({},n),{contract:void 0})),[v(e.args[0]),...t];case"EMPTY_SET":return Na(e.args[0]),d(e.args[0]),[E({prim:"set",args:e.args},g({t:1,v:1})),...t];case"EMPTY_MAP":return Na(e.args[0]),d(e.args[0]),Na(e.args[1]),[E({prim:"map",args:e.args},g({t:1,v:1})),...t];case"EMPTY_BIG_MAP":return Na(e.args[0]),d(e.args[0]),Na(e.args[1]),m(e.args[0]),[E({prim:"big_map",args:e.args},g({t:1,v:1})),...t];case"LAMBDA":{Na(e.args[0]),Na(e.args[1]);const r=xa(e.args[2],[e.args[0]],Object.assign(Object.assign({},n),{contract:void 0}));if("failed"in r)return{failed:r.failed,level:r.level+1};if(1!==r.length)throw new Sa(e,t,`${e.prim}: function must return a value`);return u(e.args[1],r[0]),[v({prim:"lambda",args:[e.args[0],e.args[1]]}),...t]}case"LEVEL":return[v({prim:"nat"},"@level"),...t];case"TOTAL_VOTING_POWER":case"MIN_BLOCK_TIME":return[v({prim:"nat"}),...t];case"VOTING_POWER":return s(0,["key_hash"]),[v({prim:"nat"}),...t.slice(1)];case"TICKET":{const e=s(0,null,["nat"])[0];return d(e),[E({prim:"ticket",args:[e]},g({t:1,v:1})),...t.slice(2)]}case"JOIN_TICKETS":{const n=Lo("pair",s(0,["pair"])[0]);if("ticket"!==wa(n.args[0]))throw new Sa(e,t,`${e.prim}: ticket expected: ${wa(n.args[0])}`);return u(n.args[0],n.args[1]),[v({prim:"option",args:[E(n.args[0],{t:null})]}),...t.slice(1)]}case"SPLIT_TICKET":{const n=s(0,["ticket"],["pair"]),r=Lo("pair",n[1]);if("nat"!==wa(r.args[0]))throw new Sa(e,t,`${e.prim}: nat expected: ${wa(r.args[0])}`);return u(r.args[0],r.args[1]),[v({prim:"option",args:[{prim:"pair",args:[E(n[0],{t:null}),E(n[0],{t:null})]}]}),...t.slice(2)]}case"READ_TICKET":{const e=g({v:2}),n=s(0,["ticket"])[0],r=null===(_=e.v)||void 0===_?void 0:_.map((e=>"@"!==e?[e]:void 0));return[E({prim:"pair",args:[{prim:"address"},E(n.args[0],{t:null}),{prim:"nat"}]},{v:null==r?void 0:r[0]}),E(n,{v:null==r?void 0:r[1],t:null}),...t.slice(1)]}case"PAIRING_CHECK":{const n=s(0,["list"])[0].args[0];if(!Do(n))throw new Sa(e,t,`${e.prim}: pair expected: ${wa(n)}`);const r=Lo("pair",n);if("bls12_381_g1"!==wa(r.args[0]))throw new Sa(e,t,`${e.prim}: bls12_381_g1 expected: ${wa(r.args[0])}`);if("bls12_381_g2"!==wa(r.args[1]))throw new Sa(e,t,`${e.prim}: bls12_381_g2 expected: ${wa(r.args[1])}`);return[v({prim:"bool"}),...t.slice(1)]}case"SAPLING_EMPTY_STATE":return[E({prim:"sapling_state",args:[e.args[0]]},g({v:1,t:1})),...t];case"SAPLING_VERIFY_UPDATE":{const n=s(0,["sapling_transaction"],["sapling_state"]);if(parseInt(n[0].args[0].int,10)!==parseInt(n[1].args[0].int,10))throw new Sa(e,t,`${e.prim}: sapling memo size mismatch: ${n[0].args[0].int} != ${n[1].args[0].int}`);return Bs(r,Ds.PtJakarta)?[v({prim:"option",args:[{prim:"pair",args:[{prim:"int"},E(n[1],{t:null})]}]}),...t.slice(2)]:[v({prim:"option",args:[{prim:"pair",args:[{prim:"bytes"},{prim:"pair",args:[{prim:"int"},E(n[1],{t:null})]}]}]}),...t.slice(2)]}case"OPEN_CHEST":return s(0,["chest_key"],["chest"],["nat"]),[v({prim:"or",args:[{prim:"bytes"},{prim:"bool"}]}),...t.slice(3)];case"VIEW":{const n=s(0,null,["address"]);return f(n[0]),[v({prim:"option",args:[e.args[1]]}),...t.slice(2)]}case"EMIT":{const n=g({f:1,t:1});if(e.args){const r=s(0,null);return u(r[0],e.args[0]),[E({prim:"operation"},n),...t.slice(1)]}return[E({prim:"operation"},n),...t.slice(1)]}default:throw new wo(e,`unexpected instruction: ${e.prim}`)}})(i);if(void 0!==(null==n?void 0:n.traceCallback)){const e={op:i,in:t,out:R};n.traceCallback(e)}return R}function Ca(e,t){for(const n of e)if(n.prim===t)return n;throw new wo(e,`missing contract section: ${t}`)}function ka(e){if(Array.isArray(e))for(const t of e)if("prim"in t&&("parameter"===t.prim||"storage"===t.prim||"code"===t.prim))return!0;return!1}function La(e,t){t=t||"%default";const n=Da(e).find((e=>e[0]===t));return void 0!==n?n[1]:"%default"===t?ka(e)?Ca(e,"parameter").args[0]:e:null}function Da(e){if(ka(e)){const t=Ca(e,"parameter"),n=Da(t.args[0]),r=xo(t);return r.f?[[r.f[0],t.args[0]],...n]:n}if(t=e,Array.isArray(t)||"or"===t.prim){const t=Ra(e),n=e=>{const n=xo(t[e]);if("or"===wa(t[e])){const r=Da(t[e]);return n.f?[[n.f[0],t[e]],...r]:r}return n.f?[[n.f[0],t[e]]]:[]};return[...n(0),...n(1)]}var t;return[]}function Ma(e,t){const n=(n,r,i,s)=>{Na(n,!0),Na(r);const o=xa(s,[{prim:"pair",args:[Object.assign(Object.assign({},n),{annots:["@parameter"]}),Object.assign(Object.assign({},r),{annots:["@storage"]})]}],Object.assign(Object.assign({},t),{contract:e}));if("failed"in o)return o;try{Oa(o,[i])}catch(a){throw a instanceof wo?new Sa(s,o,a.message):a}return o},r=Ca(e,"parameter").args[0],i=Ca(e,"storage").args[0],s=n(r,i,{prim:"pair",args:[{prim:"list",args:[{prim:"operation"}]},i]},Ca(e,"code").args[0]);for(const o of Object.values(function(e){const t={};for(const n of e)"view"===n.prim&&(t[n.args[0].string]=n);return t}(e)))n(o.args[1],i,o.args[2],o.args[3]);return s}function Ua(e,t,n){Na(t),Ia(e,t,n||null)}class Ba{constructor(e,t){this.contract=e,this.ctx=Object.assign({contract:e},t),this.output=Ma(e,this.ctx)}static parse(e,t){const n=new ao(t),r="string"==typeof e?n.parseScript(e):n.parseJSON(e);if(null===r)throw new Eo("empty contract");if(ua(r))return new Ba(r,t)}static parseTypeExpression(e,t){const n=new ao(t),r="string"==typeof e?n.parseScript(e):n.parseJSON(e);if(null===r)throw new vo("empty type expression");if(aa(r))return Na(r),r}static parseDataExpression(e,t){const n=new ao(t),r="string"==typeof e?n.parseScript(e):n.parseJSON(e);if(null===r)throw new yo("empty data expression");if(la(r))return r;throw void 0}section(e){return Ca(this.contract,e)}entryPoints(){return Da(this.contract)}entryPoint(e){return La(this.contract,e)}assertDataValid(e,t){Ua(e,t,this.ctx)}isDataValid(e,t){return function(e,t,n){try{return Ua(e,t,n),!0}catch(ys){return!1}}(e,t,this.ctx)}assertParameterValid(e,t){const n=this.entryPoint(e||void 0);if(null===n)throw new Ao(null==e?void 0:e.toString());this.assertDataValid(t,n)}isParameterValid(e,t){try{return this.assertParameterValid(e,t),!0}catch(ys){return!1}}functionType(e,t){return function(e,t,n){for(const r of t)Na(r);if(void 0!==(null==n?void 0:n.contract))for(const r of["parameter","storage"])Na(Ca(n.contract,r).args[0]);return xa(e,t,n||null)}(e,t,this.ctx)}}new Ba([{prim:"parameter",args:[{prim:"unit"}]},{prim:"storage",args:[{prim:"unit"}]},{prim:"code",args:[[{prim:"CAR"},{prim:"NIL",args:[{prim:"operation"}]},{prim:"PAIR"}]]}]);var Ka=n(48764).Buffer;const ja=e=>e.reduce(((e,t)=>e+t.toString(16).padStart(2,"0")),""),Ha=(e,t=8)=>e.toString(16).padStart(t,"0");var Ga;!function(e){e.SECRET="secret",e.RAW="raw",e.TZ1="tz1",e.BRANCH="branch",e.ZARITH="zarith",e.PUBLIC_KEY="public_key",e.PKH="pkh",e.DELEGATE="delegate",e.SCRIPT="script",e.BALLOT_STATEMENT="ballotStmt",e.PROPOSAL="proposal",e.PROPOSAL_ARR="proposalArr",e.INT32="int32",e.INT16="int16",e.PARAMETERS="parameters",e.ADDRESS="address",e.SMART_CONTRACT_ADDRESS="smart_contract_address",e.VALUE="value",e.MANAGER="manager",e.BLOCK_PAYLOAD_HASH="blockPayloadHash",e.ENTRYPOINT="entrypoint",e.OPERATION="operation",e.OP_ACTIVATE_ACCOUNT="activate_account",e.OP_DELEGATION="delegation",e.OP_TRANSACTION="transaction",e.OP_ORIGINATION="origination",e.OP_BALLOT="ballot",e.OP_ENDORSEMENT="endorsement",e.OP_SEED_NONCE_REVELATION="seed_nonce_revelation",e.OP_REVEAL="reveal",e.OP_PROPOSALS="proposals",e.OP_REGISTER_GLOBAL_CONSTANT="register_global_constant",e.OP_TRANSFER_TICKET="transfer_ticket",e.OP_TX_ROLLUP_ORIGINATION="tx_rollup_origination",e.OP_TX_ROLLUP_SUBMIT_BATCH="tx_rollup_submit_batch",e.BURN_LIMIT="burn_limit",e.TX_ROLLUP_ORIGINATION_PARAM="tx_rollup_origination_param",e.TX_ROLLUP_ID="tx_rollup_id",e.TX_ROLLUP_BATCH_CONTENT="tx_rollup_batch_content",e.OP_INCREASE_PAID_STORAGE="increase_paid_storage"}(Ga||(Ga={}));const Va={"00":"parameter","01":"storage","02":"code","03":"False","04":"Elt","05":"Left","06":"None","07":"Pair","08":"Right","09":"Some","0a":"True","0b":"Unit","0c":"PACK","0d":"UNPACK","0e":"BLAKE2B","0f":"SHA256",10:"SHA512",11:"ABS",12:"ADD",13:"AMOUNT",14:"AND",15:"BALANCE",16:"CAR",17:"CDR",18:"CHECK_SIGNATURE",19:"COMPARE","1a":"CONCAT","1b":"CONS","1c":"CREATE_ACCOUNT","1d":"CREATE_CONTRACT","1e":"IMPLICIT_ACCOUNT","1f":"DIP",20:"DROP",21:"DUP",22:"EDIV",23:"EMPTY_MAP",24:"EMPTY_SET",25:"EQ",26:"EXEC",27:"FAILWITH",28:"GE",29:"GET","2a":"GT","2b":"HASH_KEY","2c":"IF","2d":"IF_CONS","2e":"IF_LEFT","2f":"IF_NONE",30:"INT",31:"LAMBDA",32:"LE",33:"LEFT",34:"LOOP",35:"LSL",36:"LSR",37:"LT",38:"MAP",39:"MEM","3a":"MUL","3b":"NEG","3c":"NEQ","3d":"NIL","3e":"NONE","3f":"NOT",40:"NOW",41:"OR",42:"PAIR",43:"PUSH",44:"RIGHT",45:"SIZE",46:"SOME",47:"SOURCE",48:"SENDER",49:"SELF","4a":"STEPS_TO_QUOTA","4b":"SUB","4c":"SWAP","4d":"TRANSFER_TOKENS","4e":"SET_DELEGATE","4f":"UNIT",50:"UPDATE",51:"XOR",52:"ITER",53:"LOOP_LEFT",54:"ADDRESS",55:"CONTRACT",56:"ISNAT",57:"CAST",58:"RENAME",59:"bool","5a":"contract","5b":"int","5c":"key","5d":"key_hash","5e":"lambda","5f":"list",60:"map",61:"big_map",62:"nat",63:"option",64:"or",65:"pair",66:"set",67:"signature",68:"string",69:"bytes","6a":"mutez","6b":"timestamp","6c":"unit","6d":"operation","6e":"address","6f":"SLICE",70:"DIG",71:"DUG",72:"EMPTY_BIG_MAP",73:"APPLY",74:"chain_id",75:"CHAIN_ID",76:"LEVEL",77:"SELF_ADDRESS",78:"never",79:"NEVER","7a":"UNPAIR","7b":"VOTING_POWER","7c":"TOTAL_VOTING_POWER","7d":"KECCAK","7e":"SHA3","7f":"PAIRING_CHECK",80:"bls12_381_g1",81:"bls12_381_g2",82:"bls12_381_fr",83:"sapling_state",84:"sapling_transaction_deprecated",85:"SAPLING_EMPTY_STATE",86:"SAPLING_VERIFY_UPDATE",87:"ticket",88:"TICKET",89:"READ_TICKET","8a":"SPLIT_TICKET","8b":"JOIN_TICKETS","8c":"GET_AND_UPDATE","8d":"chest","8e":"chest_key","8f":"OPEN_CHEST",90:"VIEW",91:"view",92:"constant",93:"SUB_MUTEZ",94:"tx_rollup_l2_address",95:"MIN_BLOCK_TIME",96:"sapling_transaction",97:"EMIT"},Fa=(()=>{const e={};return Object.keys(Va).forEach((t=>{e[Va[t]]=t})),e})(),qa={4:"activate_account",107:"reveal",110:"delegation",108:"transaction",109:"origination",6:"ballot",21:"endorsement",1:"seed_nonce_revelation",5:"proposals",111:"register_global_constant",150:"tx_rollup_origination",151:"tx_rollup_submit_batch",158:"transfer_ticket",113:"increase_paid_storage"},Qa=(()=>{const e={};return Object.keys(qa).forEach((t=>{const n="string"==typeof t?parseInt(t,10):t;e[qa[n]]=Ha(n,2)})),e})(),Wa={"00":"default","01":"root","02":"do","03":"set_delegate","04":"remove_delegate"},Ya=(()=>{const e={};return Object.keys(Wa).forEach((t=>{e[Wa[t]]=t})),e})();class za extends Error{constructor(e){super(e),this.message=e,this.name="InvalidBlockHashError"}}class Za extends Error{constructor(e){super(e),this.message=e,this.name="InvalidOperationSchemaError"}}class Ja extends Error{constructor(e){super(`Oversized entrypoint: ${e}. The maximum length of entrypoint is 31`),this.entrypoint=e,this.name="OversizedEntryPointError"}}class Xa extends Error{constructor(e){super(`The ballot value '${e}' is invalid`),this.ballotValue=e,this.name="InvalidBallotValueError"}}class $a extends Error{constructor(e){super(`Failed to decode ballot value ${e}`),this.ballotValue=e,this.name="DecodeBallotValueError"}}class ec extends Error{constructor(e){super(`The hex string '${e}' is invalid`),this.hexString=e,this.name="InvalidHexStringError"}}class tc extends Error{constructor(e){super(`Failed to encode michelson value '${e}'`),this.value=e,this.name="UnexpectedMichelsonValueError"}}class nc extends Error{constructor(e){super(e),this.message=e,this.name="OperationDecodingError"}}class rc extends Error{constructor(e){super(e),this.message=e,this.name="OperationEncodingError"}}class ic extends Error{constructor(e){super(`The operation '${e}' is unsupported`),this.op=e,this.name="UnsupportedOperationError"}}class sc{constructor(e,t=0){this.arr=e,this.offset=t}static fromHexString(e){const t=e.toLowerCase();if(/^(([a-f]|\d){2})*$/.test(t)){const e=new Uint8Array((t.match(/([a-z]|\d){2}/g)||[]).map((e=>parseInt(e,16))));return new sc(e)}throw new ec(t)}consume(e){const t=this.arr.subarray(this.offset,this.offset+e);return this.offset+=e,t}get(e){return this.arr[this.offset+e]}length(){return this.arr.length-this.offset}}const oc=e=>{if(Array.isArray(e)){const t=e.map((e=>oc(e))).join(""),n=t.length/2;return`02${Ha(n)}${t}`}if((e=>"prim"in e)(e))return mc(e);if((e=>"bytes"in e&&"string"==typeof e.bytes)(e))return lc(e);if((e=>"string"in e&&"string"==typeof e.string)(e))return dc(e);if((e=>"int"in e&&"string"==typeof e.int)(e))return pc(e);throw new tc(e)},ac=e=>{const t=e.consume(1);switch(t[0]){case 10:return uc(e);case 1:return hc(e);case 0:return fc(e);case 2:{const t=new sc(cc(e)),n=[];for(;t.length()>0;)n.push(ac(t));return n}default:return gc(e,t)}},cc=(e,t=4)=>{const n=e.consume(t),r=parseInt(Ka.from(n).toString("hex"),16);return e.consume(r)},lc=e=>{if(!/^([A-Fa-f0-9]{2})*$/.test(e.bytes))throw new ec(e.bytes);const t=e.bytes.length/2;return`0a${Ha(t)}${e.bytes}`},uc=e=>{const t=cc(e);return{bytes:Ka.from(t).toString("hex")}},dc=e=>{const t=Ka.from(e.string,"utf8").toString("hex"),n=t.length/2;return`01${Ha(n)}${t}`},hc=e=>{const t=cc(e);return{string:Ka.from(t).toString("utf8")}},pc=({int:e})=>{const t=new fr.O(e,10),n="-"===t.toString(2)[0]?"1":"0",r=t.toString(2).replace(/-/g,""),i=r.length<=6?6:(r.length-6)%7?r.length+7-(r.length-6)%7:r.length,s=r.padStart(i,"0").match(/\d{6,7}/g).reverse();s[0]=n+s[0];return`00${s.map(((e,t)=>parseInt((t===s.length-1?"0":"1")+e,2).toString(16).padStart(2,"0"))).join("")}`},fc=e=>{let t=e.consume(1)[0];const n=[];for(;128&t;)n.push(t),t=e.consume(1)[0];n.push(t);const r=!!(64&n[0]);n[0]=127&n[0];const i=n.map(((e,t)=>e.toString(2).slice(0===t?-6:-7).padStart(0===t?6:7,"0"))).reverse();let s=new fr.O(i.join(""),2);return r&&(s=s.times(-1)),{int:s.toFixed()}},mc=e=>{const t=+Array.isArray(e.annots),n=Array.isArray(e.args)?e.args.length:0,r=Ha(Math.min(2*n+t+3,9),2),i=Fa[e.prim];let s=(e.args||[]).map((e=>oc(e))).join("");const o=Array.isArray(e.annots)?yc(e.annots):"";return"LAMBDA"===e.prim&&n&&(s=Ha(s.length/2)+s+Ha(0)),("pair"===e.prim||"Pair"===e.prim)&&n>2&&(s=""===o?Ha(s.length/2)+s+Ha(0):Ha(s.length/2)+s),"view"===e.prim&&e.args&&(s=Ha(s.length/2)+s+Ha(0)),`${r}${i}${s}${o}`},gc=(e,t)=>{const n=(t[0]-3)%2==1;let r=Math.floor((t[0]-3)/2);const i=e.consume(1)[0].toString(16).padStart(2,"0"),s={prim:Va[i]};if("LAMBDA"===Va[i]&&e.consume(4),"view"===Va[i])return 0!=r?Ec(e,s):s;let o,a;("pair"===Va[i]||"Pair"===Va[i])&&r>2&&(o=vc(e),r=0,a=Ac(e));const c=new Array(r).fill(0).map((()=>ac(e)));return"LAMBDA"===Va[i]&&e.consume(4),o?s.args=o:c.length&&(s.args=c),a&&""!==a[0]?s.annots=a:n&&(s.annots=Ac(e)),s},Ec=(e,t)=>(e.consume(4),t.args=new Array(4).fill(0).map((()=>ac(e))),e.consume(4),t),vc=e=>{const t=new sc(cc(e)),n=[];for(;t.length()>0;)n.push(ac(t));return n},yc=e=>{const t=e.map((e=>Ka.from(e,"utf8").toString("hex"))).join("20"),n=t.length/2;return`${Ha(n)}${t}`},Ac=e=>{const t=e.consume(4),n=parseInt(Ka.from(t).toString("hex"),16),r=e.consume(n);return Ka.from(r).toString("hex").split("20").map((e=>Ka.from(e,"hex").toString("utf8")))},Tc=e=>t=>(0,mr.Cw)(Ka.from((0,mr.sA)(t,mr.O4[e]))),bc=e=>t=>{const n=t.consume(mr.r9[e]);return(0,mr.kM)(n,mr.O4[e])},Sc=bc(mr.oT.TZ1),wc=bc(mr.oT.B),Rc=e=>{const t=e.consume(1);return 0===t[0]?bc(mr.oT.TZ1)(e):1===t[0]?bc(mr.oT.TZ2)(e):2===t[0]?bc(mr.oT.TZ3)(e):void 0},_c=Tc(mr.oT.B),Oc=Tc(mr.oT.TZ1),Nc=e=>e?"ff":"00",Pc=e=>Tc(mr.oT.P)(e),Ic=e=>bc(mr.oT.P)(e),xc=e=>{switch(e.substr(0,3)){case mr.oT.TZ1:return"00"+Tc(mr.oT.TZ1)(e);case mr.oT.TZ2:return"01"+Tc(mr.oT.TZ2)(e);case mr.oT.TZ3:return"02"+Tc(mr.oT.TZ3)(e);default:throw new mr.Wo(e)}},Cc=e=>{const t=[];let n=new fr.Z(e,10);if(n.isNaN())throw new TypeError(`Invalid zarith number ${e}`);for(;;){if(n.lt(128)){n.lt(16)&&t.push("0"),t.push(n.toString(16));break}{let e=n.mod(128);n=n.minus(e),n=n.dividedBy(128),e=e.plus(128),t.push(e.toString(16))}}return t.join("")},kc=e=>{let t=0;for(;t<e.length()&&0!=(128&e.get(t));)t+=1;let n=new fr.Z(0);for(let r=t;r>=0;r-=1){const t=127&e.get(r);n=n.multipliedBy(128),n=n.plus(t)}return e.consume(t+1),new fr.Z(n).toString()},Lc=Tc(mr.oT.VH),Dc=bc(mr.oT.VH),Mc=Tc(mr.oT.TXR1),Uc=bc(mr.oT.TXR1),Bc={branch:Ga.BRANCH,contents:[Ga.OPERATION]},Kc={pkh:Ga.TZ1,secret:Ga.SECRET},jc={source:Ga.PKH,fee:Ga.ZARITH,counter:Ga.ZARITH,gas_limit:Ga.ZARITH,storage_limit:Ga.ZARITH,public_key:Ga.PUBLIC_KEY},Hc={source:Ga.PKH,fee:Ga.ZARITH,counter:Ga.ZARITH,gas_limit:Ga.ZARITH,storage_limit:Ga.ZARITH,delegate:Ga.DELEGATE},Gc={source:Ga.PKH,fee:Ga.ZARITH,counter:Ga.ZARITH,gas_limit:Ga.ZARITH,storage_limit:Ga.ZARITH,amount:Ga.ZARITH,destination:Ga.ADDRESS,parameters:Ga.PARAMETERS},Vc={source:Ga.PKH,fee:Ga.ZARITH,counter:Ga.ZARITH,gas_limit:Ga.ZARITH,storage_limit:Ga.ZARITH,balance:Ga.ZARITH,delegate:Ga.DELEGATE,script:Ga.SCRIPT},Fc={source:Ga.PKH,period:Ga.INT32,proposal:Ga.PROPOSAL,ballot:Ga.BALLOT_STATEMENT},qc={slot:Ga.INT16,level:Ga.INT32,round:Ga.INT32,block_payload_hash:Ga.BLOCK_PAYLOAD_HASH},Qc={level:Ga.INT32,nonce:Ga.RAW},Wc={source:Ga.PKH,period:Ga.INT32,proposals:Ga.PROPOSAL_ARR},Yc={source:Ga.PKH,fee:Ga.ZARITH,counter:Ga.ZARITH,gas_limit:Ga.ZARITH,storage_limit:Ga.ZARITH,value:Ga.VALUE},zc={source:Ga.PKH,fee:Ga.ZARITH,counter:Ga.ZARITH,gas_limit:Ga.ZARITH,storage_limit:Ga.ZARITH,ticket_contents:Ga.VALUE,ticket_ty:Ga.VALUE,ticket_ticketer:Ga.ADDRESS,ticket_amount:Ga.ZARITH,destination:Ga.ADDRESS,entrypoint:Ga.ENTRYPOINT},Zc={source:Ga.PKH,fee:Ga.ZARITH,counter:Ga.ZARITH,gas_limit:Ga.ZARITH,storage_limit:Ga.ZARITH,tx_rollup_origination:Ga.TX_ROLLUP_ORIGINATION_PARAM},Jc={source:Ga.PKH,fee:Ga.ZARITH,counter:Ga.ZARITH,gas_limit:Ga.ZARITH,storage_limit:Ga.ZARITH,rollup:Ga.TX_ROLLUP_ID,content:Ga.TX_ROLLUP_BATCH_CONTENT,burn_limit:Ga.BURN_LIMIT},Xc={source:Ga.PKH,fee:Ga.ZARITH,counter:Ga.ZARITH,gas_limit:Ga.ZARITH,storage_limit:Ga.ZARITH,amount:Ga.ZARITH,destination:Ga.SMART_CONTRACT_ADDRESS},$c=e=>t=>n=>Object.keys(t).reduce(((r,i)=>{const s=t[i];if(n&&Array.isArray(s)){const t=e[s[0]],o=n[i];if(!Array.isArray(o))throw new rc(`Expected value to be Array ${JSON.stringify(o)}`);return r+o.reduce(((e,n)=>e+t(n)),"")}return r+(0,e[s])(n[i])}),""),el=e=>t=>n=>Object.keys(t).reduce(((r,i)=>{const s=t[i];if(Array.isArray(s)){const t=e[s[0]],o=[],a=n.length();for(;n.length()>0;)if(o.push(t(n)),a===n.length())throw new nc("Unable to decode value");return Object.assign(Object.assign({},r),{[i]:o})}{const t=(0,e[s])(n);return void 0!==t?Object.assign(Object.assign({},r),{[i]:t}):Object.assign({},r)}}),{}),tl={[Ga.SECRET]:e=>ja(e.consume(20)),[Ga.RAW]:e=>ja(e.consume(32)),[Ga.TZ1]:Sc,[Ga.BRANCH]:wc,[Ga.ZARITH]:kc,[Ga.PUBLIC_KEY]:e=>{switch(e.consume(1)[0]){case 0:return bc(mr.oT.EDPK)(e);case 1:return bc(mr.oT.SPPK)(e);case 2:return bc(mr.oT.P2PK)(e);default:throw new mr.$$(e.toString())}},[Ga.PKH]:Rc,[Ga.DELEGATE]:e=>{const t=(e=>255===e.consume(1)[0])(e);if(t)return Rc(e)},[Ga.INT32]:e=>{const t=e.consume(4);let n=0;for(let r=0;r<t.length;r++)n|=t[r]<<8*(t.length-(r+1));return n},[Ga.SCRIPT]:e=>{const t=cc(e),n=cc(e);return{code:ac(new sc(t)),storage:ac(new sc(n))}},[Ga.BALLOT_STATEMENT]:e=>{const t=e.consume(1);switch(t[0]){case 0:return"yay";case 1:return"nay";case 2:return"pass";default:throw new $a(t[0].toString())}},[Ga.PROPOSAL]:Ic,[Ga.PROPOSAL_ARR]:e=>{const t=[];for(e.consume(4);e.length()>0;)t.push(Ic(e));return t},[Ga.PARAMETERS]:e=>{if(0!==e.consume(1)[0]){const t=(e=>{const t=Ha(e.consume(1)[0],2);if(t in Wa)return Wa[t];{const t=cc(e,1),n=Ka.from(t).toString("utf8");if(n.length>31)throw new Ja(n);return n}})(e),n=cc(e);return{entrypoint:t,value:ac(new sc(n))}}},[Ga.ADDRESS]:e=>{switch(e.consume(1)[0]){case 0:return Rc(e);case 1:{const t=bc(mr.oT.KT1)(e);return e.consume(1),t}default:throw new mr.bS(e.toString())}},[Ga.SMART_CONTRACT_ADDRESS]:e=>{if(1===e.consume(1)[0]){const t=bc(mr.oT.KT1)(e);return e.consume(1),t}throw new mr.JH(e.toString())},[Ga.VALUE]:e=>{const t=cc(e);return ac(new sc(t))},[Ga.INT16]:e=>{const t=e.consume(2);let n=0;for(let r=0;r<t.length;r++)n|=t[r]<<8*(t.length-(r+1));return n},[Ga.BLOCK_PAYLOAD_HASH]:Dc,[Ga.ENTRYPOINT]:e=>{const t=cc(e);return Ka.from(t).toString("utf8")},[Ga.TX_ROLLUP_ORIGINATION_PARAM]:e=>({}),[Ga.TX_ROLLUP_ID]:Uc,[Ga.TX_ROLLUP_BATCH_CONTENT]:e=>{const t=cc(e);return Ka.from(t).toString("hex")},[Ga.BURN_LIMIT]:e=>{const t=e.consume(1);if("00"!==Ka.from(t).toString("hex"))return kc(e)}};tl[Ga.OPERATION]=(e=>t=>{const n=t.consume(1),r=qa[n[0]];if(void 0===r)throw new ic(n[0].toString());const i=e[r](t);if("object"!=typeof i)throw new nc("Decoded invalid operation");return Object.assign({kind:r},i)})(tl),tl[Ga.OP_ACTIVATE_ACCOUNT]=e=>el(tl)(Kc)(e),tl[Ga.OP_DELEGATION]=e=>el(tl)(Hc)(e),tl[Ga.OP_TRANSACTION]=e=>el(tl)(Gc)(e),tl[Ga.OP_ORIGINATION]=e=>el(tl)(Vc)(e),tl[Ga.OP_BALLOT]=e=>el(tl)(Fc)(e),tl[Ga.OP_ENDORSEMENT]=e=>el(tl)(qc)(e),tl[Ga.OP_SEED_NONCE_REVELATION]=e=>el(tl)(Qc)(e),tl[Ga.OP_PROPOSALS]=e=>el(tl)(Wc)(e),tl[Ga.OP_REVEAL]=e=>el(tl)(jc)(e),tl[Ga.OP_REGISTER_GLOBAL_CONSTANT]=e=>el(tl)(Yc)(e),tl[Ga.OP_TRANSFER_TICKET]=e=>el(tl)(zc)(e),tl[Ga.OP_TX_ROLLUP_ORIGINATION]=e=>el(tl)(Zc)(e),tl[Ga.OP_TX_ROLLUP_SUBMIT_BATCH]=e=>el(tl)(Jc)(e),tl[Ga.OP_INCREASE_PAID_STORAGE]=e=>el(tl)(Xc)(e),tl[Ga.MANAGER]=el(tl)(Bc);const nl={[Ga.SECRET]:e=>e,[Ga.RAW]:e=>e,[Ga.TZ1]:Oc,[Ga.BRANCH]:_c,[Ga.ZARITH]:Cc,[Ga.PUBLIC_KEY]:e=>{switch(e.substr(0,4)){case mr.oT.EDPK:return"00"+Tc(mr.oT.EDPK)(e);case mr.oT.SPPK:return"01"+Tc(mr.oT.SPPK)(e);case mr.oT.P2PK:return"02"+Tc(mr.oT.P2PK)(e);default:throw new mr.$$(e)}},[Ga.PKH]:xc,[Ga.DELEGATE]:e=>e?Nc(!0)+xc(e):Nc(!1),[Ga.SCRIPT]:e=>{const t=oc(e.code),n=oc(e.storage);return`${Ha(t.length/2,8)}${t}${Ha(n.length/2,8)}${n}`},[Ga.BALLOT_STATEMENT]:e=>{switch(e){case"yay":return"00";case"nay":return"01";case"pass":return"02";default:throw new Xa(e)}},[Ga.PROPOSAL]:Pc,[Ga.PROPOSAL_ARR]:e=>Ha(32*e.length)+e.map((e=>Pc(e))).join(""),[Ga.INT32]:e=>{const t=parseInt(String(e),10),n=[];for(let r=0;r<4;r++){const e=8*(4-(r+1));n.push((t&255<<e)>>e)}return Ka.from(n).toString("hex")},[Ga.PARAMETERS]:e=>{if(!e||"default"===e.entrypoint&&"prim"in e.value&&"Unit"===e.value.prim)return"00";const t=(e=>{if(e in Ya)return`${Ya[e]}`;if(e.length>31)throw new Ja(e);return`ff${oc({string:e}).slice(8)}`})(e.entrypoint),n=oc(e.value);return`ff${t}${(n.length/2).toString(16).padStart(8,"0")}${n}`},[Ga.ADDRESS]:e=>{switch(e.substr(0,3)){case mr.oT.TZ1:case mr.oT.TZ2:case mr.oT.TZ3:return"00"+xc(e);case mr.oT.KT1:return"01"+Tc(mr.oT.KT1)(e)+"00";default:throw new mr.bS(e)}},[Ga.SMART_CONTRACT_ADDRESS]:e=>{if(e.substring(0,3)===mr.oT.KT1)return"01"+Tc(mr.oT.KT1)(e)+"00";throw new mr.JH(e)},[Ga.VALUE]:e=>{const t=oc(e);return`${Ha(t.length/2)}${t}`},[Ga.INT16]:e=>{const t=parseInt(String(e),10),n=[];for(let r=0;r<2;r++){const e=8*(2-(r+1));n.push((t&255<<e)>>e)}return Ka.from(n).toString("hex")},[Ga.BLOCK_PAYLOAD_HASH]:Lc,[Ga.ENTRYPOINT]:e=>`${oc({string:e}).slice(2)}`,[Ga.TX_ROLLUP_ORIGINATION_PARAM]:e=>"",[Ga.TX_ROLLUP_ID]:Mc,[Ga.TX_ROLLUP_BATCH_CONTENT]:e=>`${Ha(e.length/2)}${e}`,[Ga.BURN_LIMIT]:e=>e?`ff${Cc(e)}`:"00"};nl[Ga.OPERATION]=(e=>t=>{if(!(t.kind in e)||!(t.kind in Qa))throw new mr.p(t.kind);return Qa[t.kind]+e[t.kind](t)})(nl),nl[Ga.OP_ACTIVATE_ACCOUNT]=e=>$c(nl)(Kc)(e),nl[Ga.OP_DELEGATION]=e=>$c(nl)(Hc)(e),nl[Ga.OP_TRANSACTION]=e=>$c(nl)(Gc)(e),nl[Ga.OP_ORIGINATION]=e=>$c(nl)(Vc)(e),nl[Ga.OP_BALLOT]=e=>$c(nl)(Fc)(e),nl[Ga.OP_ENDORSEMENT]=e=>$c(nl)(qc)(e),nl[Ga.OP_SEED_NONCE_REVELATION]=e=>$c(nl)(Qc)(e),nl[Ga.OP_PROPOSALS]=e=>$c(nl)(Wc)(e),nl[Ga.OP_REVEAL]=e=>$c(nl)(jc)(e),nl[Ga.OP_REGISTER_GLOBAL_CONSTANT]=e=>$c(nl)(Yc)(e),nl[Ga.OP_TRANSFER_TICKET]=e=>$c(nl)(zc)(e),nl[Ga.OP_TX_ROLLUP_ORIGINATION]=e=>$c(nl)(Zc)(e),nl[Ga.OP_TX_ROLLUP_SUBMIT_BATCH]=e=>$c(nl)(Jc)(e),nl[Ga.OP_INCREASE_PAID_STORAGE]=e=>$c(nl)(Xc)(e),nl[Ga.MANAGER]=$c(nl)(Bc);const rl={activate_account:Kc,reveal:jc,delegation:Hc,transaction:Gc,origination:Vc,ballot:Fc,endorsement:qc,seed_nonce_revelation:Qc,proposals:Wc,register_global_constant:Yc,transfer_ticket:zc,tx_rollup_origination:Zc,tx_rollup_submit_batch:Jc,increase_paid_storage:Xc},il=e=>{const t=e.kind,n=Object.keys(e),r=(i="kind",n.filter((e=>e!==i)));var i;const s=Object.keys(rl[t]);return o=r,s.filter((e=>!o.includes(e)));var o};var sl;!function(e){e.Pt24m4xi="Pt24m4xiPbLDhVgVfABUjirbmda3yohdN82Sp9FeuAXJ4eV9otd",e.PsBABY5H="PsBABY5HQTSkA4297zNHfsZNKtxULfL18y95qb3m53QJiXGmrbU",e.PsBabyM1="PsBabyM1eUXZseaJdmXFApDSBqj8YBfwELoxZHHW77EMcAbbwAS",e.PsCARTHA="PsCARTHAGazKbHtnKfLzQg3kms52kSRpgnDY982a9oYsSXRLQEb",e.PsDELPH1="PsDELPH1Kxsxt8f9eWbxQeRxkjfbxoqM52jvs5Y5fBxWWh4ifpo",e.PtEdo2Zk="PtEdo2ZkT9oKpimTah6x2embF25oss54njMuPzkJTEi5RqfdZFA",e.PsFLorena="PsFLorenaUUuikDWvMDr6fGBRG8kt3e3D3fHoXK1j1BFRxeSH4i",e.PtGRANADs="PtGRANADsDU8R9daYKAgWnQYAJ64omN1o3KMGVCykShA97vQbvV",e.PtHangz2="PtHangz2aRngywmSRGGvrcTyMbbdpWdpFKuS4uMWxg2RaH9i1qx",e.Psithaca2="Psithaca2MLRFYargivpo7YvUr7wUDqyxrdhC5CQq78mRvimz6A",e.PtJakart2="PtJakart2xVj7pYXJBXrqHgd82rdkLey5ZeeGwDgPp9rhQUbSqY",e.PtKathman="PtKathmankSpLLDALzWw7CGD2j2MtyveTwboEYokqUCP4a1LxMg",e.ProtoALpha="ProtoALphaALphaALphaALphaALphaALphaALphaALphaDdp3zK"}(sl||(sl={}));const ol=sl.Psithaca2;new class{constructor(e=ol){var t;this.protocolHash=e,this.codec=(t=Ga.MANAGER,this.protocolHash,{encoder:nl[t],decoder:e=>{const n=sc.fromHexString(e);return tl[t](n)}})}forge(e){if((0,mr.lM)(e.branch)!==mr.nd.VALID)throw new za(`The block hash ${e.branch} is invalid`);for(const r of e.contents){if(t=r.kind,!Object.keys(rl).includes(t))throw new mr.p(r.kind);const e=il(r);if(1===e.length){if("delegation"===r.kind&&"delegate"===e[0])continue;if("origination"===r.kind&&"delegate"===e[0])continue;if("transaction"===r.kind&&"parameters"===e[0])continue;if("tx_rollup_submit_batch"===r.kind&&"burn_limit"===e[0])continue;throw new Za(`Missing properties: ${e.join(", ").toString()}`)}if(e.length>1)throw new Za(`Missing properties: ${e.join(", ").toString()}`)}var t;const n=this.codec.encoder(e).toLowerCase();return Promise.resolve(n)}parse(e){return Promise.resolve(this.codec.decoder(e))}};function al(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(t){s(t)}}function a(e){try{c(r.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))}class cl extends Error{constructor(){super("No signer has been configured. Please configure one by calling setProvider({signer}) on your TezosToolkit instance."),this.name="UnconfiguredSignerError"}}var ll,ul,dl;!function(e){e[e.DELEGATION=10600]="DELEGATION",e[e.ORIGINATION=10600]="ORIGINATION",e[e.TRANSFER=10600]="TRANSFER",e[e.REVEAL=1100]="REVEAL"}(ll||(ll={})),function(e){e[e.DELEGATION=1257]="DELEGATION",e[e.ORIGINATION=1e4]="ORIGINATION",e[e.TRANSFER=1e4]="TRANSFER",e[e.REVEAL=374]="REVEAL"}(ul||(ul={})),function(e){e[e.DELEGATION=0]="DELEGATION",e[e.ORIGINATION=257]="ORIGINATION",e[e.TRANSFER=257]="TRANSFER",e[e.REVEAL=0]="REVEAL"}(dl||(dl={}));var hl;!function(e){e.Pt24m4xi="Pt24m4xiPbLDhVgVfABUjirbmda3yohdN82Sp9FeuAXJ4eV9otd",e.PsBABY5H="PsBABY5HQTSkA4297zNHfsZNKtxULfL18y95qb3m53QJiXGmrbU",e.PsBabyM1="PsBabyM1eUXZseaJdmXFApDSBqj8YBfwELoxZHHW77EMcAbbwAS",e.PsCARTHA="PsCARTHAGazKbHtnKfLzQg3kms52kSRpgnDY982a9oYsSXRLQEb",e.PsDELPH1="PsDELPH1Kxsxt8f9eWbxQeRxkjfbxoqM52jvs5Y5fBxWWh4ifpo",e.PtEdo2Zk="PtEdo2ZkT9oKpimTah6x2embF25oss54njMuPzkJTEi5RqfdZFA",e.PsFLorena="PsFLorenaUUuikDWvMDr6fGBRG8kt3e3D3fHoXK1j1BFRxeSH4i",e.PtGRANADs="PtGRANADsDU8R9daYKAgWnQYAJ64omN1o3KMGVCykShA97vQbvV",e.PtHangz2="PtHangz2aRngywmSRGGvrcTyMbbdpWdpFKuS4uMWxg2RaH9i1qx",e.PsiThaCa="PsiThaCaT47Zboaw71QWScM8sXeMM7bbQFncK9FLqYc6EKdpjVP",e.Psithaca2="Psithaca2MLRFYargivpo7YvUr7wUDqyxrdhC5CQq78mRvimz6A",e.PtJakart2="PtJakart2xVj7pYXJBXrqHgd82rdkLey5ZeeGwDgPp9rhQUbSqY",e.PtKathman="PtKathmankSpLLDALzWw7CGD2j2MtyveTwboEYokqUCP4a1LxMg",e.ProtoALpha="ProtoALphaALphaALphaALphaALphaALphaALphaALphaDdp3zK"}(hl||(hl={}));hl.Pt24m4xi,hl.PsBABY5H,hl.PsBabyM1,hl.PsCARTHA,hl.PsDELPH1,hl.PtEdo2Zk,hl.PsFLorena,hl.PtGRANADs,hl.PtHangz2,hl.PsiThaCa,hl.Psithaca2,hl.PtJakart2,hl.PtKathman,hl.ProtoALpha;var pl;!function(e){e.MAINNET="NetXdQprcVkpaWU",e.CARTHAGENET="NetXjD3HPJJjmcd",e.DELPHINET="NetXm8tYqnMWky1",e.EDONET="NetXSgo1ZT2DRUG",e.FLORENCENET="NetXxkAx4woPLyu",e.GRANADANET="NetXz969SFaFn8k",e.HANGZHOUNET="NetXZSsxBpMQeAT",e.ITHACANET="NetXbhmtAbMukLc",e.ITHACANET2="NetXnHfVqm9iesp",e.JAKARTANET2="NetXLH1uAxK7CCh",e.KATHMANDUNET="NetXazhm4yetmff"}(pl||(pl={}));class fl extends Error{constructor(e,t,n){super(`${e} Received ${n.length} arguments while expecting one of the following signatures (${JSON.stringify(t)})`),this.smartContractMethodName=e,this.sigs=t,this.args=n,this.name="Invalid parameters error"}}class ml extends Error{constructor(e){super(`Since Babylon delegation source can no longer be a contract address ${e}. Please use the smart contract abstraction to set your delegate.`),this.source=e,this.name="Invalid delegation source error"}}class gl extends Error{constructor(e,t){super(e),this.message=e,this.data=t,this.name="InvalidCodeParameter"}}class El extends Error{constructor(e,t){super(e),this.message=e,this.data=t,this.name="InvalidInitParameter"}}class vl extends Error{constructor(e,t,n,r){super(`Unable to encode the parameter of the view: ${e}. Received ${n} as parameter while expecting one of the following signatures (${JSON.stringify(t)})`),this.smartContractViewName=e,this.sigs=t,this.args=n,this.originalError=r,this.name="Invalid view parameters error",this.cause=r}}class yl extends Error{constructor(e,t,n,r){super(e),this.message=e,this.viewName=t,this.failWith=n,this.originalError=r,this.name="ViewSimulationError"}}class Al extends Error{constructor(e){super(`${e} Please configure the context of the view execution in the executeView method.`),this.info=e,this.name="InvalidViewSimulationContext"}}class Tl extends Error{constructor(e){super(e),this.message=e,this.name="RevealOperationError"}}class bl extends Error{constructor(e){super(e),this.message=e,this.name="OriginationParameterError"}}const Sl=({code:e,init:t,balance:n="0",delegate:r,storage:i,fee:s=ul.ORIGINATION,gasLimit:o=ll.ORIGINATION,storageLimit:a=dl.ORIGINATION,mutez:c=!1})=>al(void 0,void 0,void 0,(function*(){if(void 0!==i&&void 0!==t)throw new bl("Storage and Init cannot be set a the same time. Please either use storage or init but not both.");if(!Array.isArray(e))throw new gl("Wrong code parameter type, expected an array",e);let l;if(void 0!==i){const t=e.find((e=>"prim"in e&&"storage"===e.prim));if(void 0===(null==t?void 0:t.args))throw new gl("The storage section is missing from the script",e);l=new Ss(t.args[0]).Encode(i)}else{if(void 0===t||"object"!=typeof t)throw new El("Wrong init parameter type, expected JSON Michelson",t);l=t}const u={code:e,storage:l},d={kind:yr.ORIGINATION,fee:s,gas_limit:o,storage_limit:a,balance:c?n.toString():(0,mr.WU)("tz","mutez",n).toString(),script:u};return r&&(d.delegate=r),d})),wl=({to:e,amount:t,parameter:n,fee:r=ul.TRANSFER,gasLimit:i=ll.TRANSFER,storageLimit:s=dl.TRANSFER,mutez:o=!1})=>al(void 0,void 0,void 0,(function*(){return{kind:yr.TRANSACTION,fee:r,gas_limit:i,storage_limit:s,amount:o?t.toString():(0,mr.WU)("tz","mutez",t).toString(),destination:e,parameters:n}})),Rl=({delegate:e,source:t,fee:n=ul.DELEGATION,gasLimit:r=ll.DELEGATION,storageLimit:i=dl.DELEGATION})=>al(void 0,void 0,void 0,(function*(){return{kind:yr.DELEGATION,source:t,fee:n,gas_limit:r,storage_limit:i,delegate:e}}));class _l extends Error{constructor(e,t){super(),this.errors=e,this.errorDetails=t,this.name="TezosOperationError";const n=e[e.length-1];this.id=n.id,this.kind=n.kind,this.message=`(${this.kind}) ${this.id}`,"with"in n&&(n.with.string?this.message=n.with.string:n.with.int?this.message=n.with.int:this.message=JSON.stringify(n.with))}}class Ol extends Error{constructor(e){super("Preapply returned an unexpected result"),this.result=e,this.name="TezosPreapplyFailureError"}}class Nl extends Error{constructor(e){super(e),this.message=e,this.name="OriginationOperationError"}}class Pl extends Error{constructor(e){super(e),this.message=e,this.name="InvalidConfirmationCountError"}}class Il extends Error{constructor(e){super(e),this.message=e,this.name="ConfirmationUndefinedError"}}class xl extends Error{constructor(e){super(e),this.message=e,this.name="InvalidFilterExpressionError"}}yr.ACTIVATION,yr.ORIGINATION,yr.TRANSACTION,yr.DELEGATION;class Cl extends Error{constructor(){super("Taquito missed a block while waiting for operation confirmation and was not able to find the operation"),this.name="MissedBlockDuringConfirmationError"}}class kl extends Error{constructor(){super("Unable to estimate the reveal operation, the public key is unknown"),this.name="Reveal Estimate Error"}}class Ll extends Error{constructor(e){super(`Please load the value associated with the constant ${e} using the loadGlobalConstant method of the DefaultGlobalConstantsProvider.`),this.hash=e,this.name="GlobalConstantNotFound"}}class Dl extends Error{constructor(){super("No global constants provider has been configured. Please configure one by calling setGlobalConstantsProvider({globalConstantsProvider}) on your TezosToolkit instance."),this.name="UnconfiguredGlobalConstantsProviderError"}}class Ml extends Error{constructor(e){super(e),this.message=e,this.name="UnsupportedEventError"}}void 0===Ul&&(Ul=-1);var Ul;class Bl extends Error{constructor(e){super("Forging mismatch error"),this.results=e,this.name="ForgingMismatchError"}}class Kl extends Error{constructor(){super("At least one forger must be specified"),this.name="UnspecifiedForgerError"}}function jl(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(t){s(t)}}function a(e){try{c(r.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))}class Hl extends Error{constructor(){super("You need to initialize BeaconWallet by calling beaconWallet.requestPermissions first"),this.name="BeaconWalletNotInitialized"}}class Gl extends Error{constructor(e){super(`Required permissions scopes were not granted: ${e.join(",")}`),this.requiredScopes=e,this.name="MissingRequiredScopes"}}class Vl{constructor(e){this.client=((e,t)=>(lr&&t&&(lr.disconnect(),lr=void 0),lr||(lr||(lr=new cr(e)),lr)))(e)}validateRequiredScopesOrFail(e,t){const n=new Set(t);for(const r of e)n.has(r)&&n.delete(r);if(n.size>0)throw new Gl(Array.from(n))}requestPermissions(e){return jl(this,void 0,void 0,(function*(){yield this.client.requestPermissions(e)}))}getPKH(){return jl(this,void 0,void 0,(function*(){const e=yield this.client.getActiveAccount();if(!e)throw new Hl;return e.address}))}mapTransferParamsToWalletParams(e){return jl(this,void 0,void 0,(function*(){let t;yield this.client.showPrepare();try{t=yield e()}catch(n){throw yield this.client.hideUI(),n}return this.removeDefaultParams(t,yield wl(this.formatParameters(t)))}))}mapOriginateParamsToWalletParams(e){return jl(this,void 0,void 0,(function*(){let t;yield this.client.showPrepare();try{t=yield e()}catch(n){throw yield this.client.hideUI(),n}return this.removeDefaultParams(t,yield Sl(this.formatParameters(t)))}))}mapDelegateParamsToWalletParams(e){return jl(this,void 0,void 0,(function*(){let t;yield this.client.showPrepare();try{t=yield e()}catch(n){throw yield this.client.hideUI(),n}return this.removeDefaultParams(t,yield Rl(this.formatParameters(t)))}))}formatParameters(e){return e.fee&&(e.fee=e.fee.toString()),e.storageLimit&&(e.storageLimit=e.storageLimit.toString()),e.gasLimit&&(e.gasLimit=e.gasLimit.toString()),e}removeDefaultParams(e,t){return e.fee||delete t.fee,e.storageLimit||delete t.storage_limit,e.gasLimit||delete t.gas_limit,t}sendOperations(e){return jl(this,void 0,void 0,(function*(){const t=yield this.client.getActiveAccount();if(!t)throw new Hl;const n=t.scopes;this.validateRequiredScopesOrFail(n,[O.OPERATION_REQUEST]);const{transactionHash:r}=yield this.client.requestOperation({operationDetails:e});return r}))}disconnect(){return jl(this,void 0,void 0,(function*(){yield this.client.destroy()}))}clearActiveAccount(){return jl(this,void 0,void 0,(function*(){yield this.client.setActiveAccount()}))}}},9669:(e,t,n)=>{n(51609)},55448:(e,t,n)=>{"use strict";var r=n(64867),i=n(36026),s=n(4372),o=n(15327),a=n(94097),c=n(84109),l=n(67985),u=n(85061),d=n(77874),h=n(65263);e.exports=function(e){return new Promise((function(t,n){var p,f=e.data,m=e.headers,g=e.responseType;function E(){e.cancelToken&&e.cancelToken.unsubscribe(p),e.signal&&e.signal.removeEventListener("abort",p)}r.isFormData(f)&&delete m["Content-Type"];var v=new XMLHttpRequest;if(e.auth){var y=e.auth.username||"",A=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";m.Authorization="Basic "+btoa(y+":"+A)}var T=a(e.baseURL,e.url);function b(){if(v){var r="getAllResponseHeaders"in v?c(v.getAllResponseHeaders()):null,s={data:g&&"text"!==g&&"json"!==g?v.response:v.responseText,status:v.status,statusText:v.statusText,headers:r,config:e,request:v};i((function(e){t(e),E()}),(function(e){n(e),E()}),s),v=null}}if(v.open(e.method.toUpperCase(),o(T,e.params,e.paramsSerializer),!0),v.timeout=e.timeout,"onloadend"in v?v.onloadend=b:v.onreadystatechange=function(){v&&4===v.readyState&&(0!==v.status||v.responseURL&&0===v.responseURL.indexOf("file:"))&&setTimeout(b)},v.onabort=function(){v&&(n(u("Request aborted",e,"ECONNABORTED",v)),v=null)},v.onerror=function(){n(u("Network Error",e,null,v)),v=null},v.ontimeout=function(){var t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",r=e.transitional||d;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(u(t,e,r.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",v)),v=null},r.isStandardBrowserEnv()){var S=(e.withCredentials||l(T))&&e.xsrfCookieName?s.read(e.xsrfCookieName):void 0;S&&(m[e.xsrfHeaderName]=S)}"setRequestHeader"in v&&r.forEach(m,(function(e,t){void 0===f&&"content-type"===t.toLowerCase()?delete m[t]:v.setRequestHeader(t,e)})),r.isUndefined(e.withCredentials)||(v.withCredentials=!!e.withCredentials),g&&"json"!==g&&(v.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&v.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&v.upload&&v.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(p=function(e){v&&(n(!e||e&&e.type?new h("canceled"):e),v.abort(),v=null)},e.cancelToken&&e.cancelToken.subscribe(p),e.signal&&(e.signal.aborted?p():e.signal.addEventListener("abort",p))),f||(f=null),v.send(f)}))}},51609:(e,t,n)=>{"use strict";var r=n(64867),i=n(91849),s=n(30321),o=n(47185);var a=function e(t){var n=new s(t),a=i(s.prototype.request,n);return r.extend(a,s.prototype,n),r.extend(a,n),a.create=function(n){return e(o(t,n))},a}(n(45546));a.Axios=s,a.Cancel=n(65263),a.CancelToken=n(14972),a.isCancel=n(26502),a.VERSION=n(97288).version,a.all=function(e){return Promise.all(e)},a.spread=n(8713),a.isAxiosError=n(16268),e.exports=a,e.exports.default=a},65263:e=>{"use strict";function t(e){this.message=e}t.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},t.prototype.__CANCEL__=!0,e.exports=t},14972:(e,t,n)=>{"use strict";var r=n(65263);function i(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;this.promise.then((function(e){if(n._listeners){var t,r=n._listeners.length;for(t=0;t<r;t++)n._listeners[t](e);n._listeners=null}})),this.promise.then=function(e){var t,r=new Promise((function(e){n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e){n.reason||(n.reason=new r(e),t(n.reason))}))}i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.prototype.subscribe=function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]},i.prototype.unsubscribe=function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}},i.source=function(){var e;return{token:new i((function(t){e=t})),cancel:e}},e.exports=i},26502:e=>{"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},30321:(e,t,n)=>{"use strict";var r=n(64867),i=n(15327),s=n(80782),o=n(13572),a=n(47185),c=n(54875),l=c.validators;function u(e){this.defaults=e,this.interceptors={request:new s,response:new s}}u.prototype.request=function(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},(t=a(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var n=t.transitional;void 0!==n&&c.assertOptions(n,{silentJSONParsing:l.transitional(l.boolean),forcedJSONParsing:l.transitional(l.boolean),clarifyTimeoutError:l.transitional(l.boolean)},!1);var r=[],i=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(i=i&&e.synchronous,r.unshift(e.fulfilled,e.rejected))}));var s,u=[];if(this.interceptors.response.forEach((function(e){u.push(e.fulfilled,e.rejected)})),!i){var d=[o,void 0];for(Array.prototype.unshift.apply(d,r),d=d.concat(u),s=Promise.resolve(t);d.length;)s=s.then(d.shift(),d.shift());return s}for(var h=t;r.length;){var p=r.shift(),f=r.shift();try{h=p(h)}catch(m){f(m);break}}try{s=o(h)}catch(m){return Promise.reject(m)}for(;u.length;)s=s.then(u.shift(),u.shift());return s},u.prototype.getUri=function(e){return e=a(this.defaults,e),i(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},r.forEach(["delete","get","head","options"],(function(e){u.prototype[e]=function(t,n){return this.request(a(n||{},{method:e,url:t,data:(n||{}).data}))}})),r.forEach(["post","put","patch"],(function(e){u.prototype[e]=function(t,n,r){return this.request(a(r||{},{method:e,url:t,data:n}))}})),e.exports=u},80782:(e,t,n)=>{"use strict";var r=n(64867);function i(){this.handlers=[]}i.prototype.use=function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1},i.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},i.prototype.forEach=function(e){r.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=i},94097:(e,t,n)=>{"use strict";var r=n(91793),i=n(7303);e.exports=function(e,t){return e&&!r(t)?i(e,t):t}},85061:(e,t,n)=>{"use strict";var r=n(80481);e.exports=function(e,t,n,i,s){var o=new Error(e);return r(o,t,n,i,s)}},13572:(e,t,n)=>{"use strict";var r=n(64867),i=n(18527),s=n(26502),o=n(45546),a=n(65263);function c(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new a("canceled")}e.exports=function(e){return c(e),e.headers=e.headers||{},e.data=i.call(e,e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),r.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||o.adapter)(e).then((function(t){return c(e),t.data=i.call(e,t.data,t.headers,e.transformResponse),t}),(function(t){return s(t)||(c(e),t&&t.response&&(t.response.data=i.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},80481:e=>{"use strict";e.exports=function(e,t,n,r,i){return e.config=t,n&&(e.code=n),e.request=r,e.response=i,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e}},47185:(e,t,n)=>{"use strict";var r=n(64867);e.exports=function(e,t){t=t||{};var n={};function i(e,t){return r.isPlainObject(e)&&r.isPlainObject(t)?r.merge(e,t):r.isPlainObject(t)?r.merge({},t):r.isArray(t)?t.slice():t}function s(n){return r.isUndefined(t[n])?r.isUndefined(e[n])?void 0:i(void 0,e[n]):i(e[n],t[n])}function o(e){if(!r.isUndefined(t[e]))return i(void 0,t[e])}function a(n){return r.isUndefined(t[n])?r.isUndefined(e[n])?void 0:i(void 0,e[n]):i(void 0,t[n])}function c(n){return n in t?i(e[n],t[n]):n in e?i(void 0,e[n]):void 0}var l={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:c};return r.forEach(Object.keys(e).concat(Object.keys(t)),(function(e){var t=l[e]||s,i=t(e);r.isUndefined(i)&&t!==c||(n[e]=i)})),n}},36026:(e,t,n)=>{"use strict";var r=n(85061);e.exports=function(e,t,n){var i=n.config.validateStatus;n.status&&i&&!i(n.status)?t(r("Request failed with status code "+n.status,n.config,null,n.request,n)):e(n)}},18527:(e,t,n)=>{"use strict";var r=n(64867),i=n(45546);e.exports=function(e,t,n){var s=this||i;return r.forEach(n,(function(n){e=n.call(s,e,t)})),e}},45546:(e,t,n)=>{"use strict";var r=n(64867),i=n(16016),s=n(80481),o=n(77874),a={"Content-Type":"application/x-www-form-urlencoded"};function c(e,t){!r.isUndefined(e)&&r.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var l,u={transitional:o,adapter:(("undefined"!=typeof XMLHttpRequest||"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(l=n(55448)),l),transformRequest:[function(e,t){return i(t,"Accept"),i(t,"Content-Type"),r.isFormData(e)||r.isArrayBuffer(e)||r.isBuffer(e)||r.isStream(e)||r.isFile(e)||r.isBlob(e)?e:r.isArrayBufferView(e)?e.buffer:r.isURLSearchParams(e)?(c(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):r.isObject(e)||t&&"application/json"===t["Content-Type"]?(c(t,"application/json"),function(e,t,n){if(r.isString(e))try{return(t||JSON.parse)(e),r.trim(e)}catch(i){if("SyntaxError"!==i.name)throw i}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional||u.transitional,n=t&&t.silentJSONParsing,i=t&&t.forcedJSONParsing,o=!n&&"json"===this.responseType;if(o||i&&r.isString(e)&&e.length)try{return JSON.parse(e)}catch(a){if(o){if("SyntaxError"===a.name)throw s(a,this,"E_JSON_PARSE");throw a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};r.forEach(["delete","get","head"],(function(e){u.headers[e]={}})),r.forEach(["post","put","patch"],(function(e){u.headers[e]=r.merge(a)})),e.exports=u},77874:e=>{"use strict";e.exports={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1}},97288:e=>{e.exports={version:"0.26.1"}},91849:e=>{"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},15327:(e,t,n)=>{"use strict";var r=n(64867);function i(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var s;if(n)s=n(t);else if(r.isURLSearchParams(t))s=t.toString();else{var o=[];r.forEach(t,(function(e,t){null!=e&&(r.isArray(e)?t+="[]":e=[e],r.forEach(e,(function(e){r.isDate(e)?e=e.toISOString():r.isObject(e)&&(e=JSON.stringify(e)),o.push(i(t)+"="+i(e))})))})),s=o.join("&")}if(s){var a=e.indexOf("#");-1!==a&&(e=e.slice(0,a)),e+=(-1===e.indexOf("?")?"?":"&")+s}return e}},7303:e=>{"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},4372:(e,t,n)=>{"use strict";var r=n(64867);e.exports=r.isStandardBrowserEnv()?{write:function(e,t,n,i,s,o){var a=[];a.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),r.isString(i)&&a.push("path="+i),r.isString(s)&&a.push("domain="+s),!0===o&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},91793:e=>{"use strict";e.exports=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}},16268:(e,t,n)=>{"use strict";var r=n(64867);e.exports=function(e){return r.isObject(e)&&!0===e.isAxiosError}},67985:(e,t,n)=>{"use strict";var r=n(64867);e.exports=r.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function i(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=i(window.location.href),function(t){var n=r.isString(t)?i(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},16016:(e,t,n)=>{"use strict";var r=n(64867);e.exports=function(e,t){r.forEach(e,(function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))}},84109:(e,t,n)=>{"use strict";var r=n(64867),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,s,o={};return e?(r.forEach(e.split("\n"),(function(e){if(s=e.indexOf(":"),t=r.trim(e.substr(0,s)).toLowerCase(),n=r.trim(e.substr(s+1)),t){if(o[t]&&i.indexOf(t)>=0)return;o[t]="set-cookie"===t?(o[t]?o[t]:[]).concat([n]):o[t]?o[t]+", "+n:n}})),o):o}},8713:e=>{"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},54875:(e,t,n)=>{"use strict";var r=n(97288).version,i={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){i[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));var s={};i.transitional=function(e,t,n){function i(e,t){return"[Axios v"+r+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,r,o){if(!1===e)throw new Error(i(r," has been removed"+(t?" in "+t:"")));return t&&!s[r]&&(s[r]=!0,console.warn(i(r," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,r,o)}},e.exports={assertOptions:function(e,t,n){if("object"!=typeof e)throw new TypeError("options must be an object");for(var r=Object.keys(e),i=r.length;i-- >0;){var s=r[i],o=t[s];if(o){var a=e[s],c=void 0===a||o(a,s,e);if(!0!==c)throw new TypeError("option "+s+" must be "+c)}else if(!0!==n)throw Error("Unknown option "+s)}},validators:i}},64867:(e,t,n)=>{"use strict";var r=n(91849),i=Object.prototype.toString;function s(e){return Array.isArray(e)}function o(e){return void 0===e}function a(e){return"[object ArrayBuffer]"===i.call(e)}function c(e){return null!==e&&"object"==typeof e}function l(e){if("[object Object]"!==i.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function u(e){return"[object Function]"===i.call(e)}function d(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),s(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}e.exports={isArray:s,isArrayBuffer:a,isBuffer:function(e){return null!==e&&!o(e)&&null!==e.constructor&&!o(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"[object FormData]"===i.call(e)},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&a(e.buffer)},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:c,isPlainObject:l,isUndefined:o,isDate:function(e){return"[object Date]"===i.call(e)},isFile:function(e){return"[object File]"===i.call(e)},isBlob:function(e){return"[object Blob]"===i.call(e)},isFunction:u,isStream:function(e){return c(e)&&u(e.pipe)},isURLSearchParams:function(e){return"[object URLSearchParams]"===i.call(e)},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:d,merge:function e(){var t={};function n(n,r){l(t[r])&&l(n)?t[r]=e(t[r],n):l(n)?t[r]=e({},n):s(n)?t[r]=n.slice():t[r]=n}for(var r=0,i=arguments.length;r<i;r++)d(arguments[r],n);return t},extend:function(e,t,n){return d(t,(function(t,i){e[i]=n&&"function"==typeof t?r(t,n):t})),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}}},92503:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var r=n(87462),i=n(67294),s=n(86010),o=n(95999),a=n(86668);const c="anchorWithStickyNavbar_LWe7",l="anchorWithHideOnScrollNavbar_WYt5";function u(e){let{as:t,id:n,...u}=e;const{navbar:{hideOnScroll:d}}=(0,a.L)();return"h1"!==t&&n?i.createElement(t,(0,r.Z)({},u,{className:(0,s.Z)("anchor",d?l:c),id:n}),u.children,i.createElement("a",{className:"hash-link",href:`#${n}`,title:(0,o.I)({id:"theme.common.headingLinkTitle",message:"Direct link to heading",description:"Title for link to heading"})},"\u200b")):i.createElement(t,(0,r.Z)({},u,{id:void 0}))}},55203:(e,t,n)=>{"use strict";n.d(t,{Z:()=>L});var r=n(67294),i=n(3905),s=n(87462),o=n(35742);var a=n(96591);var c=n(39960);var l=n(86010),u=n(72389),d=n(86043);const h="details_lb9f",p="isBrowser_bmU9",f="collapsibleContent_i85q";function m(e){return!!e&&("SUMMARY"===e.tagName||m(e.parentElement))}function g(e,t){return!!e&&(e===t||g(e.parentElement,t))}function E(e){let{summary:t,children:n,...i}=e;const o=(0,u.Z)(),a=(0,r.useRef)(null),{collapsed:c,setCollapsed:E}=(0,d.u)({initialState:!i.open}),[v,y]=(0,r.useState)(i.open);return r.createElement("details",(0,s.Z)({},i,{ref:a,open:v,"data-collapsed":c,className:(0,l.Z)(h,o&&p,i.className),onMouseDown:e=>{m(e.target)&&e.detail>1&&e.preventDefault()},onClick:e=>{e.stopPropagation();const t=e.target;m(t)&&g(t,a.current)&&(e.preventDefault(),c?(E(!1),y(!0)):E(!0))}}),t??r.createElement("summary",null,"Details"),r.createElement(d.z,{lazy:!1,collapsed:c,disableSSRStyle:!0,onCollapseTransitionEnd:e=>{E(e),y(!e)}},r.createElement("div",{className:f},n)))}const v="details_b_Ee";function y(e){let{...t}=e;return r.createElement(E,(0,s.Z)({},t,{className:(0,l.Z)("alert alert--info",v,t.className)}))}var A=n(92503);function T(e){return r.createElement(A.Z,e)}const b="containsTaskList_mC6p";const S="img_ev3q";var w=n(35281),R=n(95999);const _="admonition_LlT9",O="admonitionHeading_tbUL",N="admonitionIcon_kALy",P="admonitionContent_S0QG";const I={note:{infimaClassName:"secondary",iconComponent:function(){return r.createElement("svg",{viewBox:"0 0 14 16"},r.createElement("path",{fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))},label:r.createElement(R.Z,{id:"theme.admonition.note",description:"The default label used for the Note admonition (:::note)"},"note")},tip:{infimaClassName:"success",iconComponent:function(){return r.createElement("svg",{viewBox:"0 0 12 16"},r.createElement("path",{fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))},label:r.createElement(R.Z,{id:"theme.admonition.tip",description:"The default label used for the Tip admonition (:::tip)"},"tip")},danger:{infimaClassName:"danger",iconComponent:function(){return r.createElement("svg",{viewBox:"0 0 12 16"},r.createElement("path",{fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"}))},label:r.createElement(R.Z,{id:"theme.admonition.danger",description:"The default label used for the Danger admonition (:::danger)"},"danger")},info:{infimaClassName:"info",iconComponent:function(){return r.createElement("svg",{viewBox:"0 0 14 16"},r.createElement("path",{fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))},label:r.createElement(R.Z,{id:"theme.admonition.info",description:"The default label used for the Info admonition (:::info)"},"info")},caution:{infimaClassName:"warning",iconComponent:function(){return r.createElement("svg",{viewBox:"0 0 16 16"},r.createElement("path",{fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))},label:r.createElement(R.Z,{id:"theme.admonition.caution",description:"The default label used for the Caution admonition (:::caution)"},"caution")}},x={secondary:"note",important:"info",success:"tip",warning:"danger"};function C(e){const{mdxAdmonitionTitle:t,rest:n}=function(e){const t=r.Children.toArray(e),n=t.find((e=>{var t;return r.isValidElement(e)&&"mdxAdmonitionTitle"===(null==(t=e.props)?void 0:t.mdxType)})),i=r.createElement(r.Fragment,null,t.filter((e=>e!==n)));return{mdxAdmonitionTitle:n,rest:i}}(e.children);return{...e,title:e.title??t,children:n}}const k={head:function(e){const t=r.Children.map(e.children,(e=>r.isValidElement(e)?function(e){var t;if(null!=(t=e.props)&&t.mdxType&&e.props.originalType){const{mdxType:t,originalType:n,...i}=e.props;return r.createElement(e.props.originalType,i)}return e}(e):e));return r.createElement(o.Z,e,t)},code:function(e){const t=["a","b","big","i","span","em","strong","sup","sub","small"];return r.Children.toArray(e.children).every((e=>{var n;return"string"==typeof e&&!e.includes("\n")||(0,r.isValidElement)(e)&&t.includes(null==(n=e.props)?void 0:n.mdxType)}))?r.createElement("code",e):r.createElement(a.Z,e)},a:function(e){return r.createElement(c.Z,e)},pre:function(e){var t;return r.createElement(a.Z,(0,r.isValidElement)(e.children)&&"code"===(null==(t=e.children.props)?void 0:t.originalType)?e.children.props:{...e})},details:function(e){const t=r.Children.toArray(e.children),n=t.find((e=>{var t;return r.isValidElement(e)&&"summary"===(null==(t=e.props)?void 0:t.mdxType)})),i=r.createElement(r.Fragment,null,t.filter((e=>e!==n)));return r.createElement(y,(0,s.Z)({},e,{summary:n}),i)},ul:function(e){return r.createElement("ul",(0,s.Z)({},e,{className:(t=e.className,(0,l.Z)(t,(null==t?void 0:t.includes("contains-task-list"))&&b))}));var t},img:function(e){return r.createElement("img",(0,s.Z)({loading:"lazy"},e,{className:(t=e.className,(0,l.Z)(t,S))}));var t},h1:e=>r.createElement(T,(0,s.Z)({as:"h1"},e)),h2:e=>r.createElement(T,(0,s.Z)({as:"h2"},e)),h3:e=>r.createElement(T,(0,s.Z)({as:"h3"},e)),h4:e=>r.createElement(T,(0,s.Z)({as:"h4"},e)),h5:e=>r.createElement(T,(0,s.Z)({as:"h5"},e)),h6:e=>r.createElement(T,(0,s.Z)({as:"h6"},e)),admonition:function(e){const{children:t,type:n,title:i,icon:s}=C(e),o=function(e){const t=x[e]??e;return I[t]||(console.warn(`No admonition config found for admonition type "${t}". Using Info as fallback.`),I.info)}(n),a=i??o.label,{iconComponent:c}=o,u=s??r.createElement(c,null);return r.createElement("div",{className:(0,l.Z)(w.k.common.admonition,w.k.common.admonitionType(e.type),"alert",`alert--${o.infimaClassName}`,_)},r.createElement("div",{className:O},r.createElement("span",{className:N},u),a),r.createElement("div",{className:P},t))}};function L(e){let{children:t}=e;return r.createElement(i.Zo,{components:k},t)}},39407:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var r=n(87462),i=n(67294),s=n(86010),o=n(93743);const a="tableOfContents_bqdL";function c(e){let{className:t,...n}=e;return i.createElement("div",{className:(0,s.Z)(a,"thin-scrollbar",t)},i.createElement(o.Z,(0,r.Z)({},n,{linkClassName:"table-of-contents__link toc-highlight",linkActiveClassName:"table-of-contents__link--active"})))}},93743:(e,t,n)=>{"use strict";n.d(t,{Z:()=>f});var r=n(87462),i=n(67294),s=n(86668);function o(e){const t=e.map((e=>({...e,parentIndex:-1,children:[]}))),n=Array(7).fill(-1);t.forEach(((e,t)=>{const r=n.slice(2,e.level);e.parentIndex=Math.max(...r),n[e.level]=t}));const r=[];return t.forEach((e=>{const{parentIndex:n,...i}=e;n>=0?t[n].children.push(i):r.push(i)})),r}function a(e){let{toc:t,minHeadingLevel:n,maxHeadingLevel:r}=e;return t.flatMap((e=>{const t=a({toc:e.children,minHeadingLevel:n,maxHeadingLevel:r});return function(e){return e.level>=n&&e.level<=r}(e)?[{...e,children:t}]:t}))}function c(e){const t=e.getBoundingClientRect();return t.top===t.bottom?c(e.parentNode):t}function l(e,t){let{anchorTopOffset:n}=t;const r=e.find((e=>c(e).top>=n));if(r){return function(e){return e.top>0&&e.bottom<window.innerHeight/2}(c(r))?r:e[e.indexOf(r)-1]??null}return e[e.length-1]??null}function u(){const e=(0,i.useRef)(0),{navbar:{hideOnScroll:t}}=(0,s.L)();return(0,i.useEffect)((()=>{e.current=t?0:document.querySelector(".navbar").clientHeight}),[t]),e}function d(e){const t=(0,i.useRef)(void 0),n=u();(0,i.useEffect)((()=>{if(!e)return()=>{};const{linkClassName:r,linkActiveClassName:i,minHeadingLevel:s,maxHeadingLevel:o}=e;function a(){const e=function(e){return Array.from(document.getElementsByClassName(e))}(r),a=function(e){let{minHeadingLevel:t,maxHeadingLevel:n}=e;const r=[];for(let i=t;i<=n;i+=1)r.push(`h${i}.anchor`);return Array.from(document.querySelectorAll(r.join()))}({minHeadingLevel:s,maxHeadingLevel:o}),c=l(a,{anchorTopOffset:n.current}),u=e.find((e=>c&&c.id===function(e){return decodeURIComponent(e.href.substring(e.href.indexOf("#")+1))}(e)));e.forEach((e=>{!function(e,n){n?(t.current&&t.current!==e&&t.current.classList.remove(i),e.classList.add(i),t.current=e):e.classList.remove(i)}(e,e===u)}))}return document.addEventListener("scroll",a),document.addEventListener("resize",a),a(),()=>{document.removeEventListener("scroll",a),document.removeEventListener("resize",a)}}),[e,n])}function h(e){let{toc:t,className:n,linkClassName:r,isChild:s}=e;return t.length?i.createElement("ul",{className:s?void 0:n},t.map((e=>i.createElement("li",{key:e.id},i.createElement("a",{href:`#${e.id}`,className:r??void 0,dangerouslySetInnerHTML:{__html:e.value}}),i.createElement(h,{isChild:!0,toc:e.children,className:n,linkClassName:r}))))):null}const p=i.memo(h);function f(e){let{toc:t,className:n="table-of-contents table-of-contents__left-border",linkClassName:c="table-of-contents__link",linkActiveClassName:l,minHeadingLevel:u,maxHeadingLevel:h,...f}=e;const m=(0,s.L)(),g=u??m.tableOfContents.minHeadingLevel,E=h??m.tableOfContents.maxHeadingLevel,v=function(e){let{toc:t,minHeadingLevel:n,maxHeadingLevel:r}=e;return(0,i.useMemo)((()=>a({toc:o(t),minHeadingLevel:n,maxHeadingLevel:r})),[t,n,r])}({toc:t,minHeadingLevel:g,maxHeadingLevel:E});return d((0,i.useMemo)((()=>{if(c&&l)return{linkClassName:c,linkActiveClassName:l,minHeadingLevel:g,maxHeadingLevel:E}}),[c,l,g,E])),i.createElement(p,(0,r.Z)({toc:v,className:n,linkClassName:c},f))}},42152:function(e){var t;t=function(){return function(){var e={686:function(e,t,n){"use strict";n.d(t,{default:function(){return S}});var r=n(279),i=n.n(r),s=n(370),o=n.n(s),a=n(817),c=n.n(a);function l(e){try{return document.execCommand(e)}catch(t){return!1}}var u=function(e){var t=c()(e);return l("cut"),t},d=function(e,t){var n=function(e){var t="rtl"===document.documentElement.getAttribute("dir"),n=document.createElement("textarea");n.style.fontSize="12pt",n.style.border="0",n.style.padding="0",n.style.margin="0",n.style.position="absolute",n.style[t?"right":"left"]="-9999px";var r=window.pageYOffset||document.documentElement.scrollTop;return n.style.top="".concat(r,"px"),n.setAttribute("readonly",""),n.value=e,n}(e);t.container.appendChild(n);var r=c()(n);return l("copy"),n.remove(),r},h=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{container:document.body},n="";return"string"==typeof e?n=d(e,t):e instanceof HTMLInputElement&&!["text","search","url","tel","password"].includes(null==e?void 0:e.type)?n=d(e.value,t):(n=c()(e),l("copy")),n};function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}var f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.action,n=void 0===t?"copy":t,r=e.container,i=e.target,s=e.text;if("copy"!==n&&"cut"!==n)throw new Error('Invalid "action" value, use either "copy" or "cut"');if(void 0!==i){if(!i||"object"!==p(i)||1!==i.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===n&&i.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===n&&(i.hasAttribute("readonly")||i.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes')}return s?h(s,{container:r}):i?"cut"===n?u(i):h(i,{container:r}):void 0};function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(e,t){return E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},E(e,t)}function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A(e);if(t){var i=A(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return y(this,n)}}function y(e,t){return!t||"object"!==m(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function A(e){return A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},A(e)}function T(e,t){var n="data-clipboard-".concat(e);if(t.hasAttribute(n))return t.getAttribute(n)}var b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(s,e);var t,n,r,i=v(s);function s(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(n=i.call(this)).resolveOptions(t),n.listenClick(e),n}return t=s,n=[{key:"resolveOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action="function"==typeof e.action?e.action:this.defaultAction,this.target="function"==typeof e.target?e.target:this.defaultTarget,this.text="function"==typeof e.text?e.text:this.defaultText,this.container="object"===m(e.container)?e.container:document.body}},{key:"listenClick",value:function(e){var t=this;this.listener=o()(e,"click",(function(e){return t.onClick(e)}))}},{key:"onClick",value:function(e){var t=e.delegateTarget||e.currentTarget,n=this.action(t)||"copy",r=f({action:n,container:this.container,target:this.target(t),text:this.text(t)});this.emit(r?"success":"error",{action:n,text:r,trigger:t,clearSelection:function(){t&&t.focus(),window.getSelection().removeAllRanges()}})}},{key:"defaultAction",value:function(e){return T("action",e)}},{key:"defaultTarget",value:function(e){var t=T("target",e);if(t)return document.querySelector(t)}},{key:"defaultText",value:function(e){return T("text",e)}},{key:"destroy",value:function(){this.listener.destroy()}}],r=[{key:"copy",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{container:document.body};return h(e,t)}},{key:"cut",value:function(e){return u(e)}},{key:"isSupported",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["copy","cut"],t="string"==typeof e?[e]:e,n=!!document.queryCommandSupported;return t.forEach((function(e){n=n&&!!document.queryCommandSupported(e)})),n}}],n&&g(t.prototype,n),r&&g(t,r),s}(i()),S=b},828:function(e){if("undefined"!=typeof Element&&!Element.prototype.matches){var t=Element.prototype;t.matches=t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector}e.exports=function(e,t){for(;e&&9!==e.nodeType;){if("function"==typeof e.matches&&e.matches(t))return e;e=e.parentNode}}},438:function(e,t,n){var r=n(828);function i(e,t,n,r,i){var o=s.apply(this,arguments);return e.addEventListener(n,o,i),{destroy:function(){e.removeEventListener(n,o,i)}}}function s(e,t,n,i){return function(n){n.delegateTarget=r(n.target,t),n.delegateTarget&&i.call(e,n)}}e.exports=function(e,t,n,r,s){return"function"==typeof e.addEventListener?i.apply(null,arguments):"function"==typeof n?i.bind(null,document).apply(null,arguments):("string"==typeof e&&(e=document.querySelectorAll(e)),Array.prototype.map.call(e,(function(e){return i(e,t,n,r,s)})))}},879:function(e,t){t.node=function(e){return void 0!==e&&e instanceof HTMLElement&&1===e.nodeType},t.nodeList=function(e){var n=Object.prototype.toString.call(e);return void 0!==e&&("[object NodeList]"===n||"[object HTMLCollection]"===n)&&"length"in e&&(0===e.length||t.node(e[0]))},t.string=function(e){return"string"==typeof e||e instanceof String},t.fn=function(e){return"[object Function]"===Object.prototype.toString.call(e)}},370:function(e,t,n){var r=n(879),i=n(438);e.exports=function(e,t,n){if(!e&&!t&&!n)throw new Error("Missing required arguments");if(!r.string(t))throw new TypeError("Second argument must be a String");if(!r.fn(n))throw new TypeError("Third argument must be a Function");if(r.node(e))return function(e,t,n){return e.addEventListener(t,n),{destroy:function(){e.removeEventListener(t,n)}}}(e,t,n);if(r.nodeList(e))return function(e,t,n){return Array.prototype.forEach.call(e,(function(e){e.addEventListener(t,n)})),{destroy:function(){Array.prototype.forEach.call(e,(function(e){e.removeEventListener(t,n)}))}}}(e,t,n);if(r.string(e))return function(e,t,n){return i(document.body,e,t,n)}(e,t,n);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}},817:function(e){e.exports=function(e){var t;if("SELECT"===e.nodeName)e.focus(),t=e.value;else if("INPUT"===e.nodeName||"TEXTAREA"===e.nodeName){var n=e.hasAttribute("readonly");n||e.setAttribute("readonly",""),e.select(),e.setSelectionRange(0,e.value.length),n||e.removeAttribute("readonly"),t=e.value}else{e.hasAttribute("contenteditable")&&e.focus();var r=window.getSelection(),i=document.createRange();i.selectNodeContents(e),r.removeAllRanges(),r.addRange(i),t=r.toString()}return t}},279:function(e){function t(){}t.prototype={on:function(e,t,n){var r=this.e||(this.e={});return(r[e]||(r[e]=[])).push({fn:t,ctx:n}),this},once:function(e,t,n){var r=this;function i(){r.off(e,i),t.apply(n,arguments)}return i._=t,this.on(e,i,n)},emit:function(e){for(var t=[].slice.call(arguments,1),n=((this.e||(this.e={}))[e]||[]).slice(),r=0,i=n.length;r<i;r++)n[r].fn.apply(n[r].ctx,t);return this},off:function(e,t){var n=this.e||(this.e={}),r=n[e],i=[];if(r&&t)for(var s=0,o=r.length;s<o;s++)r[s].fn!==t&&r[s].fn._!==t&&i.push(r[s]);return i.length?n[e]=i:delete n[e],this}},e.exports=t,e.exports.TinyEmitter=t}},t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}return n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n(686)}().default},e.exports=t()},35035:e=>{"use strict";e.exports=function(e,t){t||(t={}),"function"==typeof t&&(t={cmp:t});var n,r="boolean"==typeof t.cycles&&t.cycles,i=t.cmp&&(n=t.cmp,function(e){return function(t,r){var i={key:t,value:e[t]},s={key:r,value:e[r]};return n(i,s)}}),s=[];return function e(t){if(t&&t.toJSON&&"function"==typeof t.toJSON&&(t=t.toJSON()),void 0!==t){if("number"==typeof t)return isFinite(t)?""+t:"null";if("object"!=typeof t)return JSON.stringify(t);var n,o;if(Array.isArray(t)){for(o="[",n=0;n<t.length;n++)n&&(o+=","),o+=e(t[n])||"null";return o+"]"}if(null===t)return"null";if(-1!==s.indexOf(t)){if(r)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var a=s.push(t)-1,c=Object.keys(t).sort(i&&i(t));for(o="",n=0;n<c.length;n++){var l=c[n],u=e(t[l]);u&&(o&&(o+=","),o+=JSON.stringify(l)+":"+u)}return s.splice(a,1),"{"+o+"}"}}(e)}},87594:(e,t)=>{function n(e){let t,n=[];for(let r of e.split(",").map((e=>e.trim())))if(/^-?\d+$/.test(r))n.push(parseInt(r,10));else if(t=r.match(/^(-?\d+)(-|\.\.\.?|\u2025|\u2026|\u22EF)(-?\d+)$/)){let[e,r,i,s]=t;if(r&&s){r=parseInt(r),s=parseInt(s);const e=r<s?1:-1;"-"!==i&&".."!==i&&"\u2025"!==i||(s+=e);for(let t=r;t!==s;t+=e)n.push(t)}}return n}t.default=n,e.exports=n},96192:(e,t)=>{var n,r,i,s=function(){var e=function(e,t){var n=e,r=u[t],i=null,s=0,o=null,a=[],c={},l=function(e,t){i=function(e){for(var t=new Array(e),n=0;n<e;n+=1){t[n]=new Array(e);for(var r=0;r<e;r+=1)t[n][r]=null}return t}(s=4*n+17),d(0,0),d(s-7,0),d(0,s-7),p(),h(),m(e,t),n>=7&&f(e),null==o&&(o=E(n,r,a)),g(o,t)},d=function(e,t){for(var n=-1;n<=7;n+=1)if(!(e+n<=-1||s<=e+n))for(var r=-1;r<=7;r+=1)t+r<=-1||s<=t+r||(i[e+n][t+r]=0<=n&&n<=6&&(0==r||6==r)||0<=r&&r<=6&&(0==n||6==n)||2<=n&&n<=4&&2<=r&&r<=4)},h=function(){for(var e=8;e<s-8;e+=1)null==i[e][6]&&(i[e][6]=e%2==0);for(var t=8;t<s-8;t+=1)null==i[6][t]&&(i[6][t]=t%2==0)},p=function(){for(var e=y.getPatternPosition(n),t=0;t<e.length;t+=1)for(var r=0;r<e.length;r+=1){var s=e[t],o=e[r];if(null==i[s][o])for(var a=-2;a<=2;a+=1)for(var c=-2;c<=2;c+=1)i[s+a][o+c]=-2==a||2==a||-2==c||2==c||0==a&&0==c}},f=function(e){for(var t=y.getBCHTypeNumber(n),r=0;r<18;r+=1){var o=!e&&1==(t>>r&1);i[Math.floor(r/3)][r%3+s-8-3]=o}for(r=0;r<18;r+=1){o=!e&&1==(t>>r&1);i[r%3+s-8-3][Math.floor(r/3)]=o}},m=function(e,t){for(var n=r<<3|t,o=y.getBCHTypeInfo(n),a=0;a<15;a+=1){var c=!e&&1==(o>>a&1);a<6?i[a][8]=c:a<8?i[a+1][8]=c:i[s-15+a][8]=c}for(a=0;a<15;a+=1){c=!e&&1==(o>>a&1);a<8?i[8][s-a-1]=c:a<9?i[8][15-a-1+1]=c:i[8][15-a-1]=c}i[s-8][8]=!e},g=function(e,t){for(var n=-1,r=s-1,o=7,a=0,c=y.getMaskFunction(t),l=s-1;l>0;l-=2)for(6==l&&(l-=1);;){for(var u=0;u<2;u+=1)if(null==i[r][l-u]){var d=!1;a<e.length&&(d=1==(e[a]>>>o&1)),c(r,l-u)&&(d=!d),i[r][l-u]=d,-1==(o-=1)&&(a+=1,o=7)}if((r+=n)<0||s<=r){r-=n,n=-n;break}}},E=function(e,t,n){for(var r=b.getRSBlocks(e,t),i=S(),s=0;s<n.length;s+=1){var o=n[s];i.put(o.getMode(),4),i.put(o.getLength(),y.getLengthInBits(o.getMode(),e)),o.write(i)}var a=0;for(s=0;s<r.length;s+=1)a+=r[s].dataCount;if(i.getLengthInBits()>8*a)throw"code length overflow. ("+i.getLengthInBits()+">"+8*a+")";for(i.getLengthInBits()+4<=8*a&&i.put(0,4);i.getLengthInBits()%8!=0;)i.putBit(!1);for(;!(i.getLengthInBits()>=8*a||(i.put(236,8),i.getLengthInBits()>=8*a));)i.put(17,8);return function(e,t){for(var n=0,r=0,i=0,s=new Array(t.length),o=new Array(t.length),a=0;a<t.length;a+=1){var c=t[a].dataCount,l=t[a].totalCount-c;r=Math.max(r,c),i=Math.max(i,l),s[a]=new Array(c);for(var u=0;u<s[a].length;u+=1)s[a][u]=255&e.getBuffer()[u+n];n+=c;var d=y.getErrorCorrectPolynomial(l),h=T(s[a],d.getLength()-1).mod(d);for(o[a]=new Array(d.getLength()-1),u=0;u<o[a].length;u+=1){var p=u+h.getLength()-o[a].length;o[a][u]=p>=0?h.getAt(p):0}}var f=0;for(u=0;u<t.length;u+=1)f+=t[u].totalCount;var m=new Array(f),g=0;for(u=0;u<r;u+=1)for(a=0;a<t.length;a+=1)u<s[a].length&&(m[g]=s[a][u],g+=1);for(u=0;u<i;u+=1)for(a=0;a<t.length;a+=1)u<o[a].length&&(m[g]=o[a][u],g+=1);return m}(i,r)};c.addData=function(e,t){var n=null;switch(t=t||"Byte"){case"Numeric":n=w(e);break;case"Alphanumeric":n=R(e);break;case"Byte":n=_(e);break;case"Kanji":n=O(e);break;default:throw"mode:"+t}a.push(n),o=null},c.isDark=function(e,t){if(e<0||s<=e||t<0||s<=t)throw e+","+t;return i[e][t]},c.getModuleCount=function(){return s},c.make=function(){if(n<1){for(var e=1;e<40;e++){for(var t=b.getRSBlocks(e,r),i=S(),s=0;s<a.length;s++){var o=a[s];i.put(o.getMode(),4),i.put(o.getLength(),y.getLengthInBits(o.getMode(),e)),o.write(i)}var u=0;for(s=0;s<t.length;s++)u+=t[s].dataCount;if(i.getLengthInBits()<=8*u)break}n=e}l(!1,function(){for(var e=0,t=0,n=0;n<8;n+=1){l(!0,n);var r=y.getLostPoint(c);(0==n||e>r)&&(e=r,t=n)}return t}())},c.createTableTag=function(e,t){e=e||2;var n="";n+='<table style="',n+=" border-width: 0px; border-style: none;",n+=" border-collapse: collapse;",n+=" padding: 0px; margin: "+(t=void 0===t?4*e:t)+"px;",n+='">',n+="<tbody>";for(var r=0;r<c.getModuleCount();r+=1){n+="<tr>";for(var i=0;i<c.getModuleCount();i+=1)n+='<td style="',n+=" border-width: 0px; border-style: none;",n+=" border-collapse: collapse;",n+=" padding: 0px; margin: 0px;",n+=" width: "+e+"px;",n+=" height: "+e+"px;",n+=" background-color: ",n+=c.isDark(r,i)?"#000000":"#ffffff",n+=";",n+='"/>';n+="</tr>"}return n+="</tbody>",n+="</table>"},c.createSvgTag=function(e,t,n,r){var i={};"object"==typeof arguments[0]&&(e=(i=arguments[0]).cellSize,t=i.margin,n=i.alt,r=i.title),e=e||2,t=void 0===t?4*e:t,(n="string"==typeof n?{text:n}:n||{}).text=n.text||null,n.id=n.text?n.id||"qrcode-description":null,(r="string"==typeof r?{text:r}:r||{}).text=r.text||null,r.id=r.text?r.id||"qrcode-title":null;var s,o,a,l,u=c.getModuleCount()*e+2*t,d="";for(l="l"+e+",0 0,"+e+" -"+e+",0 0,-"+e+"z ",d+='<svg version="1.1" xmlns="http://www.w3.org/2000/svg"',d+=i.scalable?"":' width="'+u+'px" height="'+u+'px"',d+=' viewBox="0 0 '+u+" "+u+'" ',d+=' preserveAspectRatio="xMinYMin meet"',d+=r.text||n.text?' role="img" aria-labelledby="'+v([r.id,n.id].join(" ").trim())+'"':"",d+=">",d+=r.text?'<title id="'+v(r.id)+'">'+v(r.text)+"</title>":"",d+=n.text?'<description id="'+v(n.id)+'">'+v(n.text)+"</description>":"",d+='<rect width="100%" height="100%" fill="white" cx="0" cy="0"/>',d+='<path d="',o=0;o<c.getModuleCount();o+=1)for(a=o*e+t,s=0;s<c.getModuleCount();s+=1)c.isDark(o,s)&&(d+="M"+(s*e+t)+","+a+l);return d+='" stroke="transparent" fill="black"/>',d+="</svg>"},c.createDataURL=function(e,t){e=e||2,t=void 0===t?4*e:t;var n=c.getModuleCount()*e+2*t,r=t,i=n-t;return I(n,n,(function(t,n){if(r<=t&&t<i&&r<=n&&n<i){var s=Math.floor((t-r)/e),o=Math.floor((n-r)/e);return c.isDark(o,s)?0:1}return 1}))},c.createImgTag=function(e,t,n){e=e||2,t=void 0===t?4*e:t;var r=c.getModuleCount()*e+2*t,i="";return i+="<img",i+=' src="',i+=c.createDataURL(e,t),i+='"',i+=' width="',i+=r,i+='"',i+=' height="',i+=r,i+='"',n&&(i+=' alt="',i+=v(n),i+='"'),i+="/>"};var v=function(e){for(var t="",n=0;n<e.length;n+=1){var r=e.charAt(n);switch(r){case"<":t+="&lt;";break;case">":t+="&gt;";break;case"&":t+="&amp;";break;case'"':t+="&quot;";break;default:t+=r}}return t};return c.createASCII=function(e,t){if((e=e||1)<2)return function(e){e=void 0===e?2:e;var t,n,r,i,s,o=1*c.getModuleCount()+2*e,a=e,l=o-e,u={"\u2588\u2588":"\u2588","\u2588 ":"\u2580"," \u2588":"\u2584","  ":" "},d={"\u2588\u2588":"\u2580","\u2588 ":"\u2580"," \u2588":" ","  ":" "},h="";for(t=0;t<o;t+=2){for(r=Math.floor((t-a)/1),i=Math.floor((t+1-a)/1),n=0;n<o;n+=1)s="\u2588",a<=n&&n<l&&a<=t&&t<l&&c.isDark(r,Math.floor((n-a)/1))&&(s=" "),a<=n&&n<l&&a<=t+1&&t+1<l&&c.isDark(i,Math.floor((n-a)/1))?s+=" ":s+="\u2588",h+=e<1&&t+1>=l?d[s]:u[s];h+="\n"}return o%2&&e>0?h.substring(0,h.length-o-1)+Array(o+1).join("\u2580"):h.substring(0,h.length-1)}(t);e-=1,t=void 0===t?2*e:t;var n,r,i,s,o=c.getModuleCount()*e+2*t,a=t,l=o-t,u=Array(e+1).join("\u2588\u2588"),d=Array(e+1).join("  "),h="",p="";for(n=0;n<o;n+=1){for(i=Math.floor((n-a)/e),p="",r=0;r<o;r+=1)s=1,a<=r&&r<l&&a<=n&&n<l&&c.isDark(i,Math.floor((r-a)/e))&&(s=0),p+=s?u:d;for(i=0;i<e;i+=1)h+=p+"\n"}return h.substring(0,h.length-1)},c.renderTo2dContext=function(e,t){t=t||2;for(var n=c.getModuleCount(),r=0;r<n;r++)for(var i=0;i<n;i++)e.fillStyle=c.isDark(r,i)?"black":"white",e.fillRect(r*t,i*t,t,t)},c};e.stringToBytes=(e.stringToBytesFuncs={default:function(e){for(var t=[],n=0;n<e.length;n+=1){var r=e.charCodeAt(n);t.push(255&r)}return t}}).default,e.createStringToBytes=function(e,t){var n=function(){for(var n=P(e),r=function(){var e=n.read();if(-1==e)throw"eof";return e},i=0,s={};;){var o=n.read();if(-1==o)break;var a=r(),c=r()<<8|r();s[String.fromCharCode(o<<8|a)]=c,i+=1}if(i!=t)throw i+" != "+t;return s}(),r="?".charCodeAt(0);return function(e){for(var t=[],i=0;i<e.length;i+=1){var s=e.charCodeAt(i);if(s<128)t.push(s);else{var o=n[e.charAt(i)];"number"==typeof o?(255&o)==o?t.push(o):(t.push(o>>>8),t.push(255&o)):t.push(r)}}return t}};var t,n,r,i,s,o=1,a=2,c=4,l=8,u={L:1,M:0,Q:3,H:2},d=0,h=1,p=2,f=3,m=4,g=5,E=6,v=7,y=(t=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],n=1335,r=7973,s=function(e){for(var t=0;0!=e;)t+=1,e>>>=1;return t},(i={}).getBCHTypeInfo=function(e){for(var t=e<<10;s(t)-s(n)>=0;)t^=n<<s(t)-s(n);return 21522^(e<<10|t)},i.getBCHTypeNumber=function(e){for(var t=e<<12;s(t)-s(r)>=0;)t^=r<<s(t)-s(r);return e<<12|t},i.getPatternPosition=function(e){return t[e-1]},i.getMaskFunction=function(e){switch(e){case d:return function(e,t){return(e+t)%2==0};case h:return function(e,t){return e%2==0};case p:return function(e,t){return t%3==0};case f:return function(e,t){return(e+t)%3==0};case m:return function(e,t){return(Math.floor(e/2)+Math.floor(t/3))%2==0};case g:return function(e,t){return e*t%2+e*t%3==0};case E:return function(e,t){return(e*t%2+e*t%3)%2==0};case v:return function(e,t){return(e*t%3+(e+t)%2)%2==0};default:throw"bad maskPattern:"+e}},i.getErrorCorrectPolynomial=function(e){for(var t=T([1],0),n=0;n<e;n+=1)t=t.multiply(T([1,A.gexp(n)],0));return t},i.getLengthInBits=function(e,t){if(1<=t&&t<10)switch(e){case o:return 10;case a:return 9;case c:case l:return 8;default:throw"mode:"+e}else if(t<27)switch(e){case o:return 12;case a:return 11;case c:return 16;case l:return 10;default:throw"mode:"+e}else{if(!(t<41))throw"type:"+t;switch(e){case o:return 14;case a:return 13;case c:return 16;case l:return 12;default:throw"mode:"+e}}},i.getLostPoint=function(e){for(var t=e.getModuleCount(),n=0,r=0;r<t;r+=1)for(var i=0;i<t;i+=1){for(var s=0,o=e.isDark(r,i),a=-1;a<=1;a+=1)if(!(r+a<0||t<=r+a))for(var c=-1;c<=1;c+=1)i+c<0||t<=i+c||0==a&&0==c||o==e.isDark(r+a,i+c)&&(s+=1);s>5&&(n+=3+s-5)}for(r=0;r<t-1;r+=1)for(i=0;i<t-1;i+=1){var l=0;e.isDark(r,i)&&(l+=1),e.isDark(r+1,i)&&(l+=1),e.isDark(r,i+1)&&(l+=1),e.isDark(r+1,i+1)&&(l+=1),0!=l&&4!=l||(n+=3)}for(r=0;r<t;r+=1)for(i=0;i<t-6;i+=1)e.isDark(r,i)&&!e.isDark(r,i+1)&&e.isDark(r,i+2)&&e.isDark(r,i+3)&&e.isDark(r,i+4)&&!e.isDark(r,i+5)&&e.isDark(r,i+6)&&(n+=40);for(i=0;i<t;i+=1)for(r=0;r<t-6;r+=1)e.isDark(r,i)&&!e.isDark(r+1,i)&&e.isDark(r+2,i)&&e.isDark(r+3,i)&&e.isDark(r+4,i)&&!e.isDark(r+5,i)&&e.isDark(r+6,i)&&(n+=40);var u=0;for(i=0;i<t;i+=1)for(r=0;r<t;r+=1)e.isDark(r,i)&&(u+=1);return n+=Math.abs(100*u/t/t-50)/5*10},i),A=function(){for(var e=new Array(256),t=new Array(256),n=0;n<8;n+=1)e[n]=1<<n;for(n=8;n<256;n+=1)e[n]=e[n-4]^e[n-5]^e[n-6]^e[n-8];for(n=0;n<255;n+=1)t[e[n]]=n;var r={glog:function(e){if(e<1)throw"glog("+e+")";return t[e]},gexp:function(t){for(;t<0;)t+=255;for(;t>=256;)t-=255;return e[t]}};return r}();function T(e,t){if(void 0===e.length)throw e.length+"/"+t;var n=function(){for(var n=0;n<e.length&&0==e[n];)n+=1;for(var r=new Array(e.length-n+t),i=0;i<e.length-n;i+=1)r[i]=e[i+n];return r}(),r={getAt:function(e){return n[e]},getLength:function(){return n.length},multiply:function(e){for(var t=new Array(r.getLength()+e.getLength()-1),n=0;n<r.getLength();n+=1)for(var i=0;i<e.getLength();i+=1)t[n+i]^=A.gexp(A.glog(r.getAt(n))+A.glog(e.getAt(i)));return T(t,0)},mod:function(e){if(r.getLength()-e.getLength()<0)return r;for(var t=A.glog(r.getAt(0))-A.glog(e.getAt(0)),n=new Array(r.getLength()),i=0;i<r.getLength();i+=1)n[i]=r.getAt(i);for(i=0;i<e.getLength();i+=1)n[i]^=A.gexp(A.glog(e.getAt(i))+t);return T(n,0).mod(e)}};return r}var b=function(){var e=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12,7,37,13],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],t=function(e,t){var n={};return n.totalCount=e,n.dataCount=t,n},n={};return n.getRSBlocks=function(n,r){var i=function(t,n){switch(n){case u.L:return e[4*(t-1)+0];case u.M:return e[4*(t-1)+1];case u.Q:return e[4*(t-1)+2];case u.H:return e[4*(t-1)+3];default:return}}(n,r);if(void 0===i)throw"bad rs block @ typeNumber:"+n+"/errorCorrectionLevel:"+r;for(var s=i.length/3,o=[],a=0;a<s;a+=1)for(var c=i[3*a+0],l=i[3*a+1],d=i[3*a+2],h=0;h<c;h+=1)o.push(t(l,d));return o},n}(),S=function(){var e=[],t=0,n={getBuffer:function(){return e},getAt:function(t){var n=Math.floor(t/8);return 1==(e[n]>>>7-t%8&1)},put:function(e,t){for(var r=0;r<t;r+=1)n.putBit(1==(e>>>t-r-1&1))},getLengthInBits:function(){return t},putBit:function(n){var r=Math.floor(t/8);e.length<=r&&e.push(0),n&&(e[r]|=128>>>t%8),t+=1}};return n},w=function(e){var t=o,n=e,r={getMode:function(){return t},getLength:function(e){return n.length},write:function(e){for(var t=n,r=0;r+2<t.length;)e.put(i(t.substring(r,r+3)),10),r+=3;r<t.length&&(t.length-r==1?e.put(i(t.substring(r,r+1)),4):t.length-r==2&&e.put(i(t.substring(r,r+2)),7))}},i=function(e){for(var t=0,n=0;n<e.length;n+=1)t=10*t+s(e.charAt(n));return t},s=function(e){if("0"<=e&&e<="9")return e.charCodeAt(0)-"0".charCodeAt(0);throw"illegal char :"+e};return r},R=function(e){var t=a,n=e,r={getMode:function(){return t},getLength:function(e){return n.length},write:function(e){for(var t=n,r=0;r+1<t.length;)e.put(45*i(t.charAt(r))+i(t.charAt(r+1)),11),r+=2;r<t.length&&e.put(i(t.charAt(r)),6)}},i=function(e){if("0"<=e&&e<="9")return e.charCodeAt(0)-"0".charCodeAt(0);if("A"<=e&&e<="Z")return e.charCodeAt(0)-"A".charCodeAt(0)+10;switch(e){case" ":return 36;case"$":return 37;case"%":return 38;case"*":return 39;case"+":return 40;case"-":return 41;case".":return 42;case"/":return 43;case":":return 44;default:throw"illegal char :"+e}};return r},_=function(t){var n=c,r=e.stringToBytes(t),i={getMode:function(){return n},getLength:function(e){return r.length},write:function(e){for(var t=0;t<r.length;t+=1)e.put(r[t],8)}};return i},O=function(t){var n=l,r=e.stringToBytesFuncs.SJIS;if(!r)throw"sjis not supported.";!function(e,t){var n=r("\u53cb");if(2!=n.length||38726!=(n[0]<<8|n[1]))throw"sjis not supported."}();var i=r(t),s={getMode:function(){return n},getLength:function(e){return~~(i.length/2)},write:function(e){for(var t=i,n=0;n+1<t.length;){var r=(255&t[n])<<8|255&t[n+1];if(33088<=r&&r<=40956)r-=33088;else{if(!(57408<=r&&r<=60351))throw"illegal char at "+(n+1)+"/"+r;r-=49472}r=192*(r>>>8&255)+(255&r),e.put(r,13),n+=2}if(n<t.length)throw"illegal char at "+(n+1)}};return s},N=function(){var e=[],t={writeByte:function(t){e.push(255&t)},writeShort:function(e){t.writeByte(e),t.writeByte(e>>>8)},writeBytes:function(e,n,r){n=n||0,r=r||e.length;for(var i=0;i<r;i+=1)t.writeByte(e[i+n])},writeString:function(e){for(var n=0;n<e.length;n+=1)t.writeByte(e.charCodeAt(n))},toByteArray:function(){return e},toString:function(){var t="";t+="[";for(var n=0;n<e.length;n+=1)n>0&&(t+=","),t+=e[n];return t+="]"}};return t},P=function(e){var t=e,n=0,r=0,i=0,s={read:function(){for(;i<8;){if(n>=t.length){if(0==i)return-1;throw"unexpected end of file./"+i}var e=t.charAt(n);if(n+=1,"="==e)return i=0,-1;e.match(/^\s$/)||(r=r<<6|o(e.charCodeAt(0)),i+=6)}var s=r>>>i-8&255;return i-=8,s}},o=function(e){if(65<=e&&e<=90)return e-65;if(97<=e&&e<=122)return e-97+26;if(48<=e&&e<=57)return e-48+52;if(43==e)return 62;if(47==e)return 63;throw"c:"+e};return s},I=function(e,t,n){for(var r=function(e,t){var n=e,r=t,i=new Array(e*t),s={setPixel:function(e,t,r){i[t*n+e]=r},write:function(e){e.writeString("GIF87a"),e.writeShort(n),e.writeShort(r),e.writeByte(128),e.writeByte(0),e.writeByte(0),e.writeByte(0),e.writeByte(0),e.writeByte(0),e.writeByte(255),e.writeByte(255),e.writeByte(255),e.writeString(","),e.writeShort(0),e.writeShort(0),e.writeShort(n),e.writeShort(r),e.writeByte(0);var t=o(2);e.writeByte(2);for(var i=0;t.length-i>255;)e.writeByte(255),e.writeBytes(t,i,255),i+=255;e.writeByte(t.length-i),e.writeBytes(t,i,t.length-i),e.writeByte(0),e.writeString(";")}},o=function(e){for(var t=1<<e,n=1+(1<<e),r=e+1,s=a(),o=0;o<t;o+=1)s.add(String.fromCharCode(o));s.add(String.fromCharCode(t)),s.add(String.fromCharCode(n));var c,l,u,d=N(),h=(c=d,l=0,u=0,{write:function(e,t){if(e>>>t!=0)throw"length over";for(;l+t>=8;)c.writeByte(255&(e<<l|u)),t-=8-l,e>>>=8-l,u=0,l=0;u|=e<<l,l+=t},flush:function(){l>0&&c.writeByte(u)}});h.write(t,r);var p=0,f=String.fromCharCode(i[p]);for(p+=1;p<i.length;){var m=String.fromCharCode(i[p]);p+=1,s.contains(f+m)?f+=m:(h.write(s.indexOf(f),r),s.size()<4095&&(s.size()==1<<r&&(r+=1),s.add(f+m)),f=m)}return h.write(s.indexOf(f),r),h.write(n,r),h.flush(),d.toByteArray()},a=function(){var e={},t=0,n={add:function(r){if(n.contains(r))throw"dup key:"+r;e[r]=t,t+=1},size:function(){return t},indexOf:function(t){return e[t]},contains:function(t){return void 0!==e[t]}};return n};return s}(e,t),i=0;i<t;i+=1)for(var s=0;s<e;s+=1)r.setPixel(s,i,n(s,i));var o=N();r.write(o);for(var a=function(){var e=0,t=0,n=0,r="",i={},s=function(e){r+=String.fromCharCode(o(63&e))},o=function(e){if(e<0);else{if(e<26)return 65+e;if(e<52)return e-26+97;if(e<62)return e-52+48;if(62==e)return 43;if(63==e)return 47}throw"n:"+e};return i.writeByte=function(r){for(e=e<<8|255&r,t+=8,n+=1;t>=6;)s(e>>>t-6),t-=6},i.flush=function(){if(t>0&&(s(e<<6-t),e=0,t=0),n%3!=0)for(var i=3-n%3,o=0;o<i;o+=1)r+="="},i.toString=function(){return r},i}(),c=o.toByteArray(),l=0;l<c.length;l+=1)a.writeByte(c[l]);return a.flush(),"data:image/gif;base64,"+a};return e}();s.stringToBytesFuncs["UTF-8"]=function(e){return function(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t.push(r):r<2048?t.push(192|r>>6,128|63&r):r<55296||r>=57344?t.push(224|r>>12,128|r>>6&63,128|63&r):(n++,r=65536+((1023&r)<<10|1023&e.charCodeAt(n)),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r))}return t}(e)},r=[],void 0===(i="function"==typeof(n=function(){return s})?n.apply(t,r):n)||(e.exports=i)}}]);